Source URL: https://developers.google.com/maps/documentation/placesinsights/experimental/functions-overview?hl=ko
Title: 장소 수 함수 개요

의견 보내기

장소 수 함수 개요

컬렉션을 사용해 정리하기

내 환경설정을 기준으로 콘텐츠를 저장하고 분류하세요.

이 페이지의 내용지원되는 장소 수 함수 및 국가 [https://developers.google.com/maps/documentation/placesinsights/experimental/functions-overview?hl=ko#supported_place_count_functions_and_countries]장소 개수 함수 예시 [https://developers.google.com/maps/documentation/placesinsights/experimental/functions-overview?hl=ko#place_count_function_example]유형, 지역 또는 H3별 장소 수 예 [https://developers.google.com/maps/documentation/placesinsights/experimental/functions-overview?hl=ko#place_count_per_type_geo_or_h3_example]함수에 필터 적용 [https://developers.google.com/maps/documentation/placesinsights/experimental/functions-overview?hl=ko#apply_filters_to_the_function]결과 시각화 [https://developers.google.com/maps/documentation/placesinsights/experimental/functions-overview?hl=ko#visualize_results]제한사항 및 요구사항 [https://developers.google.com/maps/documentation/placesinsights/experimental/functions-overview?hl=ko#limitations_and_requirements]장소 수 함수와 장소 데이터 세트 쿼리 비교 [https://developers.google.com/maps/documentation/placesinsights/experimental/functions-overview?hl=ko#compare_place_count_functions_and_place_dataset_queries]BigQuery의 장소 수 함수 참조 [https://developers.google.com/maps/documentation/placesinsights/experimental/functions-overview?hl=ko#reference-functions]

장소 수 함수는 Places Insights에서 사용할 수 있는 장소 데이터를 쿼리하는 또 다른 방법입니다. 이러한 함수는 BigQuery에서 실행되는 사전 정의된 SQL 쿼리이며 장소 데이터 쿼리 [https://developers.google.com/maps/documentation/placesinsights/queries?hl=ko]를 보완합니다. 주요 차이점은 함수가 최소 개수 기준점을 적용하지 않고 최소 검색 영역을 적용한다는 점입니다.

장소 데이터 세트 쿼리는 5 이상의 개수만 반환할 수 있지만 검색 영역의 크기에 제한을 적용하지는 않습니다.
장소 수 함수는 0을 포함한 모든 수를 반환할 수 있지만 최소 검색 영역은 40.0m x 40.0m (1600m2)입니다.

쿼리에서 결과가 반환되지 않는 시점을 파악하는 것이 중요하거나 5 미만의 장소 수를 파악해야 하는 경우 장소 수 함수를 사용하는 것이 좋습니다. 예를 들어 낮은 개수를 반환할 수 있는 것은 사이트 선택 사용 사례에 중요합니다.

지원되는 장소 수 함수 및 국가

장소 통계는 다음 기능을 지원합니다.

PLACES_COUNT [https://developers.google.com/maps/documentation/placesinsights/experimental/places-count?hl=ko]: 장소 수를 포함하는 단일 행을 반환합니다.
PLACES_COUNT_PER_TYPE [https://developers.google.com/maps/documentation/placesinsights/experimental/places-count-per-type?hl=ko]: 장소 유형별 장소 수를 나타내는 BigQuery 테이블을 반환합니다.
PLACES_COUNT_PER_GEO [https://developers.google.com/maps/documentation/placesinsights/experimental/places-count-per-geo?hl=ko]: 지역별 장소 수를 나타내는 BigQuery 테이블을 반환합니다.
PLACES_COUNT_PER_H3 [https://developers.google.com/maps/documentation/placesinsights/experimental/places-count-per-h3?hl=ko]: H3 셀별 장소 수를 나타내는 BigQuery 테이블을 반환합니다.

장소 수와 함께 PLACES_COUNT_PER_TYPE, PLACES_COUNT_PER_GEO, PLACES_COUNT_PER_H3 함수는 응답의 요소당 최대 250개의 장소 ID도 반환합니다.

장소 데이터 세트와 마찬가지로 지원되는 각 국가의 상위 도시에 장소 수 함수를 사용할 수 있습니다. 예를 들어 오스트레일리아의 경우 오스트레일리아 시드니의 장소 수 함수에 액세스할 수 있습니다.
참고: 샘플 데이터 세트 액세스를 위해 구독 [https://developers.google.com/maps/documentation/placesinsights/cloud-setup?hl=ko]한 도시 및 국가의 장소 수 함수에 액세스할 수 있습니다.
지원되는 도시 및 국가의 전체 목록은 BigQuery의 참조 장소 개수 함수 [https://developers.google.com/maps/documentation/placesinsights/experimental/functions-overview?hl=ko#reference-functions]를 참고하세요.

장소 개수 함수 예시

다음 예에서는 PLACES_COUNT 함수를 사용하여 뉴욕시 엠파이어 스테이트 빌딩에서 1,000미터 이내에 있는 영업 중인 레스토랑 수를 반환합니다.

SELECT `maps-platform-analytics-hub.sample_places_insights_us.PLACES_COUNT`(
JSON_OBJECT(
'geography', ST_GEOGPOINT(-73.9857, 40.7484), -- Empire State Building
'geography_radius', 1000, -- Radius in meters
'business_status', ['OPERATIONAL'],
'types', ["restaurant"]
) as count;
참고: 일반적으로 OPERATIONAL 비즈니스 수를 확인하기 위해 business_status 필터를 포함합니다. 그렇지 않으면 폐업한 비즈니스가 포함됩니다.
응답에는 단일 개수가 포함됩니다.

이 예에서 SELECT 문은 다음 구문을 사용하여 미국의 PLACES_COUNT 함수를 참조합니다.

maps-platform-analytics-hub.sample_places_insights_us.PLACES_COUNT

지원되는 도시 및 국가의 전체 목록은 BigQuery의 참조 장소 개수 함수 [https://developers.google.com/maps/documentation/placesinsights/experimental/functions-overview?hl=ko#reference-functions]를 참고하세요.

JSON_OBJECT [https://cloud.google.com/bigquery/docs/reference/standard-sql/json_functions?hl=ko#json_object]을 사용하여 함수에 인수를 전달합니다. 이 예에서는 BigQuery ST_GEOGPOINT [https://cloud.google.com/bigquery/docs/reference/standard-sql/geography_functions?hl=ko#st_geogpoint] 함수를 사용하여 점에서 GEOGRAPHY 값을 반환한 다음 해당 값을 geography 매개변수에 전달합니다. 또한 포인트 주변의 검색 반경과 검색할 장소 유형 "restaurant"를 전달합니다.
참고: 필수 및 선택적 매개변수는 필터 [https://developers.google.com/maps/documentation/placesinsights/experimental/filter-params?hl=ko]에 설명된 대로 각 장소 수 함수마다 다릅니다.
유형, 지역 또는 H3별 장소 수 예

장소 수와 함께 PLACES_COUNT_PER_TYPE, PLACES_COUNT_PER_GEO, PLACES_COUNT_PER_H3 함수는 응답에 포함된 장소의 장소 ID를 최대 250개까지 반환합니다.

예를 들어 PLACES_COUNT_PER_TYPE 함수는 장소 유형별 장소 개수 표를 반환합니다. 응답에는 각 유형과 일치하는 장소의 장소 ID 배열이 포함됩니다. 반환된 장소 ID를 사용하여 각 장소에 관한 정보를 조회할 수 있습니다.

다음 함수 호출은 restaurant, cafe, bar 유형의 장소 수를 반환합니다.

SELECT * FROM `maps-platform-analytics-hub.sample_places_insights_us.PLACES_COUNT_PER_TYPE`(
JSON_OBJECT(
'geography', ST_GEOGPOINT(-73.9857, 40.7484), -- Empire State Building
'geography_radius', 1000, -- Radius in meters
'types', ["restaurant", "cafe", "bar"],
'business_status', ['OPERATIONAL']

이 함수는 type, count, sample_place_ids의 세 열이 있는 테이블을 반환합니다. count 열에는 각 type의 장소 수가 표시되고 sample_place_ids 열에는 각 type의 장소 ID가 최대 250개까지 표시됩니다.

함수에 필터 적용

필터 [https://developers.google.com/maps/documentation/placesinsights/experimental/filter-params?hl=ko]를 적용하여 검색 기준을 좁힙니다. 장소 수 함수는 검색 범위를 좁히기 위한 다양한 필터를 지원합니다. 다음 예에서는 최소 사용자 평점, 가격대, 비즈니스 상태, 레스토랑의 개 허용 여부를 기준으로 검색을 제한하는 필터를 적용합니다.

SELECT `maps-platform-analytics-hub.sample_places_insights_us.PLACES_COUNT`(
JSON_OBJECT(
'geography', ST_GEOGPOINT(-73.9857, 40.7484), -- Empire State Building
'geography_radius', 1000, -- Radius in meters
'business_status', ['OPERATIONAL'],
'types', ["restaurant"],
'min_rating', 1.3,
'price_level', ['PRICE_LEVEL_INEXPENSIVE', 'PRICE_LEVEL_MODERATE'],
'allows_dogs', TRUE
) as count;

결과 시각화

분석 및 비즈니스 인텔리전스 도구 [https://cloud.google.com/bigquery/docs/data-analysis-tools-intro?hl=ko]는 BigQuery 데이터에서 유용한 정보를 도출하는 데 중요합니다. BigQuery는 장소 통계 데이터에 대한 함수의 결과를 분석하는 데 사용할 수 있는 여러 Google 및 서드 파티 데이터 시각화 도구 [https://cloud.google.com/bigquery/docs/geospatial-visualize?hl=ko]를 지원합니다.

함수 결과를 시각화하는 예시는 결과 시각화 [https://developers.google.com/maps/documentation/placesinsights/experimental/places-count-per-h3?hl=ko#visualize_results]를 참고하세요.
장소 통계 결과를 시각화하는 방법에 관한 자세한 내용과 예는 쿼리 결과 시각화 [https://developers.google.com/maps/documentation/placesinsights/visualize-data?hl=ko]를 참고하세요.

제한사항 및 요구사항

장소 개수 함수에는 다음과 같은 제한사항과 요구사항이 있습니다.

COUNT 통계만 지원됩니다.
최소 검색 영역은 40.0m x 40.0m (1,600m2)입니다.
장소 함수 개수 매개변수 입력 크기는 1MB로 제한됩니다.
장소 ID 또는 주소 구성요소별 필터링은 지원되지 않습니다.

장소 수 함수와 장소 데이터 세트 쿼리 비교

다음 표에는 주요 차이점이 나와 있습니다.

|  | 장소 수 함수 | 데이터 세트 쿼리 배치 |
| --- | --- | --- |
| 인터페이스 | COUNT 통계를 생성하는 사전 정의된 SQL 함수 4개: 단일 개수, 유형별 개수, 지역별 개수, H3 셀별 개수 | SQL을 사용하여 COUNT, COUNT_IF, SUM, AVG.과 같은 집계 함수를 실행합니다. JOIN, GROUP BY, WHERE 등을 사용하여 추가 통계를 생성할 수 있습니다. |
| 제한사항 | 최소 검색 영역을 40.0m x 40.0m (1600m2)로 강제 적용합니다. 최소 검색 영역이 충족되면 집계 수가 5 미만이라도 함수는 결과를 반환합니다. | 개수 기준점 5를 적용하지만 최소 검색 영역은 없습니다. |
| 지원되는 속성 필터 | 다음을 제외한 전체 스키마가 지원됩니다. id 장소 주소 구성요소 | 전체 스키마 지원 |
| 이점 | 개수를 반환할 수 있습니다. 성능과 낮은 처리 비용에 최적화되어 있습니다. 사용하기 쉬움 복잡한 쿼리를 작성할 필요가 없습니다. 입력 매개변수의 유효성을 검사하고 오류를 반환하여 사용 및 디버깅을 더 쉽게 만듭니다. | 고급 필터링 및 조인과 같은 복잡한 쿼리를 허용합니다. 최소 검색 영역을 적용하지 않습니다. COUNT 외에 AVG, SUM, GROUP BY과 같은 추가 집계 함수를 지원합니다. |

BigQuery의 장소 수 함수 참조

장소 수 함수는 다음 도시와 국가를 지원합니다. 도시와 국가별로 별도로 구독 [https://developers.google.com/maps/documentation/placesinsights/cloud-setup?hl=ko]해야 합니다.

| 시, 국가 | 테이블 이름 |
| --- | --- |
| 오스트레일리아 시드니 | maps-platform-analytics-hub.sample_places_insights_au.FUNCTION_NAME |
| 브라질 상파울루 | maps-platform-analytics-hub.sample_places_insights_br.FUNCTION_NAME |
| 캐나다 토론토 | maps-platform-analytics-hub.sample_places_insights_ca.FUNCTION_NAME |
| 프랑스 파리 | maps-platform-analytics-hub.sample_places_insights_fr.FUNCTION_NAME |
| 독일 베를린 | maps-platform-analytics-hub.sample_places_insights_de.FUNCTION_NAME |
| 영국 런던 | maps-platform-analytics-hub.sample_places_insights_gb.FUNCTION_NAME |
| 인도 뭄바이 | maps-platform-analytics-hub.sample_places_insights_in.FUNCTION_NAME |
| 인도네시아 자카르타 | maps-platform-analytics-hub.sample_places_insights_id.FUNCTION_NAME |
| 이탈리아 로마 | maps-platform-analytics-hub.sample_places_insights_it.FUNCTION_NAME |
| 일본 도쿄 | maps-platform-analytics-hub.sample_places_insights_jp.FUNCTION_NAME |
| 멕시코 멕시코시티 | maps-platform-analytics-hub.sample_places_insights_mx.FUNCTION_NAME |
| 스페인 마드리드 | maps-platform-analytics-hub.sample_places_insights_es.FUNCTION_NAME |
| 스위스 취리히 | maps-platform-analytics-hub.sample_places_insights_ch.FUNCTION_NAME |
| 미국 뉴욕시 | maps-platform-analytics-hub.sample_places_insights_us.FUNCTION_NAME |

의견 보내기