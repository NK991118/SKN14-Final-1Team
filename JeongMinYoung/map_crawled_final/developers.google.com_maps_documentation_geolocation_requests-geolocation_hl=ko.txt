Source URL: https://developers.google.com/maps/documentation/geolocation/requests-geolocation?hl=ko
Title: 위치정보 요청 및 응답
bookmark_border

의견 보내기

위치정보 요청 및 응답

bookmark_borderbookmark

컬렉션을 사용해 정리하기

내 환경설정을 기준으로 콘텐츠를 저장하고 분류하세요.

이 페이지의 내용Geolocation 요청 [https://developers.google.com/maps/documentation/geolocation/requests-geolocation?hl=ko#requests]요청 본문 [https://developers.google.com/maps/documentation/geolocation/requests-geolocation?hl=ko#body]휴대폰 기지국 객체 [https://developers.google.com/maps/documentation/geolocation/requests-geolocation?hl=ko#cell_tower_object]WiFi 액세스 지점 객체 [https://developers.google.com/maps/documentation/geolocation/requests-geolocation?hl=ko#wifi_access_point_object]샘플 요청 [https://developers.google.com/maps/documentation/geolocation/requests-geolocation?hl=ko#sample-requests]사용하지 않는 Wi-Fi 액세스 포인트 삭제 [https://developers.google.com/maps/documentation/geolocation/requests-geolocation?hl=ko#filter_mac]Geolocation 응답 [https://developers.google.com/maps/documentation/geolocation/requests-geolocation?hl=ko#responses]

Geolocation 요청

Geolocation 요청은 POST를 사용하여 다음과 같은 URL로 전송됩니다.

https://www.googleapis.com/geolocation/v1/geolocate?key=YOUR_API_KEY

요청에 키를 지정해야 합니다. 키는 key 매개변수의 값으로 포함됩니다. key는 애플리케이션의 API 키입니다. 이 키는 할당량 관리를 위해 애플리케이션을 식별합니다. 키를 가져오는 [https://developers.google.com/maps/documentation/geolocation/get-api-key?hl=ko] 방법을 알아보세요.

요청 본문

요청 본문은 JSON 형식으로 지정되어야 합니다. 요청 본문이 포함되지 않으면 요청 위치의 IP 주소를 기반으로 결과가 반환됩니다. 다음 필드가 지원되며, 달리 명시되지 않는 한 모든 필드는 선택사항입니다.

| 필드 | JSON 유형 | 설명 | 참고 |
| --- | --- | --- | --- |
| homeMobileCountryCode | number(uint32) | 기기의 홈 네트워크의 모바일 국가 코드 (MCC)입니다. | radioType, gsm (기본값), wcdma, lte, nr의 경우 지원됨. cdma의 경우 사용되지 않음 유효 범위: 0~999 |
| homeMobileNetworkCode | number(uint32) | 기기의 홈 네트워크의 모바일 네트워크 코드입니다. GSM, WCDMA, LTE, NR의 MNC입니다. CDMA는 시스템 ID (SID)를 사용합니다. | MNC의 유효 범위: 0~999 SID의 유효 범위: 0~32767 |
| radioType | string | 모바일 무선 유형입니다. 지원되는 값은 gsm, cdma, wcdma, lte, nr입니다. | 이 필드는 선택사항이지만 라디오 유형을 클라이언트가 알고 있는 경우 항상 포함해야 합니다. 필드가 생략되면 Geolocation API가 기본적으로 gsm로 설정되며, 이 경우 가정된 무선 유형이 잘못되면 결과가 잘못되거나 0이 됩니다. |
| carrier | string | 이동통신사 이름입니다. |  |
| considerIp | boolean | Wi-Fi 및 기지국 신호가 누락되거나 비어 있거나 기기 위치를 추정하기에 충분하지 않은 경우 IP 위치정보로 대체할지 여부를 지정합니다. | 기본값은 true입니다. 대체 방지를 위해 considerIp을 false로 설정합니다. |
| cellTowers | array | 휴대폰 기지국 객체의 배열입니다. | 아래의 기지국 객체 섹션을 참고하세요. |
| wifiAccessPoints | array | WiFi 액세스 지점 객체의 배열입니다. | 아래의 Wi-Fi 액세스 포인트 객체 섹션을 참고하세요. |

Geolocation API 요청 본문의 예는 아래와 같습니다.

"homeMobileCountryCode": 310,
"homeMobileNetworkCode": 410,
"radioType": "gsm",
"carrier": "Vodafone",
"considerIp": true,
"cellTowers": [

NR (5G) 이전의 무선 유형은 32비트 cellId 필드를 사용하여 네트워크 셀 ID를 위치정보 API에 전달합니다.

GSM (2G) 네트워크는 16비트 셀 ID (CID)를 그대로 사용합니다. 유효 범위: 0~65535
CDMA (2G) 네트워크는 16비트 기지국 ID (BID)를 그대로 사용합니다. 유효 범위: 0~65535
WCDMA (3G) 네트워크는 12비트 무선 네트워크 컨트롤러 식별자 (RNC-ID)와 16비트 셀 ID (CID)를 연결하는 28비트 정수 값인 UTRAN/GERAN 셀 ID (UC-ID)를 사용합니다.
수식: rnc_id << 16 | cid.
유효 범위: 0~268435455
참고: WCDMA 네트워크에서 16비트 셀 ID 값만 지정하면 결과가 잘못되거나 0이 됩니다.
LTE (4G) 네트워크는 20비트 E-UTRAN 노드 B 식별자 (eNBId)와 8비트 셀 ID (CID)를 연결하는 28비트 정수 값인 E-UTRAN 셀 ID (ECI)를 사용합니다.
수식: enb_id << 8 | cid.
유효 범위: 0~268435455
참고: LTE 네트워크에서 8비트 셀 ID 값만 지정하면 결과가 잘못되거나 0이 됩니다.

이 범위를 벗어난 값을 API 요청에 배치하면 정의되지 않은 동작이 발생할 수 있습니다.  API는 Google의 재량에 따라 숫자가 문서화된 범위에 맞도록 자르거나, radioType의 수정을 추론하거나, 응답에 표시기 없이 NOT_FOUND 결과를 반환할 수 있습니다.

LTE 기지국 객체의 예는 아래와 같습니다.

"cellTowers": [
"cellId": 170402199,
"locationAreaCode": 35632,
"mobileCountryCode": 310,
"mobileNetworkCode": 410,
"age": 0,
"signalStrength": -60,
"timingAdvance": 15

셀 ID가 32비트보다 긴 최신 네트워크는 64비트 newRadioCellId 필드를 사용하여 네트워크 셀 ID를 위치정보 API에 전달합니다.

NR (5G) 네트워크는 36비트 새 무선 셀 ID (NCI)를 그대로 사용합니다.
유효한 범위: 0~68719476735

NR 기지국 객체의 예는 아래와 같습니다.

"cellTowers": [
"newRadioCellId": 68719476735,
"mobileCountryCode": 310,
"mobileNetworkCode": 410,
"age": 0,
"signalStrength": -60,
WiFi 액세스 지점 객체

요청 본문의 wifiAccessPoints 배열에는 물리적으로 구분되는 액세스 포인트 기기를 나타내는 Wi-Fi 액세스 포인트 객체가 두 개 이상 포함되어야 합니다. macAddress은 필수이고 다른 모든 필드는 선택사항입니다.

| 필드 | JSON 유형 | 설명 | 참고 |
| --- | --- | --- | --- |
| macAddress | string | Wi-Fi 노드의 MAC 주소입니다. 일반적으로 BSS, BSSID 또는 MAC 주소라고 합니다. | 필수사항. 콜론으로 구분된 (:) 16진수 문자열입니다. API를 통해 범용 관리 MAC 주소만 찾을 수 있습니다. 다른 MAC 주소는 자동으로 삭제되며 API 요청이 사실상 비어 있게 될 수 있습니다. 자세한 내용은 쓸모없는 Wi-Fi 액세스 포인트 삭제를 참고하세요. |
| signalStrength | number(double) | DBm 단위로 측정된 전류 신호 강도입니다. | Wi-Fi 액세스 포인트의 경우 dBm 값은 일반적으로 -35 이하이며 범위는 -128~-10dBm입니다. 빼기 기호를 포함해야 합니다. 값이 -10dBm보다 큰 경우 API는 NOT FOUND을 반환합니다. |
| age | number(uint32) | 이 액세스 지점이 감지된 이후의 밀리초 단위 시간입니다. |  |
| channel | number(uint32) | 클라이언트가 액세스 지점과 통신 중인 채널입니다. |  |
| signalToNoiseRatio | number(double) | dB로 측정된 현재 신호 대 노이즈 비율입니다. |  |

아래는 예시 WiFi 액세스 지점 객체입니다.

"macAddress": "f0:d5:bf:fd:12:ae",
"signalStrength": -43,
"signalToNoiseRatio": 0,
"channel": 11,
"age": 0
String[] macs = {"12:34:56:78:9a:bc", "1c:34:56:78:9a:bc", "00:00:5e:00:00:01"};
ArrayList<String> _macs = new ArrayList<>(Arrays.asList(macs));
_macs.removeIf(m -> !(0 == (2 & Integer.parseInt(m.substring(1, 2), 16))
&& !m.substring(0, 8).toUpperCase().equals("00:00:5E")));

--- 탭: Python [https://developers.google.com/maps/documentation/geolocation/requests-geolocation?hl=ko#python] [None] ---
macs = ['12:34:56:78:9a:bc', '1c:34:56:78:9a:bc', '00:00:5e:00:00:01']
macs = [m for m in macs if (0 == (2 & int(m[1], 16)) and m[:8].upper() != '00:00:5E')]

--- 탭: JavaScript [https://developers.google.com/maps/documentation/geolocation/requests-geolocation?hl=ko#javascript] [None] ---
macs = ['12:34:56:78:9a:bc', '1c:34:56:78:9a:bc', '00:00:5e:00:00:01'];
macs = macs.filter(m => 0 === (2 & Number.parseInt(m[1], 16))
&& m.substr(0, 8).toUpperCase() !== '00:00:5E');

이 필터를 사용하면 목록에 1c:34:56:78:9a:bc만 남게 됩니다.  이 목록에는 Wi-Fi MAC 주소가 2개 미만 [https://developers.google.com/maps/documentation/geolocation/requests-geolocation?hl=ko#wifi_access_point_object]이므로 요청이 성공하지 않고 HTTP 404 (notFound) 응답 [https://developers.google.com/maps/documentation/geolocation/requests-geolocation-errors?hl=ko#error_descriptions]이 반환됩니다.

Geolocation 응답

위치정보 요청이 성공하면 위치와 반경을 정의하는 JSON 형식의 응답이 반환됩니다.

location: 사용자의 추정 위도 및 경도 좌표(도)입니다. 하나의 lat 및 하나의 lng 하위 필드가 포함되어 있습니다.
accuracy: 추정된 위치의 정확도(미터)입니다. 이는 지정된 location 주변의 원의 반지름을 나타냅니다.

"location": {
"lat": 37.421875199999995,
"lng": -122.0851173