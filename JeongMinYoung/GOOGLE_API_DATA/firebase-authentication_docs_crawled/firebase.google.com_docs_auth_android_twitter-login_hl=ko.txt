Source URL: https://firebase.google.com/docs/auth/android/twitter-login?hl=ko
Title: Android에서 Twitter를 사용하여 인증

의견 보내기

Android에서 Twitter를 사용하여 인증

컬렉션을 사용해 정리하기

내 환경설정을 기준으로 콘텐츠를 저장하고 분류하세요.

엔드 투 엔드 로그인 과정을 수행하도록 Firebase SDK를 사용하여 앱에 웹 기반의 일반 OAuth 로그인을 통합하면 사용자가 Twitter 계정을 사용하여 Firebase에 인증할 수 있습니다.

시작하기 전에

사용자가 Twitter 계정을 통해 로그인하도록 하려면 우선 Firebase 프로젝트에서 Twitter를 로그인 제공업체로 사용 설정해야 합니다.

아직 추가하지 않았다면 Android 프로젝트에 Firebase를 추가 [https://firebase.google.com/docs/android/setup?hl=ko]합니다.
Firebase Console [https://console.firebase.google.com/?hl=ko]에서 인증 섹션을 엽니다.
로그인 방법 탭에서 Twitter 제공업체를 사용 설정합니다.
해당 제공업체의 개발자 콘솔에서 제공되는 API 키와 API 비밀번호를 제공업체 구성에 추가합니다.Twitter에서 개발자 애플리케이션으로 앱을 등록 [https://apps.twitter.com/]하고 앱의 OAuth API 키와 API 비밀번호를 가져옵니다.
Twitter 앱 구성 [https://apps.twitter.com/]의 앱 설정 페이지에서 Firebase OAuth 리디렉션 URI(예: my-app-12345.firebaseapp.com/__/auth/handler)가 승인 콜백 URL로 설정되어 있는지 확인합니다.

저장을 클릭합니다.

모듈(앱 수준) Gradle 파일(일반적으로 <project>/<app-module>/build.gradle.kts 또는 <project>/<app-module>/build.gradle)에서 Android용 Firebase Authentication 라이브러리의 종속 항목을 추가합니다. 라이브러리 버전 관리 제어에는 Firebase Android BoM [https://firebase.google.com/docs/android/learn-more?hl=ko#bom]을 사용하는 것이 좋습니다.

dependencies {
BoM을 사용하지 않고 Firebase 라이브러리 종속 항목을 추가합니다.

Firebase BoM을 사용하지 않도록 선택한 경우에는 종속 항목 줄에 각 Firebase 라이브러리 버전을 지정해야 합니다.
앱에서 여러 Firebase 라이브러리를 사용하는 경우 모든 버전이 호환되도록 BoM을 사용하여 라이브러리 버전을 관리하는 것이 좋습니다.

dependencies {
Firebase SDK로 로그인 과정 처리

Android 앱을 빌드하는 경우 Twitter 계정을 사용하여 Firebase에 사용자를 인증하는 가장 손쉬운 방법은 Firebase Android SDK로 전체 로그인 과정을 처리하는 것입니다.

Firebase Android SDK로 로그인 과정을 처리하려면 다음 단계를 따릅니다.

제공업체 ID Twitter.com을 사용하여 빌더로 OAuthProvider의 인스턴스를 생성합니다.

Kotlin
val provider = OAuthProvider.newBuilder("twitter.com")GenericIdpActivity.kt [https://github.com/firebase/snippets-android/blob/268a3858585da19107220dbad9ceb8a5fd23241a/auth/app/src/main/java/com/google/firebase/quickstart/auth/kotlin/GenericIdpActivity.kt#L24-L24]
Java
OAuthProvider.Builder provider = OAuthProvider.newBuilder("twitter.com");GenericIdpActivity.java [https://github.com/firebase/snippets-android/blob/268a3858585da19107220dbad9ceb8a5fd23241a/auth/app/src/main/java/com/google/firebase/quickstart/auth/GenericIdpActivity.java#L24-L24]

선택사항: OAuth 요청과 함께 전송하고자 하는 커스텀 OAuth 매개변수를 추가로 지정합니다.

Kotlin
Firebase에서 요구하는 매개변수는 setCustomParameters()와 함께 전달할 수 없습니다. 이러한 매개변수에는 client_id, response_type, redirect_uri, state, scope, response_mode가 있습니다.
OAuth 제공업체 객체를 사용해 Firebase에 인증합니다. 다른 FirebaseAuth 작업과 달리 이 작업은 커스텀 Chrome 탭 [https://developer.chrome.com/multidevice/android/customtabs?hl=ko]을 팝업으로 표시하여 UI를 제어합니다.
이로 인해 작업에서 UI를 시작할 때, 연결한 OnSuccessListener 및 OnFailureListener가 즉각 분리되므로 이들 리스너에서 활동을 참조하면 안 됩니다.

우선 이미 응답을 수신했는지를 확인해야 합니다. 이 방법으로 로그인하면 활동이 백그라운드에서 진행되므로, 로그인 과정 중에 시스템에서 다시 회수될 수 있습니다. 이 경우 사용자가 다시 시도하지 않도록 하려면 결과가 이미 존재하는지 확인해야 합니다.

대기 중인 결과가 있는지 확인하려면 다음과 같이 getPendingAuthResult를 호출합니다.

Kotlin
val pendingResultTask = firebaseAuth.pendingAuthResult
if (pendingResultTask != null) {
Task<AuthResult> pendingResultTask = firebaseAuth.getPendingAuthResult();
if (pendingResultTask != null) {
.addOnSuccessListener(
new OnSuccessListener<AuthResult>() {
@Override
public void onSuccess(AuthResult authResult) {
firebaseAuth
.startActivityForSignInWithProvider(activity, provider.build())
firebaseAuth
.startActivityForSignInWithProvider(/* activity= */ this, provider.build())
.addOnSuccessListener(
new OnSuccessListener<AuthResult>() {
@Override
public void onSuccess(AuthResult authResult) {
firebaseUser
.startActivityForLinkWithProvider(activity, provider.build())
FirebaseUser firebaseUser = firebaseAuth.getCurrentUser();

firebaseUser
.startActivityForLinkWithProvider(/* activity= */ this, provider.build())
.addOnSuccessListener(
new OnSuccessListener<AuthResult>() {
@Override
public void onSuccess(AuthResult authResult) {

Kotlin
firebaseUser
.startActivityForReauthenticateWithProvider(activity, provider.build())
FirebaseUser firebaseUser = firebaseAuth.getCurrentUser();

firebaseUser
.startActivityForReauthenticateWithProvider(/* activity= */ this, provider.build())
.addOnSuccessListener(
new OnSuccessListener<AuthResult>() {
@Override
public void onSuccess(AuthResult authResult) {
Firebase.auth.signOut()MainActivity.kt [https://github.com/firebase/snippets-android/blob/268a3858585da19107220dbad9ceb8a5fd23241a/auth/app/src/main/java/com/google/firebase/quickstart/auth/kotlin/MainActivity.kt#L415-L415]

Java
FirebaseAuth.getInstance().signOut();MainActivity.java [https://github.com/firebase/snippets-android/blob/268a3858585da19107220dbad9ceb8a5fd23241a/auth/app/src/main/java/com/google/firebase/quickstart/auth/MainActivity.java#L501-L501]

의견 보내기