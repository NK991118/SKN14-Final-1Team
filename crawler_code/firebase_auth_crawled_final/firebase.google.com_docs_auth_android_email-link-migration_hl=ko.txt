Source URL: https://firebase.google.com/docs/auth/android/email-link-migration?hl=ko
Title: Firebase 동적 링크에서 이메일 링크 로그인을 마이그레이션(Android)
bookmark_border

의견 보내기

Firebase 동적 링크에서 이메일 링크 로그인을 마이그레이션(Android)

bookmark_borderbookmark

컬렉션을 사용해 정리하기

내 환경설정을 기준으로 콘텐츠를 저장하고 분류하세요.

이 페이지의 내용연결된 Firebase Dynamic Links 도메인을 Firebase Hosting 도메인으로 마이그레이션 [https://firebase.google.com/docs/auth/android/email-link-migration?hl=ko#migrate-associated-domain]모바일 링크 맞춤설정 [https://firebase.google.com/docs/auth/android/email-link-migration?hl=ko#customize-mobile-links]커스텀 Firebase Hosting 도메인 사용 [https://firebase.google.com/docs/auth/android/email-link-migration?hl=ko#use-custom-hosting-domain]커스텀 Firebase Dynamic Links 도메인 재사용 [https://firebase.google.com/docs/auth/android/email-link-migration?hl=ko#reuse-custom-dynamic-link-domain]

이메일 링크 인증은 이전에 Firebase Dynamic Links를 사용했으며 이 기능은 2025년 8월 25일에 종료 [https://firebase.google.com/support/dynamic-links-faq?hl=ko]됩니다. Firebase Authentication Android SDK 버전 23.2.0 이상 및 Firebase BoM 버전 33.9.0 이상에서 대체 솔루션을 게시했습니다. 앱에서 이전 스타일의 링크를 사용하고 앱을 마이그레이션하는 다른 방법을 사용하려면 Android에서 이메일 링크를 사용하여 Firebase에 인증 [https://firebase.google.com/docs/auth/android/email-link-auth?hl=ko]을 참조하여 새 Firebase Hosting 기반 시스템을 사용하세요.

또한 Firebase Authentication과 함께 v20.0.0 미만의 Firebase Authentication Android SDK(또는 v26.0.0 미만의 Firebase BoM)를 사용하여 OAuth 흐름을 관리하는 경우 Firebase Authentication에서 OAuth 흐름을 계속 관리하려면 최신 Authentication SDK 또는 BoM 버전(Authentication v20.0.0 이상 또는 BoM v26.0.0 이상)으로 업데이트해야 합니다.

연결된 Firebase Dynamic Links 도메인을 Firebase Hosting 도메인으로 마이그레이션

앞으로 Firebase Authentication은 Firebase Dynamic Links 도메인을 사용하는 대신 프로젝트의 Firebase Hosting 기본 도메인을 사용하여 모바일 앱에서 이메일 링크 및 기타 대역 외 링크 작업의 링크를 만듭니다. 즉, 이 기본 도메인을 모바일 앱의 이메일 인증 링크에 연결된 도메인으로 사용하도록 앱도 업데이트해야 합니다.

Android에서 이메일 링크를 사용하여 Firebase에 인증 [https://firebase.google.com/docs/auth/android/email-link-auth?hl=ko]의 안내에 따라 모바일 앱 링크를 업데이트하여 자동으로 프로비저닝된 새 Firebase Hosting 기본 도메인을 사용할 수 있습니다.

다음 안내에 따라 새 도메인의 링크를 처리하고 앞으로 Firebase Authentication에서 새 도메인을 사용하여 모바일 앱 링크를 생성하도록 지시합니다.

커스텀 Firebase Hosting 도메인 또는 커스텀 Firebase Dynamic Links 도메인을 새 연결 도메인으로 계속 사용하려면 사용하려는 도메인에 맞는 단계를 따르세요. 다음 섹션의 안내를 완료하면 Firebase Dynamic Links 커스텀 도메인의 딥 링크 기능이 삭제됩니다. 이메일 링크를 만들 때는 도메인 자체만 남게 됩니다.

Firebase Hosting 링크를 처리하도록 Android 애플리케이션 구성

Android 애플리케이션에서 이 링크를 처리하려면 Firebase Console 프로젝트 설정에서 앱의 패키지 이름을 지정해야 합니다. 또한 애플리케이션 인증서의 SHA-1 및 SHA-256을 제공해야 합니다.
이러한 Firebase Hosting 링크를 특정 활동으로 리디렉션하려면 AndroidManifest.xml 파일에 인텐트 필터를 구성해야 합니다. 인텐트 필터가 도메인의 Firebase Hosting 링크를 인식합니다. AndroidManifest.xml의 경우 다음과 같습니다.
<intent-filter android:autoVerify="true">
<action android:name="android.intent.action.VIEW" />
<category android:name="android.intent.category.BROWSABLE" />
<category android:name="android.intent.category.DEFAULT" />
<data
android:scheme="https"
android:host="PROJECT_ID.firebaseapp.com or a custom hosting domain"
android:pathPrefix="/__/auth/links" />
</intent-filter>

사용자가 지정한 스키마 및 호스트와 '/__/auth/links' 경로가 포함된 호스팅 링크를 열면 앱에서 이 인텐트 필터로 링크를 처리하는 활동을 시작합니다.
중요: 원활한 롤백을 위해 Firebase Hosting 링크 솔루션을 사용해 보는 동안 Firebase Dynamic Links를 처리하는 기존 인텐트 필터를 유지하는 것이 좋습니다. Firebase Dynamic Links 솔루션은 2025년 8월 25일까지 사용할 수 있습니다.
새 링크를 사용하도록 프로젝트 구성

새 도메인 링크를 처리할 준비가 되면 Firebase Admin SDK [https://firebase.google.com/docs/admin/setup?hl=ko]를 사용하여 이메일 링크 생성 방식을 업데이트하고 백엔드에 새 Firebase Hosting 도메인을 사용하여 링크 생성을 시작하도록 지시할 수 있습니다.
import { getAuth } from 'firebase-admin/auth';

const updateEmailAuthDomain = async () => {
const updateRequest = {
mobileLinksConfig: {
domain: 'HOSTING_DOMAIN',
},
};

const projectConfigManager = getAuth().projectConfigManager();

try {
const response = await projectConfigManager.updateProjectConfig(updateRequest);
// Updated project config
console.log('Project configuration updated successfully:', response);
} catch (error) {
console.error('Error updating the project:', error);
}
};
중요: 백업 솔루션을 구현하고 테스트하는 동안 Firebase Dynamic Links로 롤백하려면 도메인을 FIREBASE_DYNAMIC_LINK로 다시 설정해야 합니다. Firebase Dynamic Links 솔루션은 2025년 8월 25일까지 사용할 수 있습니다.
이메일 링크 보내기 및 사용

이전과 같이 이메일 로그인 링크를 보냅니다. 최종 사용자가 링크를 클릭하면 앱이 설치된 경우 앱으로 리디렉션되어 로그인을 완료하게 됩니다.

모바일 링크 맞춤설정

커스텀 Firebase Hosting 도메인을 사용하거나 커스텀 Firebase Dynamic Links 도메인을 재사용하여 새 모바일 링크 도메인으로 만들 수 있습니다.

커스텀 Firebase Hosting 도메인 사용

Firebase Hosting 가이드 [https://firebase.google.com/docs/hosting/custom-domain?hl=ko]에 따라 커스텀 도메인을 설정합니다.
Firebase Hosting 링크를 처리하도록 Android 애플리케이션을 구성합니다.
(위의 이전 섹션에 안내)
커스텀 도메인이 linkDomain인 업데이트된 ActionCodeSettings 객체를 사용하여 사용자의 이메일 주소로 인증 링크를 전송 [https://firebase.google.com/docs/auth/android/email-link-auth?hl=ko#send_an_authentication_link_to_the_users_email_address]합니다.

커스텀 Firebase Dynamic Links 도메인 재사용

Firebase Dynamic Links 도메인을 커스텀 도메인으로 재사용할 수 있습니다. 그러나 Firebase Dynamic Links 기능은 더 이상 지원되지 않습니다. 예를 들어 앱이 기기에 설치되어 있지 않으면 사용자를 앱 스토어로 리디렉션할 수 없습니다.
Firebase Hosting 링크를 처리하도록 Android 애플리케이션을 구성합니다(위의 이전 섹션에 안내).
커스텀 도메인이 linkDomain인 업데이트된 ActionCodeSettings 객체를 사용하여 사용자의 이메일 주소로 인증 링크를 전송 [https://firebase.google.com/docs/auth/android/email-link-auth?hl=ko#send_an_authentication_link_to_the_users_email_address]합니다.

의견 보내기