Source URL: https://developers.google.com/maps/documentation/places/ios-sdk/current-place?hl=ko
Title: 현재 장소

의견 보내기

현재 장소

컬렉션을 사용해 정리하기

내 환경설정을 기준으로 콘텐츠를 저장하고 분류하세요.

iOS용 Places SDK를 사용하면 기기가 현재 위치한 장소를 찾을 수 있습니다. 즉, 기기의 현재 보고된 위치에 있는 장소입니다. 장소의 예로는 지역 비즈니스, 관심 장소, 지리적 위치가 있습니다.

위치 정보 액세스 승인 요청 [https://developers.google.com/maps/documentation/places/ios-sdk/legacy/current-place?hl=ko#permissions]
사용량 한도 [https://developers.google.com/maps/documentation/places/ios-sdk/legacy/current-place?hl=ko#quota]
현재 위치 가져오기 [https://developers.google.com/maps/documentation/places/ios-sdk/legacy/current-place?hl=ko#get-current]
앱에 저작자 표시 [https://developers.google.com/maps/documentation/places/ios-sdk/legacy/current-place?hl=ko#attributions]

위치 정보 승인 요청

앱에서 GMSPlacesClient findPlaceLikelihoodsFromCurrentLocationWithPlaceFields: [https://developers.google.com/maps/documentation/places/ios-sdk/reference/objc/Classes/GMSPlacesClient?hl=ko#-findplacelikelihoodsfromcurrentlocationwithplacefields:callback:]를 사용하는 경우 앱은 위치 서비스를 사용하기 위한 권한을 요청해야 합니다. Info.plist 파일에 NSLocationWhenInUseUsageDescription 키를 추가하여 위치 서비스가 필요한 이유를 사용자에게 알리는 문자열을 정의합니다. 예를 들면 다음과 같습니다.

<key>NSLocationWhenInUseUsageDescription</key>
<string>Show your location on the map</string>

앱이 백그라운드에 있을 때 확인 대화상자를 트리거하지 않고 findPlaceLikelihoodsFromCurrentLocationWithPlaceFields: [https://developers.google.com/maps/documentation/places/ios-sdk/reference/objc/Classes/GMSPlacesClient?hl=ko#-findplacelikelihoodsfromcurrentlocationwithplacefields:callback:]를 호출하려면 호출하기 전에 다음 단계를 따르세요.

NSLocationAlwaysUsageDescription 키를 Info.plist 파일에 추가합니다.
메서드를 호출하기 전에 CLLocationManager의 인스턴스에서 requestAlwaysAuthorization를 호출합니다.

다음과 같이 CLLocationManager에서 승인을 요청합니다.

Swift
locationManager.requestAlwaysAuthorization()

Objective-C
[self.locationManager requestAlwaysAuthorization];

현재 위치 가져오기

참고: iOS 14에서는 사용자가 정확한 위치 대신 대략적인 위치를 공유하도록 선택할 수 있는 새로운 개인 정보 보호 기능을 도입했습니다. 앱이 적절하게 동작하도록 CLLocationManager에서 앱의 accuracyAuthorization [https://developer.apple.com/documentation/corelocation/cllocationmanager/3600215-accuracyauthorization] 값을 확인합니다.
자세한 내용은 이 동영상을 참고하세요. [https://developer.apple.com/videos/play/wwdc2020/10162/]

기기가 현재 위치한 지역 비즈니스 또는 기타 장소를 찾으려면 GMSPlacesClient
findPlaceLikelihoodsFromCurrentLocationWithPlaceFields: [https://developers.google.com/maps/documentation/places/ios-sdk/reference/objc/Classes/GMSPlacesClient?hl=ko#-findplacelikelihoodsfromcurrentlocationwithplacefields:callback:]를 호출합니다. 다음 매개변수를 포함합니다.

반환할 데이터 유형을 지정하는 하나 이상의 GMSPlaceField 이 매개변수를 생략하면 가능한 모든 필드가 반환되며 그에 따라 요금이 청구됩니다. 이는 장소 세부정보 요청에만 적용됩니다.
결과를 처리하는 콜백 메서드입니다.

중요!
findPlaceLikelihoodsFromCurrentLocationWithPlaceFields:는 GMSPlaceFieldAddressComponents, GMSPlaceFieldOpeningHours, GMSPlaceFieldPhoneNumber, GMSPlaceFieldWebsite 필드를 지원하지 않습니다. 장소 데이터 필드 [https://developers.google.com/maps/documentation/places/ios-sdk/place-data-fields?hl=ko]에 대해 자세히 알아보기

필드는 장소 검색 결과에 해당하며 기본, 연락처, 분위기 등 세 결제 카테고리로 분류됩니다. 기본 필드에는 기본 요율로 청구되며 추가 요금이 발생하지 않습니다. 연락처 및 분위기 필드에는 더 높은 요율로 청구됩니다. 장소 데이터 요청에 대해 요금이 청구되는 방법에 대한 자세한 내용은 사용량 및 결제 [https://developers.google.com/maps/documentation/places/ios-sdk/usage-and-billing?hl=ko]를 참고하세요.

API는 지정된 콜백 메서드를 호출하여 GMSPlaceLikelihood [https://developers.google.com/maps/documentation/places/ios-sdk/reference/objc/Classes/GMSPlaceLikelihood?hl=ko] 객체 배열을 반환합니다.

각 GMSPlaceLikelihood [https://developers.google.com/maps/documentation/places/ios-sdk/reference/objc/Classes/GMSPlaceLikelihood?hl=ko] 객체는 장소를 나타냅니다. 장소별로 결과에는 장소가 올바른 장소일 가능성을 나타내는 표시가 포함됩니다. 값이 클수록 장소가 가장 일치할 가능성이 높습니다. 기기 위치에 해당하는 알려진 장소가 없는 경우 버퍼가 비어 있을 수 있습니다.

다음 코드 샘플은 기기가 있을 가능성이 가장 높은 장소 목록을 가져와 각 장소의 이름과 가능성을 로깅합니다.

Swift
UInt(GMSPlaceField.placeID.rawValue))!
placesClient?.findPlaceLikelihoodsFromCurrentLocation(withPlaceFields: fields, callback: {
(placeLikelihoodList: Array<GMSPlaceLikelihood>?, error: Error?) in
if let error = error {
print("An error occurred: \(error.localizedDescription)")
return
Objective-C
GMSPlaceField fields = (GMSPlaceFieldName | GMSPlaceFieldPlaceID);
[_placesClient findPlaceLikelihoodsFromCurrentLocationWithPlaceFields:fields callback:^(NSArray<GMSPlaceLikelihood *> * _Nullable likelihoods, NSError * _Nullable error) {
if (error != nil) {
NSLog(@"An error occurred %@", [error localizedDescription]);
return;
GMSPlace *place = likelihood.place;
NSLog(@"Current place name: %@", place.name);
NSLog(@"Place ID: %@", place.placeID);