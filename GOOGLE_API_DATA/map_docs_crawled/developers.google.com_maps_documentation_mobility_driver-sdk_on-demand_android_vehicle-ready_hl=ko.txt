Source URL: https://developers.google.com/maps/documentation/mobility/driver-sdk/on-demand/android/vehicle-ready?hl=ko
Title: 차량 준비

차량 준비

컬렉션을 사용해 정리하기

내 환경설정을 기준으로 콘텐츠를 저장하고 분류하세요.

이 섹션에서는 차량을 운행에 대비하는 방법을 보여줍니다. 백엔드에서 차량을 여정에 매칭하려면 다음 단계를 모두 완료해야 합니다.

리스너 설정

Driver SDK는 백그라운드에서 작업을 실행하므로 오류, 경고, 디버그 메시지와 같은 특정 이벤트가 발생할 때 DriverStatusListener를 사용하여 알림을 트리거하세요. 오류는 일시적일 수도 있고 (예: BACKEND_CONNECTIVITY_ERROR) 위치 업데이트가 영구적으로 중지될 수도 있습니다. 예를 들어 VEHICLE_NOT_FOUND 오류가 표시되면 구성 오류를 나타냅니다.

다음 예는 DriverStatusListener 구현을 보여줍니다.
class MyStatusListener implements DriverStatusListener {
StatusLevel statusLevel, StatusCode statusCode, String statusMsg, @Nullable Throwable cause) {
DriverContextBuilder.setDriverStatusListener(new MyStatusListener());

위치 업데이트 사용 설정

리스너를 설정한 후 다음과 같이 위치 업데이트를 사용 설정합니다.

자바RidesharingVehicleReporter reporter = ...;

reporter.enableLocationTracking();

Kotlinval reporter = ...

reporter.enableLocationTracking()

참고: reporter.enableLocationTracking()을 호출해도 차량 상태가 ONLINE으로 자동 설정되지는 않습니다. 차량 상태를 명시적으로 설정해야 합니다. 자세한 내용은 차량 상태를 온라인으로 설정 [https://developers.google.com/maps/documentation/mobility/driver-sdk/on-demand/android/vehicle-ready?hl=ko#state]을 참고하세요.
업데이트 간격 설정

기본적으로 차량 상태가 ONLINE인 경우 Driver SDK는 10초 간격으로 위치 업데이트를 전송합니다. reporter.setLocationReportingInterval(long, TimeUnit)를 사용하여 이 간격을 변경할 수 있습니다. 지원되는 최소 업데이트 간격은 5초입니다. 업데이트를 더 자주 실행하면 요청이 느려지고 오류가 발생할 수 있습니다.

차량 상태를 온라인으로 설정

위치 업데이트를 사용 설정하면 차량 상태를 ONLINE로 설정하여 Fleet Engine에서 SearchVehicles 쿼리에 차량을 사용할 수 있습니다. Driver SDK는 위치 업데이트와 함께 업데이트된 차량 상태를 전송합니다.

Driver SDK 또는 Fleet Engine 서버에서 직접 차량 상태를 설정할 수 있습니다. 자세한 내용은 차량 업데이트 [https://developers.google.com/maps/documentation/mobility/fleet-engine/essentials/vehicles/on-demand-vehicle-fields?hl=ko#vehicle_state_field]를 참고하세요.

다음 예에서는 Driver SDK에서 차량 상태를 온라인으로 설정하는 방법을 보여줍니다.

자바RidesharingVehicleReporter reporter = ...;

reporter.enableLocationTracking();
reporter.setVehicleState(VehicleState.ONLINE);

Kotlinval reporter = ...

reporter.enableLocationTracking()
reporter.setVehicleState(VehicleState.ONLINE)

주의: 차량을 온라인으로 설정하기 전에 위치 업데이트를 사용 설정해야 합니다. 위치 업데이트가 사용 중지된 상태에서 이를 시도하면 IllegalStateException 오류 메시지가 표시됩니다.
StatusListener는 차량 상태를 업데이트할 때 발생하는 오류도 보고합니다.

다음 단계

여행 세부정보 설정하기 [https://developers.google.com/maps/documentation/mobility/driver-sdk/on-demand/android/trip-details?hl=ko]