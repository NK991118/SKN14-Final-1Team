Source URL: https://developers.google.com/maps/documentation/mobility/fleet-engine/essentials/vehicles/scheduled-tasks-create-vehicle?hl=ko
Title: 예약된 작업을 위한 배송 수단 만들기

예약된 작업을 위한 배송 수단 만들기

컬렉션을 사용해 정리하기

내 환경설정을 기준으로 콘텐츠를 저장하고 분류하세요.

참고: 차량 요청을 구성하기 전에 소개의 차량 요청 [https://developers.google.com/maps/documentation/mobility/fleet-engine/essentials/vehicles?hl=ko#vehicle_requests]에 있는 요구사항을 읽어보세요.
이 문서에서는 gRPC 또는 REST를 사용하여 서버 환경에서 차량을 만드는 방법을 설명합니다. 적절한 사용자 인증 정보를 사용하여 앱을 신뢰할 수 있는 환경으로 프로비저닝한 경우 Driver SDK에서 차량을 만들 수 있습니다.

Driver SDK를 사용하여 차량을 만드는 방법을 알아보려면 다음을 참고하세요.

예약된 작업을 위한 Driver SDK [https://developers.google.com/maps/documentation/mobility/driver-sdk/scheduled?hl=ko]
Fleet Engine 필수사항의 서비스 계정 역할 [https://developers.google.com/maps/documentation/mobility/fleet-engine/essentials/set-up-fleet/service-accounts?hl=ko]

서버 환경에서 새 차량을 만들려면 Fleet Engine에 CreateDeliveryVehicle 요청을 합니다. CreateDeliveryVehicleRequest 객체를 사용하여 새 배송 차량의 속성을 정의합니다.

예약된 작업 차량의 필드

DeliveryVehicle을 만들 때 다음 선택적 필드를 설정합니다.

attributes
last_location
type

중요: 다른 필드는 설정하지 마세요. 이 경우 이러한 필드는 읽기 전용이거나 UpdateDeliveryVehicle 호출로만 업데이트할 수 있으므로 Fleet Engine에서 오류를 반환합니다.
선택적 필드를 설정하지 않고 차량을 만들려면 CreateDeliveryVehicleRequest에서 DeliveryVehicle 필드를 설정하지 않은 상태로 두면 됩니다.

차량 예시 만들기

Java gRPC 라이브러리 [https://developers.google.com/maps/documentation/mobility/fleet-engine/essentials/client-libraries-tasks?hl=ko#java]를 사용하여 차량을 만들거나 REST를 사용할 수 있습니다.

자바  static final String PROJECT_ID = "my-delivery-co-gcp-project";
static final String VEHICLE_ID = "vehicle-8241890"; // Avoid auto-incrementing IDs.

DeliveryServiceBlockingStub deliveryService =
DeliveryServiceGrpc.newBlockingStub(channel);

String parent = "providers/" + PROJECT_ID;
DeliveryVehicle vehicle = DeliveryVehicle.newBuilder()
.addAttributes(DeliveryVehicleAttribute.newBuilder()
.setKey("route_number").setValue("1"))  // Opaque to the Fleet Engine
.build();

CreateDeliveryVehicleRequest createVehicleRequest =
CreateDeliveryVehicleRequest.newBuilder()  // No need for the header
.setParent(parent)
.setDeliveryVehicleId(VEHICLE_ID)     // Vehicle ID assigned by the Provider
.setDeliveryVehicle(vehicle)
.build();

DeliveryVehicle createdVehicle =
deliveryService.createDeliveryVehicle(createVehicleRequest);
Status s = e.getStatus();
switch (s.getCode()) {
case ALREADY_EXISTS:
break;
case PERMISSION_DENIED:
break;
REST서버 환경에서 차량을 만들려면 CreateDeliveryVehicle에 HTTP REST 호출을 합니다.
POST https://fleetengine.googleapis.com/v1/providers/<project_id>/deliveryVehicles?deliveryVehicleId=<id>

POST 본문은 생성할 DeliveryVehicle 항목을 나타냅니다. 다음 선택적 필드를 지정할 수 있습니다.

attributes
lastLocation
type

# Set $JWT, $PROJECT_ID, and $VEHICLE_ID in the local
# environment
curl -X POST "https://fleetengine.googleapis.com/v1/providers/${PROJECT_ID}/deliveryVehicles?deliveryVehicleId=${VEHICLE_ID}" \
-H "Content-type: application/json" \
-H "Authorization: Bearer ${JWT}" \
--data-binary @- << EOM
"attributes": [{"key": "model", "value": "sedan"}],
"lastLocation": {"location": {"latitude": 12.1, "longitude": 14.5}}

필드를 설정하지 않고 차량을 만들려면 POST 요청의 본문을 비워 둡니다. 새로 생성된 차량은 POST URL의 deliveryVehicleId 매개변수에서 차량 ID를 추출합니다.

예:
# Set $JWT, $PROJECT_ID, and $VEHICLE_ID in the local
# environment
curl -X POST "https://fleetengine.googleapis.com/v1/providers/${PROJECT_ID}/deliveryVehicles?deliveryVehicleId=${VEHICLE_ID}" \
-H "Content-type: application/json" \
-H "Authorization: Bearer ${JWT}"

다음 단계

배송 차량 필드 업데이트 [https://developers.google.com/maps/documentation/mobility/fleet-engine/essentials/vehicles/scheduled-tasks-vehicle-fields?hl=ko]