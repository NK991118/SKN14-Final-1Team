Source URL: https://developers.google.com/maps/documentation/mobility/journey-sharing/on-demand

이 페이지는 Cloud Translation API [https://cloud.google.com/translate/?hl=ko]를 통해 번역되었습니다.
홈 [https://developers.google.com/?hl=ko]
제품 [https://developers.google.com/products?hl=ko]
Google Maps Platform [https://developers.google.com/maps?hl=ko]
Mobility Services [https://developers.google.com/maps/documentation/mobility?hl=ko]
Consumer experience [https://developers.google.com/maps/documentation/mobility/journey-sharing?hl=ko]
On-demand trips [https://developers.google.com/maps/documentation/mobility/journey-sharing/on-demand?hl=ko]
소비자 SDK 주문형 이동 개요
소비자가 주문, 차량, 기타 서비스의 여정을 따라갈 수 있도록 하여 주문형 이동의 소비자 환경을 맞춤설정합니다.
Consumer SDK란 무엇인가요?
Consumer SDK는 주문형 이동을 위한 Fleet Engine의 일부입니다. Fleet Engine에서 여정 데이터를 모델링하고 여정을 따르는 인터페이스를 제공하며, 소비자 사용자와 여정을 공유하기 위해 풍부한 지도 기반 디스플레이를 만드는 데 사용하는 클래스를 제공합니다. Consumer SDK를 앱에 통합하고 Fleet Engine 내에서 적절한 역할 프로필을 설정하여 이 소비자 환경을 만듭니다.
Consumer SDK 플랫폼별 API를 사용하면 애플리케이션에 이동 경로를 기본적으로 공유하는 기능을 빌드할 수 있습니다. Consumer SDK는 다음 플랫폼에서 사용할 수 있습니다.
Android [https://developers.google.com/maps/documentation/mobility/journey-sharing/on-demand/android/setup?hl=ko]
iOS [https://developers.google.com/maps/documentation/mobility/journey-sharing/on-demand/ios/setup?hl=ko]
자바스크립트 [https://developers.google.com/maps/documentation/mobility/journey-sharing/on-demand/javascript/setup?hl=ko]
소비자 SDK를 사용해야 하는 이유
소비자 SDK를 주문형 이동 애플리케이션에 통합하면 거의 실시간 위치 업데이트와 도로에 스냅된 위치를 통해 포괄적인 소비자 환경을 제공할 수 있습니다. 소비자는 지도 위에 차량의 경로가 표시되어 자신의 차량이나 배송이 어디에 있는지 알 수 있습니다.
Consumer SDK로 무엇을 할 수 있나요?
Driver SDK 및 Fleet Engine의 정보를 사용하여 다음 기능을 비롯한 맞춤형 소비자 환경을 만들 수 있습니다.
브랜딩 요구사항에 맞게 지도 UI를 맞춤설정합니다.
차량이 경로를 따라 이동할 때 차량의 현재 위치를 추적합니다. 위치는 주기적으로 업데이트됩니다.
픽업 및 하차 위치의 도착 예정 시간 (ETA)을 표시합니다.
참고: 도착 예정 시간 (ETA)은 운전 ETA입니다.
남은 거리를 표시합니다.
경로에 실시간 교통정보를 표시합니다.
Consumer SDK 작동 방식
개략적으로 Consumer SDK는 다음 메커니즘을 사용합니다.
인증된 앱이 소비자의 주문과 연결된 여정을 추적할 수 있도록 적절한 Fleet Engine 역할이 있어야 합니다.
백엔드 시스템에서 제공하는 소비자와 여행 간의 연결입니다.
경로 데이터를 모델링하고 소비자 앱에서 경로 세션을 공유하는 TripModel 및 JourneySharingSession SDK 클래스입니다.
Consumer SDK는 트래픽, 지도 마커, 도착 예정 시간, 경로 데이터와 같은 세부정보가 포함된 풍부한 앱 환경을 만들 수 있도록 다른 인터페이스와 클래스도 제공합니다.
이 표는 소비자 앱에서 따르는 여행의 흐름을 보여줍니다.
1 소비자 앱에서 이동 요청 백엔드 서버가 주문형 이동 요청을 수신하고 다음을 실행합니다.
Fleet Engine에서 여정을 만듭니다.
차량에 이동을 할당합니다.
2 기사가 여정을 수락함 운전자 앱이 이동 ID와 이동 정보를 가져오고 운전자가 이동을 수락합니다.
3 소비자 앱에서 이동을 추적하기 위한 액세스 권한을 요청하는 경우 소비자 앱은 백엔드에서 이동 ID를 가져와 이동을 팔로우하도록 요청합니다.
4 기사가 여정을 시작함 운전자가 운전자 앱을 사용하여 여정이 시작되었음을 나타내면 앱은 Driver SDK를 통해 백엔드 서버에 알립니다. 예를 들어 운전자가 식당을 떠나거나 픽업 위치로 운전할 때입니다.
5 Fleet Engine에서 여정 정보 전송 시작 Fleet Engine이 여정 추적을 시작하고 소비자 앱과 진행 상황을 공유합니다.
6 소비자 앱에 여행 정보가 표시됨 소비자 앱은 소비자에게 알림을 보내고 소비자에게 이동 정보를 표시하기 시작하며 이동이 진행됨에 따라 이동을 업데이트합니다.
7 이동이 취소되거나 완료됨 운전자가 여정을 취소하거나 완료하면 운전자 앱에서 위치 추적을 사용 중지하고 백엔드 서버에서 Fleet Engine에 여정을 취소됨 또는 완료됨으로 표시하도록 지시합니다.
8 소비자 앱에서 이동을 추적하지 않음 여정이 취소 또는 완료로 표시됩니다.
9 다음 여정에서도 이 프로세스가 반복됩니다. 새 여정이 생성되고 프로세스가 반복됩니다.
Consumer SDK 사용 방법
플랫폼을 선택하여 소비자 앱에서 이동을 팔로우하는 방법을 확인하세요.
구성요소
이 섹션에서는 여행을 추적하는 데 필요한 두 가지 구성요소를 요약합니다.
인증 토큰 가져오기 도구 [https://developers.google.com/maps/documentation/mobility/journey-sharing/on-demand?hl=ko#auth]
지도 뷰 및 이동 추적기 [https://developers.google.com/maps/documentation/mobility/journey-sharing/on-demand?hl=ko#maps]
선택적으로 다음 구성요소를 사용하여 소비자 환경을 맞춤설정할 수도 있습니다.
지도 스타일 지정 [https://developers.google.com/maps/documentation/mobility/journey-sharing/on-demand?hl=ko#style]
추적된 위치의 공개 상태 관리 [https://developers.google.com/maps/documentation/mobility/journey-sharing/on-demand?hl=ko#viz]
인증 토큰 가져오기
Fleet Engine에 저장된 위치 데이터에 대한 액세스를 제어하려면 다음을 수행해야 합니다.
서버에서 Fleet Engine용 JSON 웹 토큰 (JWT) 생성 서비스를 구현합니다. 자세한 내용은 JWT 발급 [https://developers.google.com/maps/documentation/mobility/fleet-engine/essentials/set-up-fleet/issue-jwt?hl=ko]을 참고하세요.
위치 데이터에 대한 액세스를 인증하기 위해 웹 또는 모바일 앱에 인증 토큰 가져오기를 구현합니다. 토큰 가져오기 도구 설정에 관한 자세한 내용은 Android [https://developers.google.com/maps/documentation/mobility/journey-sharing/on-demand/android/setup?hl=ko], iOS [https://developers.google.com/maps/documentation/mobility/journey-sharing/on-demand/ios/setup?hl=ko] 또는 JavaScript [https://developers.google.com/maps/documentation/mobility/journey-sharing/on-demand/javascript/setup?hl=ko] 설정 가이드를 참고하세요.
지도 뷰 및 이동 추적기
이동 추적에는 차량과 경유지 시각화 구성요소는 물론 운전자의 도착 예정 시간 또는 운전해야 하는 남은 거리에 관한 원시 데이터 피드가 포함됩니다.
다음 표에서는 이러한 구성요소를 설명합니다.
구성요소 설명
소비자 지도 보기 지도 뷰는 여행의 수명 주기를 관리하며, 여행이 진행됨에 따라 차량 위치의 경유지를 표시합니다. 차량의 경로를 알고 있는 경우 지도 뷰는 차량 경로 폴리라인을 업데이트하여 경로를 따라 차량의 진행 상황을 나타냅니다.
JavaScript의 여행 위치 정보 제공자 JavaScript 웹 앱의 경우 여행 위치 제공자는 추적된 객체의 위치 정보를 공유 여행 지도에 제공합니다. 자세한 내용은 여행 위치 제공자 인스턴스화 [https://developers.google.com/maps/documentation/mobility/journey-sharing/on-demand/javascript/share-journey?hl=ko#trip-prov]를 참고하세요. 여행 위치 제공자를 사용하여 여행의 다음 세부정보를 추적할 수 있습니다.
여행의 승차 또는 하차 위치입니다.
여행에 할당된 차량의 위치와 경로입니다.
추적된 위치 객체
위치 제공자는 다음 표에 설명된 대로 경유지, 차량과 같은 객체의 위치를 추적합니다.
추적된 위치 설명
수령 위치 탑승 위치는 이동이 시작되는 위치입니다.
대상 위치 도착 위치는 여정이 종료되는 위치입니다. 하차 위치를 표시합니다.
경유지 위치 경유지 위치는 추적된 여행의 경로에 있는 중간 위치입니다. 기술적으로는 경유지에 승차 및 하차 위치가 포함될 수 있지만 일반적으로 경유지는 경로를 따라 있는 중간 정류장을 의미합니다. 예를 들어 배송 경로에서 픽업 위치와 목적지 위치 사이의 정류장은 경유지 위치입니다. 자세한 내용은 Fleet Engine 문서의 여정 경유지 [https://developers.google.com/maps/documentation/mobility/fleet-engine/essentials/trip-intro?hl=ko#trip_waypoints]를 참고하세요.
차량 위치 차량 위치는 차량의 보고된 위치입니다. 자세한 내용은 Fleet Engine 문서의 차량 위치 [https://developers.google.com/maps/documentation/mobility/fleet-engine/essentials/vehicles-intro?hl=ko#vehicle_location]를 참고하세요.
지도 스타일 지정
마커 및 폴리라인 스타일은 지도에서 추적된 위치 객체의 디자인과 느낌을 결정합니다. 맞춤 스타일 옵션을 사용하여 웹 애플리케이션의 스타일을 일치시킬 수 있습니다.
추적된 위치의 공개 상태 관리
Fleet Engine의 사전 정의된 위치 제공자는 지도에서 추적된 위치 객체에 대해 이러한 공개 상태 규칙을 따릅니다. 맞춤 또는 파생 위치 제공자를 만드는 경우 공개 상태 규칙을 변경할 수 있습니다.
차량은 이동이 진행 중일 때만 표시됨: 이동 차량은 이동에 할당된 시점부터 하차 시점까지 표시됩니다. 이동이 취소되면 차량이 더 이상 표시되지 않습니다.
다른 모든 위치 마커는 항상 표시됨: 출발지, 목적지, 경유지의 다른 모든 위치 마커는 항상 지도에 표시됩니다. 예를 들어 이동 하차 위치 또는 배송 위치는 이동 또는 배송 상태와 관계없이 항상 지도에 표시됩니다.
다음 단계
여행을 팔로우하려는 플랫폼의 문서를 참고하세요.
Android [https://developers.google.com/maps/documentation/mobility/journey-sharing/on-demand/android/setup?hl=ko]
iOS [https://developers.google.com/maps/documentation/mobility/journey-sharing/on-demand/ios/setup?hl=ko]
자바스크립트 [https://developers.google.com/maps/documentation/mobility/journey-sharing/on-demand/javascript/setup?hl=ko]