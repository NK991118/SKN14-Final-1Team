Source URL: https://developers.google.com/maps/documentation/placesinsights/visualize-data?hl=ko
Title: 쿼리 결과 시각화

의견 보내기

쿼리 결과 시각화

컬렉션을 사용해 정리하기

내 환경설정을 기준으로 콘텐츠를 저장하고 분류하세요.

분석 및 비즈니스 인텔리전스 도구 [https://cloud.google.com/bigquery/docs/data-analysis-tools-intro?hl=ko]는 BigQuery 데이터에서 유용한 정보를 도출하는 데 중요합니다. BigQuery는 다음과 같은 장소 통계 데이터에 대한 쿼리 결과를 분석하는 데 사용할 수 있는 여러 Google 및 서드 파티 데이터 시각화 도구 [https://cloud.google.com/bigquery/docs/geospatial-visualize?hl=ko]를 지원합니다.

Looker Studio
BigQuery Geo Viz
Colab 노트북
Google Earth Engine

아래 예에서는 다음에서 결과를 시각화하는 방법을 설명합니다.

Looker Studio: 데이터 시각화, 대시보드, 보고서를 빌드하고 사용할 수 있는 플랫폼입니다.
BigQuery Geo Viz: Google 지도 API를 사용하는 BigQuery의 지리 공간 데이터 시각화 도구

다른 도구를 사용하여 데이터를 시각화하는 방법에 관한 자세한 내용은 BigQuery 문서 [https://cloud.google.com/bigquery/docs/geospatial-visualize?hl=ko]를 참고하세요.

시각화할 데이터 쿼리

아래 시각화 예에서는 다음 쿼리를 사용하여 휠체어 이용 가능 입구가 있는 뉴욕시의 식당 수를 생성합니다.
이 쿼리는 각 지점의 크기가 0.005도인 지리적 지점별 식당 수를 표로 반환합니다.

GEOGRAPHY 포인트에서 GROUP BY 작업을 실행할 수 없으므로 이 쿼리는 BigQuery ST_ASTEXT [https://cloud.google.com/bigquery/docs/reference/standard-sql/geography_functions?hl=ko#st_astext] 함수를 사용하여 각 포인트를 포인트의 STRING
WKT [https://en.wikipedia.org/wiki/Well-known_text] 표현으로 변환하고 해당 값을 geo_txt 열에 씁니다. 그런 다음 geo_txt을 사용하여 GROUP BY를 실행합니다.

SELECT
geo_txt, -- STRING WKT geometry value.
ST_GEOGFROMTEXT(geo_txt) AS geo, -- Convert STRING to GEOGRAPHY value.
count
FROM (
-- Create STRING WKT representation of each GEOGRAPHY point to
-- GROUP BY the STRING value.
SELECT WITH AGGREGATION_THRESHOLD
ST_ASTEXT(ST_SNAPTOGRID(point, 0.005)) AS geo_txt,
COUNT(*) AS count
FROM
`places_insights___us___sample.places_sample`
WHERE
'restaurant' IN UNNEST(types)
AND wheelchair_accessible_entrance = true
GROUP BY
geo_txt

다음 이미지는 이 쿼리의 출력 예시를 보여줍니다. 여기서 count에는 각 지점의 레스토랑 수가 포함됩니다.

Looker Studio를 사용한 데이터 시각화

다음 이미지는 Looker Studio에서 이 데이터를 히트맵으로 표시한 것입니다. 히트맵은 밀도를 낮음 (녹색)에서 높음 (빨간색)으로 표시합니다.

Looker Studio로 데이터 가져오기

Looker Studio로 데이터를 가져오려면 다음 단계를 따르세요.

시각화할 데이터 쿼리 [https://developers.google.com/maps/documentation/placesinsights/visualize-data?hl=ko#query_data_to_visualize]에서 위의 쿼리를 실행합니다.
BigQuery 결과에서 다음에서 열기 -> Looker Studio를 클릭합니다. 결과가 Looker Studio로 자동 가져오기됩니다.
Looker Studio에서 기본 보고서 페이지를 만들고 결과의 제목, 표, 막대 그래프로 초기화합니다.

페이지의 모든 항목을 선택하고 삭제합니다.
삽입 -> 히트맵을 클릭하여 보고서에 히트맵을 추가합니다.
차트 유형 -> 설정에서 아래와 같이 필드를 구성합니다.

히트맵은 위와 같이 표시됩니다. 원하는 경우 차트 유형 -> 스타일을 선택하여 지도의 모양을 추가로 구성할 수 있습니다.

BigQuery Geo Viz를 사용하여 데이터 시각화

다음 이미지는 BigQuery Geo Viz에 이 데이터가 채워진 지도로 표시된 모습을 보여줍니다. 채워진 지도에는 포인트 셀별 레스토랑 밀도가 표시되며, 포인트가 클수록 밀도가 높습니다.

BigQuery Geo Viz로 데이터 가져오기

BigQuery Geo Viz로 데이터를 가져오려면 다음 단계를 따르세요.

시각화할 데이터 쿼리 [https://developers.google.com/maps/documentation/placesinsights/visualize-data?hl=ko#query_data_to_visualize]에서 위의 쿼리를 실행합니다.
BigQuery 결과에서 다음에서 열기 -> GeoViz를 클릭합니다.
디스플레이가 쿼리 단계로 열립니다.
실행 버튼을 선택하여 쿼리를 실행합니다. 지도에 포인트가 자동으로 표시됩니다.
데이터를 선택하여 데이터를 확인합니다.
데이터 섹션에서 스타일 추가 버튼을 클릭합니다.
fillColor를 선택한 다음 슬라이더를 사용하여 데이터 기반 스타일을 사용 설정합니다.
나머지 필드는 아래와 같이 설정합니다.

스타일 적용을 클릭하여 지도에 스타일을 적용합니다.

의견 보내기