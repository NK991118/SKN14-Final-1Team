Source URL: https://cloud.google.com/bigquery/docs/slot-recommender

BigQuery [https://cloud.google.com/bigquery?hl=ko]
Documentation [https://cloud.google.com/bigquery/docs?hl=ko]
가이드 [https://cloud.google.com/bigquery/docs/introduction?hl=ko]
도움이 되었나요?
의견 보내기
이 페이지의 내용
비용 최적화 권장사항 [https://cloud.google.com/bigquery/docs/slot-recommender?hl=ko#cost-optimized_recommendations]
추천 적용 시 권장사항 [https://cloud.google.com/bigquery/docs/slot-recommender?hl=ko#best_practices_when_applying_recommendations]
필수 권한 [https://cloud.google.com/bigquery/docs/slot-recommender?hl=ko#required_permissions]
성능 향상 권장사항 [https://cloud.google.com/bigquery/docs/slot-recommender?hl=ko#performance-improving_recommendation]
시작하기 전에 [https://cloud.google.com/bigquery/docs/slot-recommender?hl=ko#before_you_begin]
필수 권한 [https://cloud.google.com/bigquery/docs/slot-recommender?hl=ko#required_permissions_2]
가격 책정 [https://cloud.google.com/bigquery/docs/slot-recommender?hl=ko#pricing]
슬롯 권장사항 보기 [https://cloud.google.com/bigquery/docs/slot-recommender?hl=ko#view_slots_recommendations]
버전 슬롯 권장사항 보기
bookmark_border
BigQuery 슬롯 추천자는 버전 [https://cloud.google.com/bigquery/docs/editions-intro?hl=ko] 또는 주문형 워크로드를 위한 권장사항을 만듭니다. 추천자는 쿼리 작업의 이전 슬롯 사용량을 분석하고 유사한 성능을 유지하면서 버전 약정 슬롯 및 자동 확장 [https://cloud.google.com/bigquery/docs/slots-autoscaling-intro?hl=ko] 슬롯에 대한 비용 최적화 설정을 계산합니다. 슬롯 추천자는 성능을 향상시킬 수 있는 최대 예약 크기를 추천할 수도 있습니다.
슬롯 추천자는 예약 결제 및 주문형 결제 모두에 사용할 수 있습니다.
예약 결제의 경우 Enterprise 또는 Enterprise Plus 버전 워크로드에 대한 비용 최적화된 권장사항과 예약에 대한 성능 기반 권장사항을 확인할 수 있습니다.
주문형 결제의 경우 하나 이상의 프로젝트를 Enterprise 버전으로 변환하는 경우 조직 전체, 특정 프로젝트 또는 프로젝트 그룹의 주문형 워크로드에 대한 비용 최적화 권장사항을 확인할 수 있습니다.
추천자 서비스에 대한 자세한 내용은 추천자 개요 [https://cloud.google.com/recommender/docs/overview?hl=ko]를 참조하세요.
비용 최적화 권장사항
슬롯 추천자는 지난 30일 동안의 슬롯 사용량을 기준으로 자동 확장 사용량을 예측합니다. 슬롯 자동 확장에 대한 자세한 내용은 슬롯 자동 확장 소개 [https://cloud.google.com/bigquery/docs/slots-autoscaling-intro?hl=ko]를 참조하세요. 추천자는 여러 약정 옵션을 생성하고 각 옵션의 총 비용을 계산할 수 있습니다. 또한 추천자는 커스텀 가격 책정을 사용하여 총 비용이 가장 낮은 옵션을 추천할 수 있습니다. 권장 약정 및 자동 확장 슬롯은 전체 30일 관찰 기간 동안 P99 슬롯 사용을 지원하기 위한 것입니다.
슬롯 추천자는 사용한 만큼만 지불(약정 없음), 1년 및 3년 약정을 등 다양한 가격 책정 유형에 대한 권장사항을 제공합니다. 커스텀 가격에 따라 각 옵션의 월별 비용이 표시됩니다.
권장사항에는 다음 세부정보가 포함됩니다.
기준 약정 슬롯: 성능에 영향을 주지 않고 최적 비용을 달성하기 위한 약정 슬롯 수입니다. 또한 최적의 약정 보기를 선택하여 위의 사용량 차트에서 최적 약정을 볼 수 있습니다.
기준 약정 월별 비용: 커스텀 버전 약정 가격을 사용하여 계산된 최적 약정 슬롯의 월별 비용입니다. 한 달은 730시간으로 정의됩니다.
자동 확장 슬롯: 한 번에 사용되는 최대 자동 확장 슬롯 수입니다. 자동 확장으로 처리되는 최적 약정 슬롯 이외의 추가 슬롯을 나타냅니다. 이 값에는 약정 또는 기준 슬롯이 포함되지 않습니다.
예상 자동 확장 사용률: 자동 확장 슬롯의 예상 월별 사용율로, 자동 확장 슬롯 시간을 최대 자동 확장 슬롯 수으로 나눈 값입니다.
자동 확장 월별 비용: 예상된 자동 확장 슬롯 수를 사용하는 월별 비용으로, 커스텀 자동 확장 가격을 사용하여 계산됩니다.
월간 총 비용: 약정 월간 비용 및 자동 확장 월간 비용이 포함된 월간 총 비용입니다.
추천 적용 시 권장사항
참고: 제공되는 추천은 이전 데이터를 기반으로 하며 실제 결과는 워크로드의 특정 특성에 따라 달라질 수 있습니다.
버전에 속한 모든 예약의 기준 슬롯 합계가 약정 슬롯보다 적거나 같은지 확인합니다. 이렇게 하면 약정 슬롯을 초과하는 슬롯 사용량을 자동 확장 슬롯에서 처리할 수 있습니다. 만약 기준 슬롯이 약정 슬롯을 초과하는 경우 추가 기준 슬롯에 대해 청구됩니다.
사용 가능한 용량이 이전 최대 사용량과 일치하도록 설정에서 자동 확장 슬롯이 선택됩니다. 이는 성능이 영향을 받지 않도록 하기 위함입니다. 자동 확장 슬롯을 최댓값보다 적은 값으로 조정하여 자동 확장 사용률을 높일 수 있습니다. 그러나 슬롯 사용량을 완전히 처리하지 못하면 쿼리 성능에 영향을 줄 수 있습니다.
워크로드가 급증하고 일시적으로 최대 용량을 초과하는 경우 슬롯 추천자 메커니즘이 권장사항을 과대평가할 수 있습니다. 이러한 경우에는 현재 성능 수준에 만족한다면 현재 설정을 유지하는 것이 좋습니다.
필수 권한
비용 최적화 약정 슬롯 권장사항을 보려면 다음 Identity and Access Management(IAM) 권한이 필요합니다.
recommender.bigqueryCapacityCommitmentsRecommendations.get
recommender.bigqueryCapacityCommitmentsRecommendations.list
다음과 같은 사전 정의된 IAM 역할에는 이러한 권한이 포함되어 있습니다.
BigQuery Resource Admin
BigQuery Slot Recommender Viewer
BigQuery Slot Recommender Admin
버전 워크로드의 권장사항을 보려면 관리 프로젝트에 대한 나열된 권한이 있어야 합니다.
주문형 워크로드의 프로젝트 수준 권장사항을 보려면 프로젝트 수준에서 이전에 나열된 권한이 있어야 합니다.
프로젝트의 그룹의 주문형 워크로드에 대한 비용 최적화 권장사항을 보려면 이전에 나열된 조직 수준의 권한과 bigquery.jobs.listExecutionMetadata 또는 bigquery.jobs.listAll 권한이 있어야 합니다.
주문형 워크로드의 조직 수준 권장사항을 보려면 조직 수준에서 이전에 나열된 권한이 있어야 합니다. resourcemanager.organizations.get 권한도 필요합니다. Organization Viewer IAM 역할에 이 권한이 포함되어 있습니다.
권장사항 설정에서 기준 약정 슬롯 및 월별 총비용과 같은 행이 표시되지만 월별 비용 세부정보의 값이 숨겨집니다. 숨겨진 값을 보려면 다음 권한도 필요합니다.
billing.accounts.getPricing
다음과 같은 사전 정의된 IAM 역할에는 이러한 권한이 포함되어 있습니다.
Billing Account Viewer
Billing Account Administrator
버전 워크로드의 경우 관리자 프로젝트와 연결된 결제 계정에 위에 나열된 권한이 있어야 합니다. 프로젝트 수준의 주문형 워크로드의 경우 프로젝트와 연결된 결제 계정의 권한이 필요합니다. 조직 수준 권장사항의 경우 조직 수준의 권한이 필요합니다.
BigQuery에서 IAM 역할에 대한 상세 설명은 사전 정의된 역할 및 권한 [https://cloud.google.com/bigquery/docs/access-control?hl=ko]을 참조하세요.
성능 향상 권장사항
특정 예약 워크로드를 선택하면 슬롯 추천자가 작업 성능을 향상시킬 수 있는 최대 예약 크기를 제안합니다. 그런 다음 슬롯 에스티메이터는 슬롯 모델링 [https://cloud.google.com/bigquery/docs/slot-estimator?hl=ko#model_slot_performance] 데이터를 분석하고 작업 성능을 5% 이상 높일 수 있는 최대 예약 크기의 최소 증분 값을 찾습니다. 현재 최대 예약 크기가 이전 요구사항을 충족하는 경우 권장사항이 제공되지 않습니다.
참고: 권장사항은 이전 데이터를 기반으로 합니다. 작업 성능은 실제 사용에 따라 달라질 수 있습니다.
추천을 구현하려면 적용을 클릭하여 예약을 업데이트할 수 있는 페이지로 리디렉션합니다.
시작하기 전에
권장사항을 보려면 먼저 Recommender API를 사용 설정 [https://cloud.google.com/recommender/docs/enabling?hl=ko]해야 합니다. Google Cloud 콘솔에서 권장사항을 보려면 Reservations API도 사용 설정 [https://cloud.google.com/bigquery/docs/reservations-commitments?hl=ko#enabling-reservations-api]해야 합니다.
필수 권한
예약 성능 개선 권장사항을 위한 슬롯 추천자를 사용하려면 관리 프로젝트에 대한 다음 IAM 권한이 있어야 합니다.
bigquery.reservations.list
bigquery.reservationAssignments.list
bigquery.capacityCommitments.list
예약에 추천 업데이트를 적용하려면 관리 프로젝트에 대한 다음 IAM 권한도 있어야 합니다.
bigquery.reservations.update
BigQuery에서 IAM 역할에 대한 상세 설명은 사전 정의된 역할 및 권한 [https://cloud.google.com/bigquery/docs/access-control?hl=ko]을 참조하세요.
가격 책정
이 추천자는 슬롯 에스티메이터 [https://cloud.google.com/bigquery/docs/slot-estimator?hl=ko]의 컨텍스트 내에서 표시됩니다. 권장사항은 무료로 사용할 수 있습니다.
슬롯 권장사항 보기
Google Cloud 콘솔을 사용하여 슬롯 권장사항을 보려면 다음 단계를 수행합니다.
Google Cloud 콘솔에서 BigQuery 페이지로 이동합니다.
BigQuery로 이동 [https://console.cloud.google.com/bigquery?hl=ko]
버전 워크로드 권장사항의 경우 관리자 프로젝트를 선택합니다. 주문형 워크로드 권장사항의 경우 사전 정의된 요구사항을 충족하는 조직 내의 프로젝트를 선택합니다.
주문형 워크로드의 경우 조직 수준의 권한이 있으면 측면 패널 옵션에서 개별 프로젝트 또는 전체 조직을 선택하여 특정 범위에 대한 권장사항을 볼 수 있습니다.
탐색 메뉴에서 용량 관리를 클릭합니다.
슬롯 예측 도구 탭을 클릭합니다.
소스 창에서 주문형 워크로드 또는 버전(Enterprise 또는 Enterprise Plus) 워크로드를 선택합니다.
버전 워크로드를 선택하면 자세한 권장사항이 이전 사용량 그래프 아래에 표시됩니다.
주문형 워크로드를 선택하면 조직 관리자가 조직 수준과 프로젝트 수준(하나 이상의 프로젝트) 간에 전환할 수 있습니다.
도움이 되었나요?
의견 보내기