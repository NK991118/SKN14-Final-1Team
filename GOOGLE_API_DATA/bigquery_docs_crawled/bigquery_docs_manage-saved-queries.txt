Source URL: https://cloud.google.com/bigquery/docs/manage-saved-queries

BigQuery [https://cloud.google.com/bigquery?hl=ko]
Documentation [https://cloud.google.com/bigquery/docs?hl=ko]
가이드 [https://cloud.google.com/bigquery/docs/introduction?hl=ko]
도움이 되었나요?
의견 보내기
이 페이지의 내용
시작하기 전에 [https://cloud.google.com/bigquery/docs/manage-saved-queries?hl=ko#before_you_begin]
필요한 역할 [https://cloud.google.com/bigquery/docs/manage-saved-queries?hl=ko#required_roles]
저장된 쿼리 공유 [https://cloud.google.com/bigquery/docs/manage-saved-queries?hl=ko#share-saved-query]
저장된 쿼리에 대한 공개 액세스 권한 부여 [https://cloud.google.com/bigquery/docs/manage-saved-queries?hl=ko#grant-public-access]
저장된 쿼리에 대한 공개 액세스 방지 [https://cloud.google.com/bigquery/docs/manage-saved-queries?hl=ko#prevent-public-access]
저장된 쿼리 관리
bookmark_border
이 문서에서는 저장된 쿼리 및 기존 저장된 쿼리 [https://cloud.google.com/bigquery/docs/saved-queries-introduction?hl=ko]를 관리하는 방법과 Dataplex [https://cloud.google.com/dataplex/docs/introduction?hl=ko]에서 저장된 쿼리 메타데이터를 관리하는 방법을 설명합니다.
저장된 쿼리는 Dataform [https://cloud.google.com/bigquery/docs/query-overview?hl=ko#bigquery-studio]으로 구동되는 BigQuery Studio [https://cloud.google.com/dataform/docs/overview?hl=ko] 코드 애셋입니다.
시작하기 전에
BigQuery Studio 저장된 쿼리를 관리하고 기존 저장된 쿼리를 BigQuery Studio 저장된 쿼리로 마이그레이션하려면 다음 단계를 따르세요.
프로젝트에서 BigQuery Studio를 사용 설정 [https://cloud.google.com/bigquery/docs/enable-assets?hl=ko]합니다.
선택사항: 마이그레이션 [https://cloud.google.com/bigquery/docs/manage-saved-queries?hl=ko#migrate_classic_saved_queries](미리보기 [https://cloud.google.com/products?hl=ko#product-launch-stages]) 중에 마이그레이션된 공개 또는 프로젝트 기존 저장된 쿼리에 IAM 권한을 설정하려면 BigQuery Studio 저장된 쿼리를 만들거나 [https://cloud.google.com/bigquery/docs/work-with-saved-queries?hl=ko#create_saved_queries] 선택하고 저장된 쿼리에 선택한 Identity and Access Management(IAM) 권한을 부여 [https://cloud.google.com/bigquery/docs/manage-saved-queries?hl=ko#share-saved-query]합니다.
공개 또는 프로젝트 기존 저장된 쿼리를 BigQuery Studio 저장된 쿼리로 마이그레이션하는 동안 BigQuery Studio 저장된 쿼리를 선택하여 마이그레이션된 저장된 쿼리에 부여된 권한을 복사합니다.
Dataplex에서 저장된 쿼리 메타데이터를 관리하려면 Google Cloud 프로젝트에서 Dataplex API [https://cloud.google.com/dataplex/docs/enable-api?hl=ko]가 사용 설정되어 있는지 확인합니다.
필요한 역할
저장된 쿼리를 관리하는 데 필요한 권한을 얻으려면 관리자에게 저장된 쿼리를 관리할 프로젝트에 대한 다음 IAM 역할을 부여해 달라고 요청하세요.
Google Cloud 콘솔에서 BigQuery Studio 저장된 쿼리 관리:
BigQuery 작업 사용자 [https://cloud.google.com/iam/docs/understanding-roles?hl=ko#bigquery.jobUser](roles/bigquery.jobUser)
BigQuery 읽기 세션 사용자 [https://cloud.google.com/iam/docs/understanding-roles?hl=ko#bigquery.readSessionUser](roles/bigquery.readSessionUser)
코드 소유자 [https://cloud.google.com/iam/docs/understanding-roles?hl=ko#dataform.codeOwner](roles/dataform.codeOwner)
BigQuery API를 사용하여 BigQuery Studio 저장된 쿼리 관리: 코드 소유자 [https://cloud.google.com/iam/docs/understanding-roles?hl=ko#dataform.codeOwner](roles/dataform.codeOwner)
프로젝트 기존 저장된 쿼리를 BigQuery Studio 저장된 쿼리로 마이그레이션:
BigQuery Studio 관리자 [https://cloud.google.com/iam/docs/understanding-roles?hl=ko#bigquery.studioAdmin](roles/bigquery.studioAdmin)
프로젝트 IAM 관리자 [https://cloud.google.com/iam/docs/understanding-roles?hl=ko#resourcemanager.projectIamAdmin](roles/resourcemanager.projectIamAdmin)
인증된 사용자 [https://cloud.google.com/iam/docs/principals-overview?hl=ko#all-authenticated-users]가 공개 액세스 쿼리 [https://cloud.google.com/bigquery/docs/manage-saved-queries?hl=ko#grant-public-access] 확인: 코드 뷰어 [https://cloud.google.com/iam/docs/understanding-roles?hl=ko#dataform.codeViewer](roles/dataform.codeViewer)
역할 부여에 대한 자세한 내용은 프로젝트, 폴더, 조직에 대한 액세스 관리 [https://cloud.google.com/iam/docs/granting-changing-revoking-access?hl=ko]를 참조하세요.
이러한 사전 정의된 역할에는 저장된 쿼리를 관리하는 데 필요한 권한이 포함되어 있습니다. 필요한 정확한 권한을 보려면 필수 권한 섹션을 펼치세요.
필수 권한
커스텀 역할 [https://cloud.google.com/iam/docs/creating-custom-roles?hl=ko]이나 다른 사전 정의된 역할 [https://cloud.google.com/iam/docs/understanding-roles?hl=ko]을 사용하여 이 권한을 부여받을 수도 있습니다.
BigQuery IAM에 대한 자세한 내용은 IAM으로 액세스 제어 [https://cloud.google.com/bigquery/docs/access-control?hl=ko]를 참조하세요.
Dataplex에서 저장된 쿼리 메타데이터를 관리하려면 필요한 Dataplex 역할 [https://cloud.google.com/dataplex/docs/iam-roles?hl=ko]과 dataform.repository.get [https://cloud.google.com/dataform/docs/access-control?hl=ko] 권한이 있어야 합니다.
저장된 쿼리 공유
저장된 쿼리를 사용자와 공유하려면 먼저 해당 사용자에게 저장된 쿼리에 대한 액세스 권한을 부여하고 적절한 IAM 역할에 사용자를 추가합니다. 그런 다음 저장된 쿼리에 대한 링크를 생성하고 사용자와 해당 링크를 공유합니다.
Google Cloud 콘솔에서 BigQuery 페이지로 이동합니다.
BigQuery로 이동 [https://console.cloud.google.com/bigquery?hl=ko]
탐색기 창에서 프로젝트와 쿼리 폴더를 펼치고 필요한 경우 공유 쿼리 폴더를 펼칩니다. 액세스 권한을 부여할 저장된 쿼리를 찾아 클릭합니다.
person_add공유를 클릭한 다음 권한 관리를 클릭합니다.
권한 관리 창에서 사용자/그룹 추가를 클릭합니다.
새 주 구성원 필드에 주 구성원을 입력합니다.
역할 목록에서 다음 역할 중 하나를 선택합니다.
코드 소유자 [https://cloud.google.com/dataform/docs/access-control?hl=ko#dataform.codeOwner]: 삭제 또는 공유를 포함하여 저장된 쿼리에 대한 모든 작업을 수행할 수 있습니다.
코드 편집자 [https://cloud.google.com/dataform/docs/access-control?hl=ko#dataform.codeEditor]: 쿼리를 수정할 수 있습니다.
코드 뷰어 [https://cloud.google.com/dataform/docs/access-control?hl=ko#dataform.codeViewer]: 쿼리를 볼 수 있습니다.
참고: 주 구성원이 저장된 쿼리를 실행하려면 BigQuery 사용자(roles/bigquery.user) [https://cloud.google.com/bigquery/docs/access-control?hl=ko#bigquery.user] 역할도 있어야 합니다.
선택사항: 역할 및 고급 공유 설정의 전체 목록을 보려면 고급 공유를 클릭합니다.
저장을 클릭합니다.
저장된 쿼리 정보로 돌아가려면 닫기를 클릭합니다.
저장된 쿼리의 링크를 생성하려면 person_add공유를 클릭한 다음 링크 가져오기를 클릭합니다.
링크가 클립보드에 복사됩니다.
저장된 쿼리에 대한 공개 액세스 권한 부여
저장된 쿼리의 코드 뷰어(roles/dataform.codeViewer [https://cloud.google.com/dataform/docs/access-control?hl=ko#dataform.codeViewer]) 역할을 allAuthenticatedUsers 주 구성원에게 부여하여 BigQuery Studio 저장된 쿼리에 대한 공개 액세스 권한을 부여할 수 있습니다.
allAuthenticatedUsers 주 구성원에게 IAM 역할을 할당하면 서비스 계정과 Google 계정으로 인증된 인터넷의 모든 사용자에게 해당 역할이 부여됩니다. 여기에는 개인 Gmail 계정과 같이 Google Workspace 계정이나 Cloud ID 도메인에 연결되지 않은 계정이 포함됩니다. 익명 방문자와 같은 인증되지 않은 사용자는 포함되지 않습니다. 자세한 내용은 모든 인증된 사용자 [https://cloud.google.com/iam/docs/principals-overview?hl=ko#all-authenticated-users]를 참조하세요.
예를 들어 sales 저장된 쿼리의 allAuthenticatedUsers에 코드 뷰어 역할을 부여하면 Google 계정으로 인증된 모든 서비스 계정 및 인터넷 사용자는 sales 저장된 쿼리에 대해 읽기 전용 액세스 권한만 갖습니다.
주의: allAuthenticatedUsers에 관리자, 수정 또는 실행 수준 권한을 부여하면 악의적인 행위자가 데이터에 액세스할 수 있습니다. 필요한 최소한의 권한만 부여합니다.
BigQuery Studio 저장된 쿼리에 대한 공개 액세스 권한을 부여하려면 다음 안내를 따르세요.
Google Cloud 콘솔에서 BigQuery 페이지로 이동합니다.
BigQuery로 이동 [https://console.cloud.google.com/bigquery?hl=ko]
탐색기 창에서 프로젝트와 쿼리 폴더를 펼치고 필요한 경우 공유 쿼리 폴더를 펼칩니다. 공개 액세스 권한을 부여할 저장된 쿼리를 찾습니다.
저장된 쿼리 옆에 있는 more_vert 작업 보기를 클릭한 후 공유 > 권한 관리를 클릭합니다.
권한 관리 창에서 사용자/그룹 추가를 클릭합니다.
새 주 구성원 필드에 allAuthenticatedUsers를 입력합니다.
역할 목록에서 코드 뷰어 [https://cloud.google.com/dataform/docs/access-control?hl=ko#dataform.codeViewer] 역할을 선택합니다.
저장을 클릭합니다.
저장된 쿼리 정보로 돌아가려면 닫기를 클릭합니다.
저장된 쿼리에 대한 공개 액세스 방지
BigQuery Studio 저장된 쿼리에 공개 액세스 권한이 부여되지 않도록 하려면 프로젝트에서 allAuthenticatedUsers 주 구성원을 제한합니다.
프로젝트에서 allAuthenticatedUsers를 제한하려면 iam.allowedPolicyMemberDomains 정책을 설정 [https://cloud.google.com/resource-manager/docs/organization-policy/restricting-domains?hl=ko#setting_the_organization_policy]하고 allowed_values 목록에서 allAuthenticatedUsers를 삭제하면 됩니다.
iam.allowedPolicyMemberDomains 정책에서 allAuthenticatedUsers를 제한하면 프로젝트의 모든 IAM 정책에서 allAuthenticatedUsers 주 구성원을 사용할 수 없으므로 BigQuery Studio 저장된 쿼리를 비롯한 모든 리소스에 대한 공개 액세스 권한이 부여되지 않습니다.
iam.allowedPolicyMemberDomains 정책 및 지침에 관한 자세한 내용은 도메인별 ID 제한 [https://cloud.google.com/resource-manager/docs/organization-policy/restricting-domains?hl=ko]을 참조하세요.
저장된 쿼리 모두 보기
프로젝트의 모든 저장된 쿼리 목록을 보려면 다음 안내를 따르세요.
Google Cloud 콘솔에서 BigQuery 페이지로 이동합니다.
BigQuery로 이동 [https://console.cloud.google.com/bigquery?hl=ko]
탐색기 창에서 쿼리 옆에 있는 more_vert 작업 보기를 클릭한 후 다음 중 하나를 수행합니다.
현재 탭에서 목록을 열려면 모두 표시를 클릭합니다.
목록을 새 탭에서 열려면 모두 표시 > 새 탭을 클릭합니다.
분할 탭에서 목록을 열려면 모두 표시 > 분할 탭을 클릭합니다.
저장된 쿼리 메타데이터 보기
저장된 쿼리 메타데이터를 보려면 다음 안내를 따르세요.
Google Cloud 콘솔에서 BigQuery 페이지로 이동합니다.
BigQuery로 이동 [https://console.cloud.google.com/bigquery?hl=ko]
탐색기 창에서 프로젝트와 쿼리 폴더를 펼치고 필요한 경우 공유 쿼리 폴더를 펼칩니다. 메타데이터를 보려는 저장된 쿼리의 이름을 클릭합니다.
요약 창에서 사용되는 리전 [https://cloud.google.com/bigquery/docs/saved-queries-introduction?hl=ko#supported_regions] 및 마지막으로 수정된 날짜 등 저장된 쿼리에 대한 정보를 확인합니다.
저장된 쿼리 버전 작업
다음 섹션에서 저장된 쿼리의 버전을 보고 비교하고 복원하는 방법을 알아보세요.
저장된 쿼리 버전 보기
저장된 쿼리 버전을 보려면 다음 안내를 따르세요.
Google Cloud 콘솔에서 BigQuery 페이지로 이동합니다.
BigQuery로 이동 [https://console.cloud.google.com/bigquery?hl=ko]
탐색기 창에서 프로젝트와 쿼리 폴더를 펼치고 필요한 경우 공유 쿼리 폴더를 펼칩니다. 활동을 보려는 저장된 쿼리의 이름을 클릭합니다.
활동 탭을 클릭하여 날짜 기준 내림차순으로 정렬된 저장된 쿼리 버전의 목록을 확인합니다.
저장된 쿼리 버전 비교
저장된 쿼리 버전을 비교하려면 다음 안내를 따르세요.
Google Cloud 콘솔에서 BigQuery 페이지로 이동합니다.
BigQuery로 이동 [https://console.cloud.google.com/bigquery?hl=ko]
탐색기 창에서 프로젝트와 쿼리 폴더를 펼치고 필요한 경우 공유 쿼리 폴더를 펼칩니다. 버전 정보를 비교할 저장된 쿼리의 이름을 클릭합니다.
활동 탭에서 저장된 쿼리 버전 옆에 있는 more_vert 작업 보기를 클릭한 후 비교를 클릭합니다. 선택한 저장된 쿼리 버전을 현재 저장된 쿼리 버전과 비교하는 비교 창이 열립니다.
선택사항: 현재 저장된 쿼리 버전에는 저장되지 않은 변경사항도 표시됩니다. 변경사항을 저장하려면 덮어쓰기를 클릭합니다.
(선택사항): 별도의 창 대신 버전을 인라인 비교하려면 비교를 클릭한 다음 인라인을 클릭합니다.
저장된 쿼리 버전 복원
다음 옵션 중 하나를 사용하여 저장된 쿼리 버전을 복원합니다. 비교 창에서 복원하면 복원 여부를 선택하기 전에 저장된 쿼리의 이전 버전을 현재 버전과 비교할 수 있습니다.
--- 탭: 활동 창 [https://cloud.google.com/bigquery/docs/manage-saved-queries?hl=ko#%ED%99%9C%EB%8F%99-%EC%B0%BD] ---
탐색기 창에서 프로젝트와 쿼리 폴더를 펼치고 필요한 경우 공유 쿼리 폴더를 펼칩니다. 이전 버전을 복원할 저장된 쿼리 이름을 클릭합니다.
활동 창을 선택합니다.
복원할 저장된 쿼리 버전 옆에 있는 more_vert작업 보기를 클릭한 후 복원을 클릭합니다.
확인을 클릭하여 작업을 확인합니다.

--- 탭: 비교 창 [https://cloud.google.com/bigquery/docs/manage-saved-queries?hl=ko#%EB%B9%84%EA%B5%90-%EC%B0%BD] ---
탐색기 창에서 프로젝트와 쿼리 폴더를 펼치고 필요한 경우 공유 쿼리 폴더를 펼칩니다. 이전 버전을 복원할 저장된 쿼리 이름을 클릭합니다.
활동 창을 선택합니다.
저장된 쿼리 버전 옆에 있는 more_vert
작업 보기를 클릭한 후 비교를 클릭합니다. 선택한 저장된 쿼리 버전을 가장 최근에 저장된 쿼리 버전과 비교하는 비교 창이 열립니다.
비교한 후 이전에 저장된 쿼리 버전을 복원하려면 복원을 클릭합니다.
확인을 클릭하여 작업을 확인합니다.
저장된 쿼리 다운로드
저장된 쿼리를 다운로드하려면 다음 안내를 따르세요.
Google Cloud 콘솔에서 BigQuery 페이지로 이동합니다.
BigQuery로 이동 [https://console.cloud.google.com/bigquery?hl=ko]
탐색기 창에서 프로젝트와 쿼리 폴더를 펼치고 필요한 경우 공유 쿼리 폴더를 펼칩니다. 저장된 쿼리의 이름을 클릭하여 엽니다.
다운로드를 클릭합니다.
저장된 쿼리 삭제
저장된 쿼리를 삭제하려면 다음 안내를 따르세요.
Google Cloud 콘솔에서 BigQuery 페이지로 이동합니다.
BigQuery로 이동 [https://console.cloud.google.com/bigquery?hl=ko]
탐색기 창에서 프로젝트와 쿼리 폴더를 펼치고 필요한 경우 공유 쿼리 폴더를 펼칩니다. 삭제하려는 저장된 쿼리를 찾습니다.
저장된 쿼리 옆에 있는 more_vert 작업 보기를 클릭한 후 삭제를 클릭합니다.
삭제를 확인하려면 대화상자에 delete를 입력합니다.
삭제를 클릭합니다.
기존 저장된 쿼리
지원 중단: BigQuery Studio 프리뷰 [https://cloud.google.com/bigquery/docs/enable-assets?hl=ko]에서 제공하는 저장된 쿼리로 향후 기존 저장된 쿼리를 완전히 대체할 예정입니다. 지원 중단 타임라인을 검토하는 중입니다. 자세한 내용은 기존 저장된 쿼리의 지원 중단 [https://cloud.google.com/bigquery/docs/saved-queries-introduction?hl=ko#classic-saved-queries-deprecation]을 참조하세요. 저장된 쿼리로 마이그레이션하는 방법은 기존 저장된 쿼리 마이그레이션 [https://cloud.google.com/bigquery/docs/manage-saved-queries?hl=ko#migrate_classic_saved_queries]을 참조하세요.
다음 섹션에서 기존 저장된 쿼리 [https://cloud.google.com/bigquery/docs/saved-queries-introduction?hl=ko#classic_saved_queries]를 관리하는 방법을 알아보세요.
참고: BigQuery Studio를 사용 설정 [https://cloud.google.com/bigquery/docs/enable-assets?hl=ko]하지 않은 경우 기존 저장된 쿼리가 (기존)쿼리 폴더 대신 탐색기 창의 저장된 쿼리(NUMBER) 폴더에 표시됩니다.
기존 저장된 쿼리 공유
프로젝트 또는 공개 상태인 기존 저장된 쿼리를 공유할 수 있습니다. 프로젝트 공개 상태를 사용하면 필요한 권한 [https://cloud.google.com/bigquery/docs/work-with-saved-queries?hl=ko#required_permissions_for_classic_saved_queries]을 가진 주 구성원이 쿼리를 보거나, 업데이트하거나, 삭제할 수 있습니다. 공개 상태가 공개인 경우 쿼리 링크가 있는 모든 사용자가 쿼리를 볼 수 있지만 업데이트하거나 삭제하지는 못합니다.
기존 저장된 쿼리에 대한 링크를 생성하고 공유하여 기존 저장된 쿼리를 다른 사용자와 공유합니다.
기존 공유 쿼리를 실행하려면 사용자에게 쿼리에서 액세스하는 데이터에 대한 액세스 권한이 있어야 합니다. 자세한 내용은 데이터 세트에 대한 액세스 권한 부여 [https://cloud.google.com/bigquery/docs/control-access-to-resources-iam?hl=ko#grant_access_to_a_dataset]를 참조하세요.
기존 저장된 쿼리를 공유하려면 쿼리에 용도를 설명하는 주석을 포함하는 것이 좋습니다.
탐색기 창에서 프로젝트와 (기존) 쿼리 폴더를 펼친 후 공유할 기존 저장된 쿼리를 찾습니다.
쿼리 옆에 있는 more_vert 작업 보기를 클릭한 후 링크 가져오기를 클릭합니다.
쿼리 액세스 권한을 부여하려는 사용자와 링크를 공유합니다.
기존 쿼리를 저장된 쿼리로 저장
Google Cloud 콘솔에서 BigQuery 페이지로 이동합니다.
BigQuery로 이동 [https://console.cloud.google.com/bigquery?hl=ko]
탐색기 창에서 프로젝트와 (기존) 쿼리 폴더를 펼치고 필요한 경우 프로젝트 쿼리 폴더를 펼칩니다.
기존 저장된 쿼리의 이름을 클릭하여 엽니다.
쿼리 저장(기존) > 쿼리를 다른 이름으로 저장...을 클릭합니다.
쿼리 저장 대화상자에 이름을 입력하고 쿼리의 위치를 선택합니다.
저장을 클릭합니다.
기존 저장된 쿼리 마이그레이션
프리뷰: 이 기능은 기존 저장된 쿼리가 2,500개 미만인 프로젝트에 대한 프리뷰 버전입니다.

이 제품 또는 기능에는 서비스별 약관 [https://cloud.google.com/terms/service-terms?hl=ko#1]의 일반 서비스 약관 조항에 있는 'GA 이전 제공 서비스 약관'이 적용됩니다. GA 이전 제품 및 기능은 '현재 상태 그대로' 제공되며 지원이 제한될 수 있습니다. 자세한 내용은 출시 단계 설명 [https://cloud.google.com/products?hl=ko#product-launch-stages]을 참조하세요.
이 기능에 대한 지원을 요청하거나 의견을 보내려면 bigquery-studio-support-alias@google.com [mailto:bigquery-studio-support-alias@google.com]으로 이메일을 보내세요.
기존 저장된 쿼리를 일괄 마이그레이션하려면 필요한 역할 [https://cloud.google.com/bigquery/docs/manage-saved-queries?hl=ko#required_roles]을 부여받아야 합니다. 이러한 역할로 부여되는 권한에 따라 마이그레이션할 수 있는 기존 저장된 쿼리의 유형이 결정됩니다.
다음과 같은 기존 저장된 쿼리를 일괄 마이그레이션할 수 있습니다.
기존 저장된 개인 쿼리
쿼리를 만드는 사용자만 기존 저장된 개인 쿼리를 볼 수 있습니다. person 아이콘으로 식별됩니다. 기존 저장된 개인 쿼리는 소유자만 마이그레이션할 수 있습니다.
기존 저장된 공개 쿼리
쿼리 링크가 있는 모든 사용자가 저장된 공개 기본 쿼리를 볼 수 있습니다. share 아이콘으로 식별됩니다. 기존 저장된 공개 쿼리는 소유자만 마이그레이션할 수 있습니다.
기존 저장된 공개 쿼리의 IAM 권한은 BigQuery Studio 저장된 쿼리의 권한에 매핑되지 않습니다. 즉, 기존 저장된 공개 쿼리에서 마이그레이션된 BigQuery Studio 저장된 쿼리는 기본적으로 공개적으로 제공되지 않습니다. 마이그레이션하는 동안 또는 마이그레이션 후에 마이그레이션된 BigQuery Studio 저장된 쿼리에 대한 IAM 권한을 설정해야 합니다.
마이그레이션 중에 마이그레이션된 BigQuery Studio 저장된 쿼리에 대한 IAM 권한을 설정하려면 마이그레이션된 저장된 쿼리에 적용할 권한이 있는 기존 BigQuery Studio 저장된 쿼리를 선택하면 됩니다. BigQuery는 선택한 BigQuery Studio 저장된 쿼리에 부여된 권한을 복사하여 마이그레이션된 저장된 쿼리에 적용합니다. 마이그레이션된 저장된 쿼리를 공유할 사용자 또는 그룹을 수동으로 추가할 수도 있습니다.
마이그레이션 중에 IAM 권한을 설정하지 않으면 마이그레이션된 BigQuery Studio 저장된 쿼리에 본인만 액세스할 수 있습니다.
기존 저장된 프로젝트 쿼리
프로젝트 수준의 저장된 쿼리는 필요한 권한 [https://cloud.google.com/bigquery/docs/work-with-saved-queries?hl=ko#required_permissions_for_classic_saved_queries]이 있는 주 구성원에게 표시됩니다. people 아이콘으로 식별됩니다. 프로젝트의 모든 기존 저장된 프로젝트 쿼리를 일괄 마이그레이션할 수 있습니다.
기존 저장된 프로젝트 쿼리의 IAM 권한은 BigQuery Studio 저장된 쿼리의 권한에 직접 매핑되지 않습니다. 마이그레이션하는 동안 또는 마이그레이션 후에 마이그레이션된 BigQuery Studio 저장된 쿼리에 대한 IAM 권한을 설정해야 합니다.
마이그레이션 중에 마이그레이션된 BigQuery Studio 저장된 쿼리에 대한 IAM 권한을 설정하려면 마이그레이션된 저장된 쿼리에 적용할 권한이 있는 기존 BigQuery Studio 저장된 쿼리를 선택하면 됩니다. BigQuery는 선택한 BigQuery Studio 저장된 쿼리에 부여된 권한을 복사하여 마이그레이션된 저장된 쿼리에 적용합니다. 마이그레이션된 저장된 쿼리를 공유할 사용자 또는 그룹을 수동으로 추가할 수도 있습니다.
마이그레이션 중에 IAM 권한을 설정하지 않으면 마이그레이션된 BigQuery Studio 저장된 쿼리에 본인만 액세스할 수 있습니다.
기존 저장된 쿼리를 일괄 마이그레이션하는 동안 BigQuery는 다음을 수행합니다.
마이그레이션하는 기존 저장된 쿼리를 모두 BigQuery Studio 저장된 쿼리로 저장하고 선택한 리전에 저장합니다.
마이그레이션하는 기존 저장된 쿼리를 모두 읽기 전용 기존 저장된 쿼리로 변환합니다.
마이그레이션 후에는 기존 저장된 개인, 공개, 프로젝트 쿼리에 BigQuery Studio 저장된 쿼리와 읽기 전용 기존 저장된 쿼리로 모두 액세스할 수 있습니다.
마이그레이션 위험
일괄 마이그레이션 후에는 마이그레이션된 기존 저장된 쿼리를 수정할 수 없습니다. 마이그레이션된 기존 저장된 개인, 공개, 프로젝트 쿼리는 읽기 전용으로 전환됩니다.
BigQuery는 Dataform API를 사용하여 마이그레이션된 BigQuery Studio 저장된 쿼리를 Google Cloud 프로젝트에 추가합니다. 이러한 변경사항을 되돌리려면 수동으로 삭제해야 합니다.
경고: 마이그레이션을 시작한 후에는 중지하거나 취소할 수 없습니다.
기존 저장된 쿼리 일괄 마이그레이션
프로젝트의 기존 저장된 쿼리를 BigQuery Studio 저장된 쿼리로 일괄 마이그레이션하려면 다음 안내를 따르세요.
Google Cloud 콘솔에서 BigQuery 페이지로 이동합니다.
BigQuery로 이동 [https://console.cloud.google.com/bigquery?hl=ko]
탐색기 창에서 프로젝트를 펼치고(기존)쿼리 옆에 있는 more_vert 작업 보기를 클릭한 다음 기존 저장된 쿼리 마이그레이션을 클릭합니다.
기존 저장된 쿼리 마이그레이션 창의 마이그레이션 준비 확인 섹션에서 다음을 클릭하여 필요한 역할 [https://cloud.google.com/bigquery/docs/manage-saved-queries?hl=ko#required_roles]이 있는지 확인합니다.
IAM 권한에 따라 마이그레이션할 수 있는 기존 저장된 쿼리의 유형과 기존 저장된 쿼리 마이그레이션 창의 어떤 섹션이 표시되는지가 결정됩니다.
리전 섹션의 리전 드롭다운에서 BigQuery가 마이그레이션된 저장된 쿼리를 저장할 리전을 선택합니다.
BigQuery Studio 코드 애셋의 기본 리전을 선택하는 것이 좋습니다. 자세한 내용은 코드 애셋의 기본 리전 설정 [https://cloud.google.com/bigquery/docs/enable-assets?hl=ko#set_the_default_region_for_code_assets]을 참조하세요.
저장된 모든 기존 개인 쿼리를 마이그레이션하려면 개인 쿼리 마이그레이션 섹션에서 모든 개인 쿼리 마이그레이션 체크박스를 선택한 다음 다음을 클릭합니다.
프로젝트의 모든 기존 저장된 공개 쿼리를 마이그레이션하려면 공개 쿼리 마이그레이션 섹션에서 다음 단계를 따르세요.
모든 공개 쿼리 마이그레이션 체크박스를 선택합니다.
SQL 드롭다운에서 마이그레이션된 저장된 쿼리에 적용할 IAM 정책이 있는 BigQuery Studio 저장된 쿼리를 선택합니다.
선택사항: 마이그레이션된 저장된 쿼리를 공유할 사용자 또는 그룹을 추가하려면 사용자/그룹 추가를 클릭합니다.
마이그레이션된 저장된 쿼리를 공개적으로 공유하려면 allAuthenticatedUsers를 주 구성원으로 설정하고 코드 뷰어 역할을 부여합니다. 자세한 내용은 공개 액세스 권한 부여 [https://cloud.google.com/bigquery/docs/manage-saved-queries?hl=ko#grant-public-access]를 참조하세요.
다음을 클릭합니다.
프로젝트 수준의 기존 저장된 쿼리를 마이그레이션하려면 프로젝트 쿼리 마이그레이션 섹션에서 다음 안내를 따르세요.
모든 프로젝트 쿼리 마이그레이션 체크박스를 선택합니다.
SQL 드롭다운에서 마이그레이션된 저장된 쿼리에 적용할 IAM 정책이 있는 BigQuery Studio 저장된 쿼리를 선택합니다.
선택사항: 마이그레이션된 저장된 쿼리를 공유할 사용자 또는 그룹을 추가하려면 사용자/그룹 추가를 클릭합니다.
다음을 클릭합니다.
마이그레이션 위험 [https://cloud.google.com/bigquery/docs/manage-saved-queries?hl=ko#migration-risks]을 이해하고 기존 저장된 쿼리를 일괄 마이그레이션할 것임을 확인하려면 확인 섹션의 확인 필드에 confirm을 입력한 다음 다음을 클릭합니다.
경고: 마이그레이션을 시작한 후에는 중지하거나 취소할 수 없습니다.
제출을 클릭합니다.
마이그레이션하는 쿼리의 수에 따라 마이그레이션하는 데 15분이 넘게 걸릴 수 있습니다.
기존 저장된 쿼리 삭제
Google Cloud 콘솔에서 BigQuery 페이지로 이동합니다.
BigQuery로 이동 [https://console.cloud.google.com/bigquery?hl=ko]
탐색기 창에서 프로젝트와 (기존) 쿼리 폴더를 펼치고 필요한 경우 프로젝트 쿼리 폴더를 펼칩니다.
삭제하려는 기존 저장된 쿼리를 찾습니다.
쿼리 옆에 있는 more_vert 작업 보기를 클릭한 후 삭제를 클릭합니다.
삭제를 확인하려면 대화상자에 delete를 입력합니다.
삭제를 클릭합니다.
Dataplex에서 메타데이터 관리
Dataplex를 사용하면 저장된 쿼리의 메타데이터를 저장하고 관리할 수 있습니다. 저장된 쿼리는 추가 구성 없이 기본적으로 Dataplex에서 사용할 수 있습니다.
Dataplex를 사용하여 모든 저장된 쿼리 위치 [https://cloud.google.com/bigquery/docs/locations?hl=ko]에서 저장된 쿼리를 관리할 수 있습니다. Dataplex에서 저장된 쿼리를 관리하는 경우 Dataplex 할당량 및 한도 [https://cloud.google.com/dataplex/docs/quotas?hl=ko]와 Dataplex 가격 책정 [https://cloud.google.com/dataplex/pricing?hl=ko]이 적용됩니다.
Dataplex는 저장된 쿼리에서 다음 메타데이터를 자동으로 가져옵니다.
데이터 애셋 이름
데이터 애셋 상위 요소
데이터 애셋 위치
데이터 애셋 유형
해당 Google Cloud 프로젝트
Dataplex는 저장된 쿼리를 다음과 같은 항목 값을 사용해 항목 [https://cloud.google.com/dataplex/docs/ingest-custom-sources?hl=ko#entries]으로 로깅합니다.
시스템 항목 그룹
저장된 쿼리의 시스템 항목 그룹 [https://cloud.google.com/dataplex/docs/ingest-custom-sources?hl=ko#entry-groups]은 @dataform입니다. Dataplex에서 저장된 쿼리 항목의 세부정보를 보려면 dataform 시스템 항목 그룹을 확인해야 합니다. 항목 그룹의 모든 항목 목록을 보는 방법에 관한 안내는 Dataplex 문서의 항목 그룹 세부정보 보기 [https://cloud.google.com/dataplex/docs/ingest-custom-sources?hl=ko#entry-group-details]를 참조하세요.
시스템 항목 유형
저장된 쿼리의 시스템 항목 유형 [https://cloud.google.com/dataplex/docs/ingest-custom-sources?hl=ko#entry-types]은 dataform-code-asset입니다. 저장된 쿼리의 세부정보를 보려면 dataform-code-asset 시스템 항목 유형을 확인하고, 관점 기반 필터로 결과를 필터링하고, dataform-code-asset 관점 내의 type 필드를 SQL_QUERY로 설정 [https://cloud.google.com/dataplex/docs/search-syntax?hl=ko#aspect-search]해야 합니다. 그런 다음 선택한 저장된 쿼리의 항목을 선택합니다. 선택한 항목 유형의 세부정보를 보는 방법에 관한 안내는 Dataplex 문서의 항목 유형의 세부정보 보기 [https://cloud.google.com/dataplex/docs/ingest-custom-sources?hl=ko#entry-type-details]를 참조하세요. 선택한 항목의 세부정보를 보는 방법에 관한 안내는 Dataplex 문서의 항목 세부정보 보기 [https://cloud.google.com/dataplex/docs/search-assets?hl=ko#view-entry-details]를 참조하세요.
시스템 관점 유형
저장된 쿼리의 시스템 관점 유형 [https://cloud.google.com/dataplex/docs/enrich-entries-metadata?hl=ko#aspect-types]은 dataform-code-asset입니다. 관점 [https://cloud.google.com/dataplex/docs/enrich-entries-metadata?hl=ko#aspects]으로 저장된 데이터 쿼리 항목에 주석을 추가하여 Dataplex의 저장된 쿼리에 추가 컨텍스트를 제공하려면 dataform-code-asset 관점 유형을 확인하고 관점 기반 필터로 결과를 필터링한 다음 dataform-code-asset 관점 내의 type 필드를 SQL_QUERY로 설정 [https://cloud.google.com/dataplex/docs/search-syntax?hl=ko#aspect-search]합니다. 관점으로 항목에 주석을 추가하는 방법에 관한 안내는 Dataplex 문서의 관점 관리 및 메타데이터 보강 [https://cloud.google.com/dataplex/docs/enrich-entries-metadata?hl=ko]을 참조하세요.
유형
저장된 쿼리의 유형은 SQL_QUERY입니다. 이 유형을 사용하면 관점 기반 필터 [https://cloud.google.com/dataplex/docs/search-syntax?hl=ko#aspect-search]에서 aspect:dataplex-types.global.dataform-code-asset.type=SQL_QUERY 쿼리를 사용하여 dataform-code-asset 시스템 항목 유형 및 dataform-code-asset 관점 유형의 저장된 쿼리를 필터링할 수 있습니다.
Dataplex에서 애셋을 검색하는 방법에 관한 안내는 Dataplex 문서의 Dataplex에서 데이터 애셋 검색 [https://cloud.google.com/dataplex/docs/search-assets?hl=ko]을 참조하세요.
다음 단계
BigQuery Studio 저장된 쿼리에 대해 자세히 알아보려면 저장된 쿼리 소개 [https://cloud.google.com/bigquery/docs/saved-queries-introduction?hl=ko]를 참조하세요.
저장된 쿼리를 만드는 방법은 저장된 쿼리 만들기 [https://cloud.google.com/bigquery/docs/work-with-saved-queries?hl=ko]를 참조하세요.
도움이 되었나요?
의견 보내기