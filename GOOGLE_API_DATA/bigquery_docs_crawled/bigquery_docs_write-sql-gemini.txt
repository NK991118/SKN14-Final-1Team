Source URL: https://cloud.google.com/bigquery/docs/write-sql-gemini

BigQuery [https://cloud.google.com/bigquery?hl=ko]
Documentation [https://cloud.google.com/bigquery/docs?hl=ko]
가이드 [https://cloud.google.com/bigquery/docs/introduction?hl=ko]
도움이 되었나요?
의견 보내기
이 페이지의 내용
시작하기 전에 [https://cloud.google.com/bigquery/docs/write-sql-gemini?hl=ko#before_you_begin]
필요한 역할 [https://cloud.google.com/bigquery/docs/write-sql-gemini?hl=ko#required_permissions]
SQL 쿼리 생성 [https://cloud.google.com/bigquery/docs/write-sql-gemini?hl=ko#generate_a_sql_query]
SQL 생성 도구 사용 [https://cloud.google.com/bigquery/docs/write-sql-gemini?hl=ko#use_the_sql_generation_tool]
주석에서 SQL 생성 [https://cloud.google.com/bigquery/docs/write-sql-gemini?hl=ko#generate_sql_from_a_comment]
Gemini의 도움을 받아 쿼리 작성하기
bookmark_border
이 문서에서는 BigQuery의 Gemini [https://cloud.google.com/gemini/docs/bigquery/overview?hl=ko]에서 AI 기반 지원을 사용하여 SQL 쿼리와 Python 코드로 데이터를 쿼리하는 방법을 설명합니다. BigQuery의 Gemini는 쿼리와 코드를 생성하고 설명하며, 입력하는 동안 쿼리와 코드를 완성하고, 코드 오류를 수정할 수 있습니다.
Google Cloud 콘솔에서 이 태스크에 대한 단계별 안내를 직접 수행하려면 둘러보기를 클릭합니다.
둘러보기 [https://console.cloud.google.com/bigquery?walkthrough_id=bigquery--write-sql-gemini&%3Bstart_index=1&hl=ko]
Google Cloud 를 위한 Gemini는 사용자의 명시적 권한 부여 없이 사용자 프롬프트나 해당 응답을 모델을 학습시키는 데이터로 사용하지 않습니다. Google에서 사용자 데이터를 사용하는 방법은 Google Cloud 를 위한 Gemini에서 사용자 데이터를 사용하는 방법 [https://cloud.google.com/gemini/docs/discover/data-governance?hl=ko]을 참조하세요.
참고: BigQuery의 Gemini 기능(프리뷰 [https://cloud.google.com/products?hl=ko#product-launch-stages])에 대한 데이터 공유를 선택하려면 추천 개선에 참여 [https://cloud.google.com/bigquery/docs/write-sql-gemini?hl=ko#help_improve_suggestions_2]를 참조하세요.
BigQuery에서는 Gemini에 영어 프롬프트만 지원됩니다.
이 문서는 SQL 쿼리와 BigQuery의 Colab Enterprise 노트북 [https://cloud.google.com/bigquery/docs/notebooks-introduction?hl=ko]을 사용하는 데이터 분석가, 데이터 과학자, 데이터 개발자를 대상으로 합니다. 여기서는 BigQuery Studio 환경에서 데이터를 쿼리하는 방법이나 Python 노트북을 사용하여 BigQuery 데이터를 분석하는 방법을 알고 있다고 가정합니다.
시작하기 전에
Google Cloud 프로젝트에 BigQuery의 Gemini가 설정되어 있는지 [https://cloud.google.com/gemini/docs/bigquery/set-up-gemini?hl=ko] 확인합니다. 일반적으로 관리자가 이 단계를 수행합니다. 이 섹션의 나머지 단계를 완료할 때까지 BigQuery의 Gemini 기능이 사용 중지되거나 사용 불가능할 수 있습니다.
Gemini Cloud Assist [https://cloud.google.com/gemini/docs/cloud-assist/overview?hl=ko]를 사용하여 Gemini Cloud Assist 창에서 코드를 작성하려면 Gemini Cloud Assist 설정 [https://cloud.google.com/gemini/docs/cloud-assist/set-up-gemini?hl=ko]의 단계도 수행해야 합니다.
Gemini를 사용하여 BigQuery의 Colab Enterprise 노트북에서 Python 코드를 설명하고 수정하려면 프로젝트에 Colab Enterprise의 Gemini 설정 [https://cloud.google.com/gemini/docs/colab/set-up-gemini?hl=ko]의 단계도 수행해야 합니다.
In the Google Cloud console, on the project selector page, select or create a Google Cloud project.
Note: If you don't plan to keep the resources that you create in this procedure, create a project instead of selecting an existing project. After you finish these steps, you can delete the project, removing all resources associated with the project.
Go to project selector [https://console.cloud.google.com/projectselector2/home/dashboard?hl=ko]
Google Cloud 콘솔에서 BigQuery Studio 페이지로 이동합니다.
BigQuery Studio로 이동 [https://console.cloud.google.com/bigquery?hl=ko]
BigQuery 툴바에서 pen_sparkarrow_drop_downGemini를 클릭합니다.
기능 목록에서 다음 기능이 선택되어 있는지 확인합니다.
SQL 쿼리의 Gemini 목록:
자동 완성(프리뷰). 쿼리 편집기에 입력하는 동안 Gemini는 현재 쿼리 컨텍스트와 관련된 논리적인 다음 단계를 추천하거나 쿼리를 반복하는 데 도움을 줄 수 있습니다.
자동 생성. BigQuery 쿼리 편집기에서 자연어 주석을 사용하여 BigQuery의 Gemini에 프롬프트를 입력해 SQL 쿼리를 생성할 수 있습니다.
SQL 생성 도구. 도구에 자연어 텍스트를 입력하여 SQL 쿼리를 생성할 수 있으며, 쿼리 결과를 미세 조정하고, 테이블 소스를 선택하고, 결과를 비교하는 옵션이 있습니다.
설명. BigQuery의 Gemini에 프롬프트를 입력하여 SQL 쿼리를 자연어로 설명할 수 있습니다.
Python 노트북의 Gemini 목록:
코드 완성(프리뷰). Gemini는 노트북의 콘텐츠를 기반으로 상황에 맞는 적절한 추천을 제공합니다.
코드 생성. 자연어 문이나 Python 코드 생성에 대한 질문으로 Gemini에 프롬프트를 입력할 수 있습니다.
이 문서의 태스크를 완료하려면 필요한 Identity and Access Management(IAM) 권한 [https://cloud.google.com/bigquery/docs/write-sql-gemini?hl=ko#required_permissions]이 있는지 확인합니다.
필요한 역할
Gemini 어시스턴스를 사용하여 쿼리를 작성하는 데 필요한 권한을 얻으려면 관리자에게 프로젝트에 대한 Google Cloud를 위한 Gemini 사용자 [https://cloud.google.com/iam/docs/roles-permissions/cloudaicompanion?hl=ko#cloudaicompanion.user](roles/cloudaicompanion.user) IAM 역할을 부여해 달라고 요청하세요. 역할 부여에 대한 자세한 내용은 프로젝트, 폴더, 조직에 대한 액세스 관리 [https://cloud.google.com/iam/docs/granting-changing-revoking-access?hl=ko]를 참조하세요.
이 사전 정의된 역할에는 Gemini 지원을 사용하여 쿼리를 작성하는 데 필요한 권한이 포함되어 있습니다. 필요한 정확한 권한을 보려면 필수 권한 섹션을 펼치세요.
필수 권한
커스텀 역할 [https://cloud.google.com/iam/docs/creating-custom-roles?hl=ko]이나 다른 사전 정의된 역할 [https://cloud.google.com/iam/docs/roles-overview?hl=ko#predefined]을 사용하여 이 권한을 부여받을 수도 있습니다.
BigQuery에서 IAM 역할 및 권한에 대한 자세한 내용은 IAM 소개 [https://cloud.google.com/bigquery/docs/access-control?hl=ko]를 참조하세요.
SQL 쿼리 생성
Google Cloud를 위한 Gemini는 아직 초기 단계의 기술로, 그럴듯해 보이지만 실제로는 잘못된 출력을 생성할 수 있습니다. Gemini for Google Cloud 제품의 모든 출력을 사용 전에 미리 검사하는 것이 좋습니다. 자세한 내용은 Google Cloud 를 위한 Gemini 및 책임감 있는 AI [https://cloud.google.com/gemini/docs/discover/responsible-ai?hl=ko]를 참고하세요.
데이터 스키마를 기반으로 SQL 쿼리를 생성하려면 BigQuery의 Gemini에 자연어 문이나 질문(프롬프트라고도 함)을 제공하면 됩니다. 코드 없이 시작하거나 데이터 스키마에 대한 지식이 많지 않거나 GoogleSQL 문법에 대한 기본 지식만 있는 상태에서 시작하더라도 BigQuery의 Gemini는 데이터를 탐색하는 데 도움이 되는 SQL을 생성할 수 있습니다.
SQL 생성 도구 사용
SQL 생성 도구를 사용하면 자연어를 사용하여 최근에 보거나 쿼리한 테이블에 관한 SQL 쿼리를 생성할 수 있습니다. 이 도구를 사용하여 기존 쿼리를 수정하고 SQL을 생성할 테이블을 수동으로 지정할 수도 있습니다.
SQL 생성 도구를 사용하려면 다음 단계를 수행합니다.
Google Cloud 콘솔에서 BigQuery Studio 페이지로 이동합니다.
BigQuery Studio로 이동 [https://console.cloud.google.com/bigquery?hl=ko]
쿼리 편집기 옆에 있는 pen_spark SQL 생성 도구를 클릭합니다.
Gemini로 SQL 생성하기 대화상자에 최근에 보거나 쿼리한 테이블에 대한 자연어 프롬프트를 입력합니다. 예를 들어 최근에 bigquery-public-data.austin_bikeshare.bikeshare_trips 테이블 [https://console.cloud.google.com/bigquery?ws=%211m5%211m4%214m3%211sbigquery-public-data%212saustin_bikeshare%213sbikeshare_trips&hl=ko]을 본 경우 다음과 같이 입력할 수 있습니다.
 Show me the duration and subscriber type for the ten longest trips.
생성을 클릭합니다.
생성되는 SQL 쿼리는 다음과 비슷합니다.
SELECT
    subscriber_type,
    duration_sec
  FROM
      `bigquery-public-data.san_francisco_bikeshare.bikeshare_trips`
ORDER BY
    duration_sec DESC
LIMIT 10;
참고: BigQuery의 Gemini는 개발자가 같은 프롬프트를 입력할 때마다 다른 문법을 제안할 수 있습니다.
생성된 SQL 쿼리를 검토하고 다음 작업 중 하나를 수행합니다.
생성된 SQL 쿼리를 수락하려면 삽입을 클릭하여 문을 쿼리 편집기에 삽입합니다. 그런 다음 실행을 클릭하여 추천 SQL 쿼리를 실행할 수 있습니다.
프롬프트를 수정하려면 수정을 클릭한 후 초기 프롬프트를 수정하거나 바꿉니다. 프롬프트를 수정한 후 업데이트를 클릭하여 새 쿼리를 생성합니다.
추천 SQL 쿼리를 생성하는 데 컨텍스트로 사용된 테이블 소스를 업데이트하려면 테이블 소스 수정을 클릭하고 적절한 체크박스를 선택한 후 적용을 클릭합니다.
생성된 쿼리의 자연어 요약을 보려면 쿼리 요약을 클릭합니다.
추천 SQL 쿼리를 미세 조정하려면 미세 조정 필드에 미세 조정사항을 입력한 후 send 미세 조정을 클릭합니다. 예를 들어 쿼리 결과 수를 제한하려면 limit to 1000을 입력합니다. 쿼리 변경사항을 비교하려면 차이점 표시 체크박스를 선택합니다.
추천 쿼리를 닫으려면 SQL 생성 도구를 닫습니다.
SQL 생성 도구 사용 중지
SQL 생성 도구를 사용 중지하는 방법을 알아보려면 Gemini 쿼리 어시스턴트 기능 사용 중지 [https://cloud.google.com/bigquery/docs/write-sql-gemini?hl=ko#disable-gemini-features]를 참조하세요.
주석에서 SQL 생성
주석에 원하는 쿼리를 설명하여 쿼리 편집기에서 SQL을 생성할 수 있습니다.
Google Cloud 콘솔에서 BigQuery Studio 페이지로 이동합니다.
BigQuery Studio로 이동 [https://console.cloud.google.com/bigquery?hl=ko]
쿼리 편집기에서 add_boxSQL 쿼리를 클릭합니다.
쿼리 편집기에서 최근에 보거나 쿼리한 테이블에 관한 SQL 주석을 작성합니다. 예를 들어 최근에 bigquery-public-data.austin_bikeshare.bikeshare_trips 테이블 [https://console.cloud.google.com/bigquery?ws=%211m5%211m4%214m3%211sbigquery-public-data%212saustin_bikeshare%213sbikeshare_trips&hl=ko]을 본 경우 다음과 같은 주석을 작성할 수 있습니다.
# Show me the duration and subscriber type for the ten longest trips.
Enter 키(macOS에서는 Return 키)를 누릅니다.
추천 SQL 쿼리는 다음과 유사합니다.
# Show me the duration and subscriber type for the ten longest trips

SELECT
  duration_sec,
  subscriber_type
  AVG(duration_minutes) AS average_trip_length
FROM
  `bigquery-public-data.austin_bikeshare.bikeshare_trips`
ORDER BY
  duration_sec
LIMIT 10;
추천된 내용을 사용하려면 Tab 키를 누르세요.
Gemini Cloud Assist로 SQL 생성
프리뷰
이 기능에는 서비스별 약관 [https://cloud.google.com/terms/service-terms?hl=ko#1]의 일반 서비스 약관 섹션에 있는 'GA 이전 제공 서비스 약관'이 적용됩니다. GA 이전 기능은 '있는 그대로' 제공되며 지원이 제한될 수 있습니다. 자세한 내용은 출시 단계 설명 [https://cloud.google.com/products?hl=ko#product-launch-stages]을 참조하세요.
참고: 이 기능에 대한 지원을 요청하거나 의견을 제공하려면 gemini-in-bigquery-feedback@google.com [mailto:gemini-in-bigquery-feedback@google.com]으로 이메일을 보내세요.
Google Cloud 콘솔의 Cloud Assist 패널 [https://cloud.google.com/gemini/docs/cloud-assist-panel?hl=ko]을 사용하여 BigQuery에서 SQL 쿼리를 생성할 수 있습니다.
Gemini Cloud Assist 채팅을 사용하여 SQL을 생성하려면 먼저 Gemini Cloud Assist를 사용 설정해야 합니다. 자세한 내용은 Gemini Cloud Assist 설정 [https://cloud.google.com/gemini/docs/cloud-assist/set-up-gemini?hl=ko]을 참조하세요.
Google Cloud 콘솔에서 BigQuery Studio 페이지로 이동합니다.
BigQuery Studio로 이동 [https://console.cloud.google.com/bigquery?hl=ko]
쿼리 편집기에서 add_boxSQL 쿼리를 클릭하여 새 SQL 쿼리를 엽니다.
In the Google Cloud toolbar, click spark Open or close Gemini AI chat to open Gemini Cloud Assist chat.
프롬프트 입력 필드에 SQL 쿼리를 생성하는 프롬프트를 입력합니다. 예를 들면 다음과 같습니다.
Generate a SQL query to show me the duration and subscriber type for the ten longest trips.
프롬프트 전송을 클릭합니다. 대답에는 다음과 유사한 SQL 쿼리가 포함됩니다.
SELECT
     subscriber_type,
     duration_sec
 FROM
     `bigquery-public-data.san_francisco_bikeshare.bikeshare_trips`
 ORDER BY
     duration_sec DESC
 LIMIT 10;
 ```
생성된 SQL 쿼리를 검토합니다.
생성된 SQL 쿼리를 실행하려면 content_copy 클립보드에 복사를 클릭하고 생성된 코드를 쿼리 편집기에 붙여넣은 다음 play_circle 실행을 클릭합니다.
SQL 생성 팁
다음 팁은 BigQuery의 Gemini에서 제공하는 추천을 개선할 수 있습니다.
사용할 테이블을 수동으로 지정하려면 정규화된 테이블 이름을 백틱(`)으로 묶어 포함합니다(예: `PROJECT.DATASET.TABLE`).
열 이름 또는 시맨틱 관계가 명확하지 않거나 복잡한 경우 프롬프트에 컨텍스트를 제공하여 Gemini가 개발자가 원하는 답변을 제공하도록 안내할 수 있습니다. 예를 들어 생성된 쿼리가 열 이름을 참조하도록 하려면 열 이름과 원하는 답변과의 관련성을 설명합니다. 평생 가치 또는 총이익과 같이 복잡한 용어를 참조하는 답변을 유도하려면 개념 및 데이터와의 관련성을 설명하여 SQL 생성 결과를 향상시킵니다.
주석에서 SQL을 생성할 때 각 줄 앞에 # 문자를 붙여 여러 줄에 걸쳐 프롬프트 형식을 지정할 수 있습니다.
열 설명은 SQL 쿼리를 생성할 때 고려됩니다. 정확성을 개선하려면 스키마에 열 설명을 추가하세요. 열 설명에 관한 자세한 내용은 '스키마 지정'의 열 설명 [https://cloud.google.com/bigquery/docs/schemas?hl=ko#column_descriptions]을 참조하세요.
SQL 쿼리 작성
프리뷰
이 기능에는 서비스별 약관 [https://cloud.google.com/terms/service-terms?hl=ko#1]의 일반 서비스 약관 섹션에 있는 'GA 이전 제공 서비스 약관'이 적용됩니다. GA 이전 기능은 '있는 그대로' 제공되며 지원이 제한될 수 있습니다. 자세한 내용은 출시 단계 설명 [https://cloud.google.com/products?hl=ko#product-launch-stages]을 참조하세요.
SQL 작성은 쿼리 편집기의 콘텐츠를 기반으로 컨텍스트에 따라 적절한 추천을 제공하려고 합니다. 입력하는 동안 Gemini는 현재 쿼리의 컨텍스트와 관련된 논리적인 다음 단계를 추천하거나 쿼리를 반복하는 데 도움을 줄 수 있습니다.
BigQuery의 Gemini를 사용하여 SQL 작성을 사용해 보려면 다음 단계를 따르세요.
Google Cloud 콘솔에서 BigQuery Studio 페이지로 이동합니다.
BigQuery Studio로 이동 [https://console.cloud.google.com/bigquery?hl=ko]
쿼리 편집기에서 다음 쿼리를 복사합니다.
SELECT
  subscriber_type
  , EXTRACT(HOUR FROM start_time) AS hour_of_day
  , AVG(duration_minutes) AS avg_trip_length
FROM
  `bigquery-public-data.austin_bikeshare.bikeshare_trips`
subscriber_type이 그룹화되거나 집계되지 않았다는 오류 메시지가 표시됩니다. 올바른 쿼리를 위해 도움이 필요한 경우가 많습니다.
subscriber_type의 줄 끝에서 스페이스바를 누릅니다.
추천된 쿼리 상세검색은 다음과 유사한 텍스트로 끝날 수 있습니다.
GROUP BY
  subscriber_type, hour_of_day;
Enter 키(macOS에서는 Return 키)를 눌러 추천을 생성할 수도 있습니다.
추천을 수락하려면 Tab 키를 누르거나 추천 텍스트 위에 마우스 포인터를 올려놓고 각 추천 대안을 클릭하세요. 추천 항목을 닫으려면 Esc 키를 누르거나 계속 입력합니다.
SQL 쿼리 설명
SQL 쿼리를 자연어로 설명하도록 BigQuery의 Gemini에 프롬프트를 입력할 수 있습니다. 이러한 설명은 쿼리의 길이 또는 복잡성으로 인해 문법, 기본 스키마, 비즈니스 컨텍스트를 평가하기 어려울 수 있는 쿼리를 이해하는 데 도움이 됩니다.
SQL 쿼리에 대한 설명을 보려면 다음 단계를 따르세요.
Google Cloud 콘솔에서 BigQuery Studio 페이지로 이동합니다.
BigQuery Studio로 이동 [https://console.cloud.google.com/bigquery?hl=ko]
쿼리 편집기에서 설명이 필요한 쿼리를 열거나 붙여넣습니다.
BigQuery의 Gemini에서 설명할 쿼리를 강조 표시합니다.
astrophotography_mode Gemini를 클릭한 다음 이 쿼리 설명을 클릭합니다.
SQL 설명이 Cloud 패널에 표시됩니다.
Python 코드 생성
자연어 문이나 질문으로 BigQuery의 Gemini에 Python 코드 생성을 요청할 수 있습니다. BigQuery의 Gemini는 BigQuery 프로젝트에서 직접 관련 테이블 이름을 가져와 Python 코드 추천 하나 이상으로 응답하므로 실행 가능한 맞춤형 Python 코드가 생성됩니다.
Python 코드 생성 도구 사용
다음 예시에서는 BigQuery 공개 데이터 세트 bigquery-public-data.ml_datasets.penguins의 코드를 생성합니다.
Google Cloud 콘솔에서 BigQuery Studio 페이지로 이동합니다.
BigQuery Studio로 이동 [https://console.cloud.google.com/bigquery?hl=ko]
쿼리 편집기의 탭 표시줄에서 add_box SQL 쿼리 옆에 있는 arrow_drop_down 드롭다운 화살표를 클릭한 후 노트북을 클릭합니다.
bigquery-public-data.ml_datasets.penguins 공개 데이터 세트에 대한 쿼리 예시를 보여주는 셀이 포함된 새 노트북이 열립니다.
새 코드 셀을 삽입하려면 툴바에서 add 코드를 클릭합니다. 새 코드 셀에는 코딩을 시작하거나 AI로 생성하세요 메시지가 포함되어 있습니다.
새 코드 셀에서 생성을 클릭합니다.
생성 편집기에서 다음 자연어 프롬프트를 입력합니다.
Using bigquery magics, query the `bigquery-public-data.ml_datasets.penguins` table
Enter 키(macOS에서는 Return 키)를 누릅니다.
추천 Python 코드는 다음과 유사합니다.
%%bigquery
SELECT *
FROM `bigquery-public-data.ml_datasets.penguins`
LIMIT 10
코드를 실행하려면 play_circle 셀 실행을 누릅니다.
Gemini Cloud Assist로 Python 코드 생성
프리뷰
이 기능에는 서비스별 약관 [https://cloud.google.com/terms/service-terms?hl=ko#1]의 일반 서비스 약관 섹션에 있는 'GA 이전 제공 서비스 약관'이 적용됩니다. GA 이전 기능은 '있는 그대로' 제공되며 지원이 제한될 수 있습니다. 자세한 내용은 출시 단계 설명 [https://cloud.google.com/products?hl=ko#product-launch-stages]을 참조하세요.
참고: 이 기능에 대한 지원을 요청하거나 의견을 제공하려면 gemini-in-bigquery-feedback@google.com [mailto:gemini-in-bigquery-feedback@google.com]으로 이메일을 보내세요.
Google Cloud 콘솔에서 Gemini Cloud Assist [https://cloud.google.com/gemini/docs/cloud-assist/overview?hl=ko]를 사용하여 BigQuery에서 Python 코드를 생성할 수 있습니다. Gemini Cloud Assist를 사용하여 코드를 생성하려면 먼저 Gemini Cloud Assist를 사용 설정해야 합니다. 자세한 내용은 Gemini Cloud Assist 설정 [https://cloud.google.com/gemini/docs/cloud-assist/set-up-gemini?hl=ko]을 참조하세요.
Google Cloud 콘솔에서 BigQuery Studio 페이지로 이동합니다.
BigQuery Studio로 이동 [https://console.cloud.google.com/bigquery?hl=ko]
쿼리 편집기의 탭 표시줄에서 add_box SQL 쿼리 옆에 있는 arrow_drop_down 드롭다운 화살표를 클릭한 후 노트북을 클릭합니다.
In the Google Cloud toolbar, click spark Open or close Gemini AI chat to open Gemini Cloud Assist chat.
프롬프트 입력 필드에 프롬프트를 입력하여 Python 코드를 생성합니다. 예를 들면 다음과 같습니다.
Generate python code to query the `bigquery-public-data.ml_datasets.penguins`
table using bigquery magics
프롬프트 전송(send)을 클릭합니다. Gemini는 다음과 유사한 Python 코드를 반환합니다.
%%bigquery
SELECT *
FROM `bigquery-public-data.ml_datasets.penguins`
LIMIT 10
생성된 Python 코드를 검토합니다.
Python 코드를 실행하려면 content_copy 클립보드에 복사를 클릭하고 생성된 코드를 쿼리 편집기에 붙여넣은 후 play_circle 실행을 클릭합니다.
BigQuery DataFrames 코드 생성
프리뷰
이 기능에는 서비스별 약관 [https://cloud.google.com/terms/service-terms?hl=ko#1]의 일반 서비스 약관 섹션에 있는 'GA 이전 제공 서비스 약관'이 적용됩니다. GA 이전 기능은 '있는 그대로' 제공되며 지원이 제한될 수 있습니다. 자세한 내용은 출시 단계 설명 [https://cloud.google.com/products?hl=ko#product-launch-stages]을 참조하세요.
참고: 이 기능에 대한 지원을 요청하거나 의견을 제공하려면 bq-notebook-python-gen-feedback@google.com [mailto:bq-notebook-python-gen-feedback@google.com]으로 이메일을 보내세요.
BigQuery의 Gemini로 BigQuery DataFrames [https://cloud.google.com/bigquery/docs/dataframes-quickstart?hl=ko] 코드를 생성할 수 있습니다. 생성된 코드에서 BigQuery DataFrames를 사용하도록 Gemini에 요청하려면 프롬프트에서 의도를 표현합니다. 예를 들어 프롬프트를 'bigframes 사용' 또는 'BigQuery DataFrames 활용'으로 시작할 수 있습니다.
BigQuery DataFrames는 다음과 같은 두 가지 라이브러리를 제공합니다.
bigframes.pandas: 분석을 위한 pandas 호환 API를 제공합니다.
bigframes.ml: 머신러닝(ML)을 위한 scikit-learn과 같은 API를 제공합니다.
Gemini 코드 생성은 bigframes.pandas 라이브러리에 최적화되어 있습니다.
BigQuery DataFrames 및 BigQuery DataFrames를 사용하는 데 필요한 권한을 자세히 알아보려면 BigQuery DataFrames 권한 [https://cloud.google.com/bigquery/docs/use-bigquery-dataframes?hl=ko]을 참조하세요. BigQuery DataFrames는 오픈소스 패키지입니다. pip install --upgrade bigframes를 실행하여 최신 버전을 설치할 수 있습니다.
다음 예시에서는 BigQuery 공개 데이터 세트 bigquery-public-data.ml_datasets.penguins의 코드를 생성합니다.
Google Cloud 콘솔에서 BigQuery Studio 페이지로 이동합니다.
BigQuery Studio로 이동 [https://console.cloud.google.com/bigquery?hl=ko]
쿼리 편집기의 탭 표시줄에서 add_box SQL 쿼리 옆에 있는 arrow_drop_down 드롭다운 화살표를 클릭한 후 노트북을 클릭합니다.
새 노트북이 열립니다.
새 코드 셀을 삽입하려면 툴바에서 add 코드를 클릭합니다.
새 코드 셀에는 코딩을 시작하거나 AI로 생성하세요 메시지가 포함되어 있습니다. 새 코드 셀에서 생성을 클릭합니다.
생성 편집기에서 다음 자연어 프롬프트를 입력합니다.
Read the penguins table from the BigQuery public data using bigframes
Enter 키(macOS에서는 Return 키)를 누릅니다.
추천 Python 코드는 다음과 유사합니다.
import bigframes.pandas as bpd

# Read the penguins table from the BigQuery public data using bigframes
result = bpd.read_gbd("bigquery-public-data.ml_datasets.penguins")
코드를 실행하려면 play_circle 셀 실행을 누릅니다.
결과를 미리 보려면 툴바에서 add 코드를 클릭하여 새 코드 셀을 삽입합니다.
새 셀에서 peek() 메서드(예: result.peek())를 호출하고 play_circle 셀 실행을 누릅니다. 데이터 행 여러 개가 표시됩니다.
전체 Python 코드
Python 코드 완성은 쿼리 편집기의 콘텐츠를 기반으로 상황에 따라 적절한 추천을 제공하려고 합니다. 입력하는 동안 BigQuery의 Gemini는 현재 코드 컨텍스트와 관련된 논리적인 다음 단계를 제안하거나 코드를 반복하는 데 도움을 줄 수 있습니다.
BigQuery의 Gemini를 사용하여 Python 코드 완성을 사용해 보려면 다음 단계를 수행합니다.
Google Cloud 콘솔에서 BigQuery Studio 페이지로 이동합니다.
BigQuery Studio로 이동 [https://console.cloud.google.com/bigquery?hl=ko]
쿼리 편집기의 탭 표시줄에서 add_box SQL 쿼리 옆에 있는 arrow_drop_down 드롭다운 화살표를 클릭한 후 노트북을 클릭합니다.
bigquery-public-data.ml_datasets.penguins 공개 데이터 세트에 대한 쿼리 예시를 보여주는 셀이 포함된 새 노트북이 열립니다.
편집기에서 Python 코드를 입력합니다. 예를 들면 %%bigquery입니다. BigQuery의 Gemini는 입력하는 동안 코드 인라인을 제안합니다.
추천된 내용을 사용하려면 Tab 키를 누르세요.
Python 코드 설명
프리뷰
이 제품 또는 기능에는 서비스별 약관 [https://cloud.google.com/terms/service-terms?hl=ko#1]의 일반 서비스 약관 섹션에 있는 'GA 이전 제공 서비스 약관'이 적용됩니다. GA 이전 제품 및 기능은 '있는 그대로' 제공되며 지원이 제한될 수 있습니다. 자세한 내용은 출시 단계 설명 [https://cloud.google.com/products?hl=ko#product-launch-stages]을 참조하세요.
BigQuery의 Gemini를 사용하여 Colab Enterprise 노트북의 Python 코드를 설명할 수 있습니다.
설명을 받은 후 코드를 더 잘 이해하도록 프롬프트 대화상자에서 더 많은 질문을 할 수 있습니다.
노트북의 Python 코드에 대한 설명을 보려면 다음 단계를 수행합니다.
Google Cloud 콘솔에서 BigQuery Studio 페이지로 이동합니다.
BigQuery Studio로 이동 [https://console.cloud.google.com/bigquery?hl=ko]
탐색기 창에서 프로젝트와 Notebooks 폴더를 펼칩니다.
열려는 노트북을 클릭합니다.
이해하려는 Python 셀을 강조 표시합니다.
spark Gemini를 클릭한 후 코드 설명을 클릭합니다.
코드 설명이 셀 옆의 패널에 표시됩니다.
선택사항: 코드를 더 잘 이해하려면 여기에 프롬프트 입력 필드에 질문을 입력합니다.
Python 오류 수정 및 설명
프리뷰
이 제품 또는 기능에는 서비스별 약관 [https://cloud.google.com/terms/service-terms?hl=ko#1]의 일반 서비스 약관 섹션에 있는 'GA 이전 제공 서비스 약관'이 적용됩니다. GA 이전 제품 및 기능은 '있는 그대로' 제공되며 지원이 제한될 수 있습니다. 자세한 내용은 출시 단계 설명 [https://cloud.google.com/products?hl=ko#product-launch-stages]을 참조하세요.
BigQuery의 Gemini를 사용하여 Colab Enterprise 노트북의 Python 코드 오류를 수정하고 설명할 수 있습니다.
Gemini 어시스턴스로 코드 오류를 수정하거나 이해하려면 다음 단계를 수행합니다.
Google Cloud 콘솔에서 BigQuery Studio 페이지로 이동합니다.
BigQuery Studio로 이동 [https://console.cloud.google.com/bigquery?hl=ko]
탐색기 창에서 프로젝트와 Notebooks 폴더를 펼칩니다.
열려는 노트북을 클릭합니다.
노트북의 코드 셀에 오류가 포함된 코드를 입력한 후 셀을 실행합니다. 예를 들어 닫는 괄호가 누락된 print(1을 입력할 수 있습니다.
코드 셀이 실행되면 노트북의 코드 셀 아래에 오류 메시지가 출력됩니다. Python 노트북에서 Gemini를 사용 설정했고 Gemini에 오류를 수정하거나 설명하는 추천이 있으면 다음 옵션 중 하나가 표시됩니다.
Python 문법 오류의 경우 오류 수정 옵션이 표시됩니다.
다른 모든 유형의 오류의 경우 오류 설명 옵션이 표시됩니다.
문법 오류를 수정하려면 다음을 수행합니다.
오류 수정을 클릭합니다.
Gemini에서 오류 해결 방법을 제안합니다.
추천을 평가한 후 다음 중 하나를 수행합니다.
추천을 수락하려면 check 제안 수락을 클릭합니다.
추천을 거부하려면 close 제안 거부를 클릭합니다.
다른 모든 유형의 오류를 해결하려면 다음을 수행합니다.
오류 설명을 클릭합니다.
오류를 설명하고 변경사항을 제안하는 패널이 열립니다.
선택사항: 오류를 더 잘 이해하려면 여기에 프롬프트 입력 필드에 질문을 입력합니다.
제안된 변경사항을 수락하려면 library_add 코드 셀 추가를 클릭합니다.
PySpark 코드 생성
프리뷰
이 제품 또는 기능에는 서비스별 약관 [https://cloud.google.com/terms/service-terms?hl=ko#1]의 일반 서비스 약관 섹션에 있는 'GA 이전 제공 서비스 약관'이 적용됩니다. GA 이전 제품 및 기능은 '있는 그대로' 제공되며 지원이 제한될 수 있습니다. 자세한 내용은 출시 단계 설명 [https://cloud.google.com/products?hl=ko#product-launch-stages]을 참조하세요.
Gemini Code Assist에 노트북에서 PySpark 코드를 생성해 달라고 요청할 수 있습니다. Gemini Code Assist는 관련 BigQuery 및 Dataproc Metastore 테이블과 스키마를 가져오고 사용하여 코드 응답을 생성합니다. 스키마 지식과 함께 Gemini Code Assist는 할루시네이션을 방지하고 조인 키와 열 유형을 제안합니다.
노트북에서 Gemini Code Assist 코드를 생성하려면 다음을 수행합니다.
툴바에서 + 코드를 클릭하여 새 코드 셀을 삽입합니다. 새 코드 셀에 Start coding or generate with AI가 표시됩니다. 생성을 클릭합니다.
생성 편집기에서 자연어 프롬프트를 입력한 후 enter 아이콘을 클릭합니다. 프롬프트에 spark 또는 pyspark 키워드가 포함되어야 합니다.
샘플 프롬프트:
create a spark dataframe from order_items and filter to orders created in 2024
샘플 출력:
spark.read.format("bigquery").option("table", "sqlgen-testing.pysparkeval_ecommerce.order_items").load().filter("year(created_at) = 2024").createOrReplaceTempView("order_items")
df = spark.sql("SELECT * FROM order_items")
Gemini Code Assist 코드 생성 도움말
Gemini Code Assist가 관련 테이블과 스키마를 가져오도록 하려면 Dataproc Metastore 인스턴스에 Data Catalog 동기화 [https://cloud.google.com/dataproc-metastore/docs/data-catalog-sync?hl=ko]를 사용 설정하세요.
사용자 계정에 Data Catalog 쿼리 테이블에 대한 액세스 권한이 있는지 확인합니다. 이를 위해 DataCatalog.Viewer 역할 [https://cloud.google.com/iam/docs/understanding-roles?hl=ko#datacatalog.viewer]을 할당합니다.
Gemini 쿼리 어시스턴트 기능 사용 중지
BigQuery의 Gemini에서 특정 기능을 사용 중지하려면 다음 단계를 따르세요.
Google Cloud 콘솔에서 BigQuery Studio 페이지로 이동합니다.
BigQuery Studio로 이동 [https://console.cloud.google.com/bigquery?hl=ko]
BigQuery 툴바에서 pen_sparkarrow_drop_downGemini를 클릭합니다.
목록에서 사용 중지하려는 쿼리 어시스턴트 기능을 선택 해제합니다.
BigQuery의 Gemini를 사용 중지하는 방법을 알아보려면 BigQuery의 Gemini 사용 중지 [https://cloud.google.com/gemini/docs/turn-off-gemini?hl=ko#bigquery]를 참조하세요.
Colab Enterprise에서 Gemini 사용 중지
Google Cloud 프로젝트용 Colab Enterprise에서 Gemini를 사용 중지하려면 관리자가 Gemini for Google Cloud API를 사용 중지해야 합니다. 서비스 사용 중지 [https://cloud.google.com/service-usage/docs/enable-disable?hl=ko#disabling]를 참조하세요.
특정 사용자에 대해 Colab Enterprise에서 Gemini를 사용 중지하려면 관리자가 해당 사용자의 Google Cloud를 위한 Gemini 사용자 [https://cloud.google.com/iam/docs/understanding-roles?hl=ko#cloudaicompanion.user](roles/cloudaicompanion.user) 역할을 취소해야 합니다. 단일 IAM 역할 취소 [https://cloud.google.com/iam/docs/granting-changing-revoking-access?hl=ko#revoke-single-role]를 참고하세요.
의견 보내기
Google Cloud 콘솔에서 BigQuery Studio 페이지로 이동합니다.
BigQuery Studio로 이동 [https://console.cloud.google.com/bigquery?hl=ko]
BigQuery 툴바에서 pen_sparkarrow_drop_downGemini를 클릭합니다.
의견 보내기를 클릭합니다.
추천 개선에 참여
프리뷰 [https://cloud.google.com/products?hl=ko#product-launch-stages]의 기능에 제출한 프롬프트 데이터를 Google과 공유하여 Gemini 추천을 개선할 수 있습니다.
프롬프트 데이터를 공유하려면 다음 단계를 수행합니다.
Google Cloud 콘솔에서 BigQuery Studio 페이지로 이동합니다.
BigQuery Studio로 이동 [https://console.cloud.google.com/bigquery?hl=ko]
BigQuery 툴바에서 pen_sparkarrow_drop_downGemini를 클릭합니다.
BigQuery의 Gemini 개선을 위해 데이터 공유를 선택합니다.
데이터 사용 설정 대화상자에서 데이터 사용 설정을 업데이트합니다.
데이터 공유 설정은 전체 프로젝트에 적용되며 serviceusage.services.enable 및 serviceusage.services.list IAM 권한이 있는 프로젝트 관리자만 이를 설정할 수 있습니다. 신뢰할 수 있는 테스터 프로그램에서의 데이터 사용에 관한 자세한 내용은 Google Cloud 를 위한 Gemini 신뢰할 수 있는 테스터 프로그램 [https://cloud.google.com/trusted-tester/duet-preview?hl=ko]을 참조하세요.
Gemini 및 BigQuery 데이터
정확한 결과를 제공하려면 BigQuery의 Gemini가 향상된 기능을 위해 BigQuery의 고객 데이터 [https://cloud.google.com/terms/data-processing-addendum?hl=ko] 및 메타데이터 모두에 액세스해야 합니다. 자세한 내용은 BigQuery의 Gemini에서 사용자 데이터를 사용하는 방법 [https://cloud.google.com/gemini/docs/bigquery/overview?hl=ko#data-usage]을 참조하세요.
가격 책정
이 기능의 가격 책정에 관한 자세한 내용은 BigQuery의 Gemini 가격 책정 개요 [https://cloud.google.com/products/gemini/pricing?hl=ko#gemini-in-bigquery-pricing]를 참고하세요.
할당량 및 한도
이 기능의 할당량 및 한도에 대한 자세한 내용은 BigQuery의 Gemini 할당량 [https://cloud.google.com/gemini/docs/quotas?hl=ko#bigquery]을 참조하세요.
다음 단계
Google Cloud 를 위한 Gemini 개요 [https://cloud.google.com/gemini/docs/overview?hl=ko] 읽어보기
Google Cloud 를 위한 Gemini에서 사용자 데이터를 사용하는 방법 [https://cloud.google.com/gemini/docs/discover/data-governance?hl=ko] 알아보기
데이터 인사이트를 생성하여 데이터를 탐색 [https://cloud.google.com/bigquery/docs/data-insights?hl=ko]하는 방법 알아보기
도움이 되었나요?
의견 보내기