Source URL: https://cloud.google.com/bigquery/docs/custom-quotas

BigQuery [https://cloud.google.com/bigquery?hl=ko]
Documentation [https://cloud.google.com/bigquery/docs?hl=ko]
가이드 [https://cloud.google.com/bigquery/docs/introduction?hl=ko]
도움이 되었나요?
의견 보내기
이 페이지의 내용
필요한 역할 [https://cloud.google.com/bigquery/docs/custom-quotas?hl=ko#required_role]
커스텀 할당량 설정 또는 수정 [https://cloud.google.com/bigquery/docs/custom-quotas?hl=ko#set-custom-quotas]
반환된 오류 메시지 [https://cloud.google.com/bigquery/docs/custom-quotas?hl=ko#error-messages]
예 [https://cloud.google.com/bigquery/docs/custom-quotas?hl=ko#example]
다음 단계 [https://cloud.google.com/bigquery/docs/custom-quotas?hl=ko#whats_next]
커스텀 쿼리 할당량 만들기
bookmark_border
이 문서에서는 비용을 관리하기 위해 커스텀 쿼리 할당량을 설정 또는 수정하는 방법을 설명합니다. BigQuery 분석가가 비용을 추정하고 관리하는 방법을 알아보려면 비용 추정 및 관리 [https://cloud.google.com/bigquery/docs/best-practices-costs?hl=ko]를 참고하세요.
BigQuery 프로젝트와 사용자의 수가 많은 경우에는 커스텀 쿼리 할당량을 요청하여 하루에 처리되는 쿼리 데이터 양의 한도를 지정하여 비용을 관리할 수 있습니다. 일일 할당량은 태평양 표준시 자정에 재설정됩니다.
커스텀 할당량은 사전에 적용되므로 할당량이 10TB인 경우 11TB 쿼리를 실행할 수 없습니다. 처리된 데이터에 커스텀 할당량을 만들면 프로젝트 수준이나 사용자 수준에서 비용을 관리할 수 있습니다.
맞춤 비용 관리를 설정하려면 다음 쿼리 할당량 중 하나 또는 둘 다를 업데이트하면 됩니다.
QueryUsagePerDay: 프로젝트 수준의 커스텀 할당량은 해당 프로젝트에서 모든 사용자의 총 사용량을 제한합니다.
QueryUsagePerUserPerDay: 사용자 수준의 커스텀 할당량은 프로젝트 내의 모든 사용자와 서비스 계정 [https://cloud.google.com/docs/authentication?hl=ko#user_accounts_and_service_accounts]에 별도로 적용됩니다.
참고: 개별 사용자 또는 서비스 계정에 맞춤 할당량을 할당할 수 없습니다.
중요: 2025년 9월 1일부터 QueryUsagePerDay 할당량의 기본 한도가 무제한에서 프로젝트당 일일 처리 데이터 200테비바이트(TiB)로 변경됩니다. QueryUsagePerUserPerDay의 기본 한도는 무제한이며 앞으로도 무제한으로 유지됩니다. 언제든지 한도를 변경 [https://cloud.google.com/bigquery/docs/custom-quotas?hl=ko#set-custom-quotas]할 수 있습니다. 맞춤 재정의가 기본 한도를 대체합니다.
쿼리 사용량 할당량은 주문형 쿼리 가격 책정 모델 [https://cloud.google.com/bigquery/pricing?hl=ko#on_demand_pricing]에만 적용됩니다.
설정할 수 있는 BigQuery 할당량에 대한 자세한 내용은 할당량 및 한도 [https://cloud.google.com/bigquery/quotas?hl=ko]를 참고하세요.
필요한 역할
할당량을 변경하는 데 필요한 권한을 얻으려면 관리자에게 프로젝트의 할당량 관리자(role/servicemanagement.quotaAdmin) IAM 역할을 부여해 달라고 요청하세요. 역할 부여에 대한 상세 설명은 프로젝트, 폴더, 조직에 대한 액세스 관리 [https://cloud.google.com/iam/docs/granting-changing-revoking-access?hl=ko]를 참조하세요.
이 사전 정의된 역할에는 할당량을 변경하는 데 필요한 serviceusage.quotas.update 권한이 포함되어 있습니다.
커스텀 역할 [https://cloud.google.com/iam/docs/creating-custom-roles?hl=ko]이나 다른 사전 정의된 역할 [https://cloud.google.com/iam/docs/roles-overview?hl=ko#predefined]을 사용하여 이 권한을 부여받을 수도 있습니다.
커스텀 할당량 설정 또는 수정
Google Cloud 콘솔의 할당량 및 시스템 한도 페이지에 표시된 모든 할당량에 대해 커스텀 할당량을 설정하거나 기존 커스텀 할당량을 수정할 수 있습니다. 더 낮은 할당량을 요청하면 변경사항이 몇 분 이내에 적용됩니다. 할당량 상향 조정을 요청하면 승인 프로세스를 거치게 되며, 시간이 더 걸릴 수 있습니다. 자세한 내용은 할당량 조정 요청 [https://cloud.google.com/docs/quotas/help/request_increase?hl=ko]을 참조하세요.
참고:커스텀 할당량은 근사치입니다. 커스텀 할당량 기능은 과도한 지출이 발생하지 않도록 추가적인 보호 수단을 제공하지만 처리되는 바이트를 엄격하게 제한하도록 설계되지는 않았습니다. BigQuery에서 간혹 할당량을 초과하여 쿼리를 실행할 수도 있습니다. 가격 일관성을 높이려면 예약 [https://cloud.google.com/bigquery/docs/reservations-intro?hl=ko]을 고려하세요.
매일 처리할 수 있는 BigQuery 데이터 양을 제한하는 등 맞춤 비용 관리를 설정하거나 업데이트하려면 다음 단계를 따르세요.
Google Cloud 콘솔에서 IAM 및 관리자 > 할당량 및 시스템 한도 페이지를 엽니다.
할당량 및 시스템 한도로 이동 [https://console.cloud.google.com/iam-admin/quotas?hl=ko]
필터 검색창에서 서비스 필터를 사용하여 BigQuery API를 필터링합니다.
조정하려는 할당량을 선택합니다. 예를 들어 프로젝트 수준과 사용자 수준 모두에서 하루에 쿼리할 수 있는 데이터 양을 제한하려면 일일 쿼리 사용량과 사용자당 일일 쿼리 사용량을 선택합니다. 목록을 페이지로 나누어 찾아야 할 수도 있습니다. 할당량을 선택하면 툴바가 표시됩니다.
툴바에서 edit 수정을 클릭합니다. 할당량 변경사항 대화상자가 열립니다.
무제한이 선택되어 있으면 선택 해제합니다.
새 값 필드에 원하는 할당량 값을 TiB 단위로 입력합니다.
완료를 클릭합니다.
요청 제출을 클릭합니다.
할당량 보기 및 관리에 관한 자세한 내용은 할당량 보기 및 관리 [https://cloud.google.com/docs/quotas/view-manage?hl=ko]를 참조하세요.
반환된 오류 메시지
커스텀 할당량을 설정한 후에 할당량을 초과하면 BigQuery가 오류를 반환합니다.
프로젝트 수준의 커스텀 할당량을 초과하면 BigQuery가 usageQuotaExceeded [https://cloud.google.com/bigquery/troubleshooting-errors?hl=ko#quotaExceeded] 오류를 반환합니다.
Custom quota exceeded: Your usage exceeded the custom quota for
QueryUsagePerDay, which is set by your administrator. For more information,
see https://cloud.google.com/bigquery/cost-controls
사용자가 사용자 수준의 커스텀 할당량을 초과하면 BigQuery가 다른 오류 메시지와 함께 usageQuotaExceeded [https://cloud.google.com/bigquery/troubleshooting-errors?hl=ko#quotaExceeded] 오류를 반환합니다.
Custom quota exceeded: Your usage exceeded the custom quota for
QueryUsagePerUserPerDay, which is set by your administrator. For more
information, see https://cloud.google.com/bigquery/cost-controls
데이터 세트 액세스 권한이 있다면 커스텀 할당량이 없거나 아직 할당량을 초과하지 않은 다른 프로젝트에서 쿼리를 실행할 수 있습니다.
예
사용자가 10명이며 그 중 하나가 서비스 계정인 프로젝트에 다음 커스텀 할당량을 설정한다고 가정해 보겠습니다.
프로젝트 수준: 일일 50TB
사용자 수준: 일일 10TB
프로젝트 수준의 커스텀 할당량은 해당 프로젝트에서 모든 사용자의 총 사용량을 제한합니다. 사용자 수준의 커스텀 할당량은 프로젝트 내의 각 사용자나 서비스 계정 [https://cloud.google.com/docs/authentication?hl=ko#user_accounts_and_service_accounts]에 개별적으로 적용됩니다.
다음 표에서는 사용자 10명이 하루 동안 쿼리를 실행할 때 남아 있는 할당량을 설명합니다.
사용 남아 있는 할당량
사용자 10명이 각각 4TB씩 쿼리 프로젝트 수준: 10TB가 남아 있습니다.
사용자 수준: 사용자당 6TB가 남아 있지만 남아 있는 할당량의 합계는 최대 10TB뿐입니다.
서비스 계정에서 6TB를 더 쿼리 프로젝트 수준: 4TB가 남아 있습니다.
사용자 수준: 서비스 계정에서 더 이상 BigQuery를 사용할 수 없습니다. 다른 사용자는 사용자당 6TB가 남아 있지만 남아 있는 할당량의 합계는 최대 4TB뿐입니다.
다른 사용자 1명이 4TB를 더 쿼리 프로젝트 수준: 0TB가 남아 있습니다.
사용자 수준: 사용자별로 다양한 크기가 남아 있지만 프로젝트 수준의 할당량을 초과했으므로 아무도 BigQuery를 사용할 수 없습니다.
남아 있는 할당량이 없으면 해당 프로젝트의 모든 사용자가 BigQuery를 사용할 수 없습니다.
참고: 커스텀 할당량은 기본으로 사용 설정되어 있지 않습니다. 커스텀 할당량을 설정하려면 커스텀 할당량 설정 또는 수정 [https://cloud.google.com/bigquery/docs/custom-quotas?hl=ko#set-custom-quotas]을 참조하세요.
다음 단계
BigQuery 가격 책정 [https://cloud.google.com/bigquery/pricing?hl=ko] 알아보기
비용을 예측하고 관리 [https://cloud.google.com/bigquery/docs/best-practices-costs?hl=ko]하는 방법 알아보기
BigQuery 감사 로그 [https://cloud.google.com/bigquery/docs/introduction-audit-workloads?hl=ko]를 분석하여 쿼리 비용과 BigQuery 사용량을 모니터링하는 방법 알아보기
결제, 알림, 데이터 시각화에 대한 자세한 내용은 다음 주제 참조
예산 생성, 수정 또는 삭제 및 예산 알림 [https://cloud.google.com/billing/docs/how-to/budgets?hl=ko]
Cloud Billing 데이터를 BigQuery로 내보내기 [https://cloud.google.com/billing/docs/how-to/export-data-bigquery?hl=ko]
Looker Studio로 비용 시각화하기 [https://cloud.google.com/billing/docs/how-to/visualize-data?hl=ko]
도움이 되었나요?
의견 보내기