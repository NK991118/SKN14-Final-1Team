Source URL: https://cloud.google.com/bigquery/docs/sfmc-transfer

BigQuery [https://cloud.google.com/bigquery?hl=ko]
Documentation [https://cloud.google.com/bigquery/docs?hl=ko]
가이드 [https://cloud.google.com/bigquery/docs/introduction?hl=ko]
도움이 되었나요?
의견 보내기
이 페이지의 내용
제한사항 [https://cloud.google.com/bigquery/docs/sfmc-transfer?hl=ko#limitations]
시작하기 전에 [https://cloud.google.com/bigquery/docs/sfmc-transfer?hl=ko#before_you_begin]
Salesforce Marketing Cloud 기본 요건 [https://cloud.google.com/bigquery/docs/sfmc-transfer?hl=ko#sfmc-prereqs]
BigQuery 기본 요건 [https://cloud.google.com/bigquery/docs/sfmc-transfer?hl=ko#bq-prerequisites]
Salesforce Marketing Cloud 데이터 전송 설정 [https://cloud.google.com/bigquery/docs/sfmc-transfer?hl=ko#sfmc-transfer-setup]
전송 설정 문제 해결 [https://cloud.google.com/bigquery/docs/sfmc-transfer?hl=ko#troubleshoot_transfer_setup]
오류 메시지 [https://cloud.google.com/bigquery/docs/sfmc-transfer?hl=ko#error_messages]
가격 책정 [https://cloud.google.com/bigquery/docs/sfmc-transfer?hl=ko#pricing]
Salesforce Marketing Cloud 데이터를 BigQuery로 로드
bookmark_border
프리뷰
이 기능에는 서비스별 약관 [https://cloud.google.com/terms/service-terms?hl=ko#1]의 일반 서비스 약관 섹션에 있는 'GA 이전 제공 서비스 약관'이 적용됩니다. GA 이전 기능은 '있는 그대로' 제공되며 지원이 제한될 수 있습니다. 자세한 내용은 출시 단계 설명 [https://cloud.google.com/products?hl=ko#product-launch-stages]을 참조하세요.
참고: 이 기능에 대한 지원을 받거나 의견을 제출하려면 dts-preview-support@google.com [mailto:dts-preview-support@google.com]으로 문의하세요.
Salesforce Marketing Cloud용 BigQuery Data Transfer Service 커넥터를 사용하여 Salesforce Marketing Cloud에서 BigQuery로 데이터를 로드할 수 있습니다. BigQuery Data Transfer Service를 사용하면 Salesforce Marketing Cloud의 최신 데이터를 BigQuery에 추가하는 반복 전송 작업을 예약할 수 있습니다.
제한사항
Salesforce Marketing Cloud 데이터 전송에는 다음과 같은 제한사항이 적용됩니다.
구성된 네트워크 연결과 가상 머신(VM) 인스턴스가 서로 다른 리전에 있는 경우 Salesforce Marketing Cloud에서 데이터를 전송할 때 리전 간 데이터 이동이 발생할 수 있습니다.
시작하기 전에
다음 섹션에서는 Salesforce Marketing Cloud 데이터 전송을 만들기 전에 취해야 할 조치를 설명합니다.
Salesforce Marketing Cloud 기본 요건
Salesforce Marketing Cloud 데이터 전송을 만들 때 다음 정보가 있어야 합니다.
매개변수 이름 설명
subdomain API 하위 도메인
instance API 서버 인스턴스
clientId 앱 통합 클라이언트 ID
clientSecret 앱 통합 클라이언트 보안 비밀번호
다음 단계에서는 Salesforce Marketing Cloud 데이터 전송을 만드는 데 필요한 정보를 얻는 방법을 보여줍니다.
서버 간 유형 API 통합 패키지를 설치합니다. 패키지 세부정보 페이지의 구성요소 섹션에 클라이언트 ID, 클라이언트 보안 비밀번호, 하위 도메인을 기록합니다.
하위 도메인은 기본 URI의 일부입니다. 예를 들어 인증 기본 URI https://SUBDOMAIN.auth.marketingcloudapis.com/에서 SUBDOMAIN은 하위 도메인 값입니다.
자세한 내용은 클라이언트 사용자 인증 정보 권한 부여 유형으로 서버 간 통합 [https://developer.salesforce.com/docs/marketing/marketing-cloud/guide/integration-s2s-client-credentials.html]을 참조하세요.
Salesforce Marketing Cloud 애플리케이션에 로그인한 후 URL에서 API 서버 인스턴스를 찾습니다. 인스턴스 값에는 s 뒤에 숫자 값이 붙습니다. 예를 들어 URL https://mc.s4.exacttarget.com/에서 인스턴스 값은 s4입니다. 자세한 내용은 마케팅 클라우드 계정의 스택 위치 찾기 [https://help.salesforce.com/s/articleView?id=000383566&type=1]를 참고하세요.
Salesforce Marketing Cloud 데이터 전송을 허용하도록 범위 권한 설정을 구성해야 합니다.
Salesforce Marketing Cloud 애플리케이션에 로그인합니다.
프로필 드롭다운 메뉴를 확장한 후 설정을 클릭합니다.
플랫폼 도구 아래의 탐색 메뉴에서 앱 > 설치된 패키지를 클릭합니다.
해당 설정을 수정하기 위해 설치된 패키지를 선택합니다.
구성요소 섹션에서 수정을 클릭합니다.
다음 범위에 대해 읽기 옵션을 선택합니다.
이메일
저장된 콘텐츠
여정
콜백
캠페인
구독
저장을 클릭합니다.
BigQuery 기본 요건
BigQuery Data Transfer Service 사용 설정 [https://cloud.google.com/bigquery/docs/enable-transfer-service?hl=ko]에 필요한 모든 작업을 완료했는지 확인합니다.
데이터를 저장할 BigQuery 데이터세트를 만듭니다 [https://cloud.google.com/bigquery/docs/datasets?hl=ko].
Pub/Sub의 전송 실행 알림을 설정하려면 pubsub.topics.setIamPolicy Identity and Access Management(IAM) 권한이 있는지 확인합니다. 이메일 알림만 설정한다면 Pub/Sub 권한이 필요하지 않습니다. 자세한 내용은 BigQuery Data Transfer Service 실행 알림 [https://cloud.google.com/bigquery/docs/transfer-run-notifications?hl=ko]을 참조하세요.
필요한 BigQuery 역할
전송을 만드는 데 필요한 권한을 얻으려면 관리자에게 BigQuery 관리자 [https://cloud.google.com/iam/docs/roles-permissions/bigquery?hl=ko#bigquery.admin](roles/bigquery.admin) IAM 역할을 부여해 달라고 요청하세요. 역할 부여에 대한 자세한 내용은 프로젝트, 폴더, 조직에 대한 액세스 관리 [https://cloud.google.com/iam/docs/granting-changing-revoking-access?hl=ko]를 참조하세요.
이 사전 정의된 역할에는 전송을 만드는 데 필요한 권한이 포함되어 있습니다. 필요한 정확한 권한을 보려면 필수 권한 섹션을 펼치세요.
필수 권한
커스텀 역할 [https://cloud.google.com/iam/docs/creating-custom-roles?hl=ko]이나 다른 사전 정의된 역할 [https://cloud.google.com/iam/docs/roles-overview?hl=ko#predefined]을 사용하여 이 권한을 부여받을 수도 있습니다.
Salesforce Marketing Cloud 데이터 전송 설정
Salesforce Marketing Cloud 데이터 전송을 만들려면 다음 단계를 따르세요.
--- 탭: 콘솔 [https://cloud.google.com/bigquery/docs/sfmc-transfer?hl=ko#%EC%BD%98%EC%86%94] ---
Google Cloud 콘솔에서 데이터 전송 페이지로 이동합니다.

데이터 전송으로 이동 [https://console.cloud.google.com/bigquery/transfers?hl=ko] 
add 전송 만들기를 클릭합니다.
소스 유형 섹션의 소스에 대해 Salesforce Marketing Cloud를 선택합니다.
데이터 소스 세부정보 섹션에서 다음을 수행합니다.


API 하위 도메인에 API 하위 도메인을 입력합니다.
API 인스턴스에 API 인스턴스 값을 입력합니다.
클라이언트 ID에 앱 통합 클라이언트 ID를 입력합니다.
클라이언트 보안 비밀에 앱 통합 클라이언트 보안 비밀을 입력합니다.

대상 설정 섹션의 데이터 세트에서 데이터를 저장하기 위해 만든 데이터 세트를 선택합니다.
전송 구성 이름 섹션의 표시 이름에 데이터 전송 이름을 입력합니다.
일정 옵션 섹션에서 다음을 수행합니다.


반복 빈도 목록에서 이 데이터 전송 실행 빈도를 지정하는 옵션을 선택합니다. 커스텀 반복 빈도를 지정하려면 커스텀을 선택합니다. 주문형을 선택한 경우 수동으로 전송을 트리거 [https://cloud.google.com/bigquery/docs/working-with-transfers?hl=ko#manually_trigger_a_transfer]하면 이 전송이 실행됩니다.
해당하는 경우 지금 시작 또는 설정 시간에 시작을 선택하고 시작 날짜와 실행 시간을 입력합니다.

선택사항: 알림 옵션 섹션에서 다음을 수행합니다.


이메일 알림을 사용 설정하려면 이메일 알림 전환 버튼을 클릭합니다.
이 옵션을 사용 설정하면 전송 실행이 실패할 때 전송 관리자에게 이메일 알림이 발송됩니다.
이 전송에 Pub/Sub 전송 실행 알림 [https://cloud.google.com/bigquery/docs/transfer-run-notifications?hl=ko]을 사용 설정하려면 Pub/Sub 알림 전환 버튼을 클릭합니다. 주제 [https://cloud.google.com/pubsub/docs/overview?hl=ko#types] 이름을 선택하거나 주제 만들기를 클릭하여 주제를 만들 수 있습니다.

저장을 클릭합니다.


이 데이터 전송이 실행되면 BigQuery Data Transfer Service는 REST 인터페이스를 기반으로 다음 테이블을 자동으로 채웁니다.


Campaigns
Categories
EventDefinitions
Journeys
JourneyActivities
SendDefinitions
Subscriptions

--- 탭: bq [https://cloud.google.com/bigquery/docs/sfmc-transfer?hl=ko#bq] ---
bq mk 명령어 [https://cloud.google.com/bigquery/docs/reference/bq-cli-reference?hl=ko#mk-transfer-config]를 입력하고 전송 생성 플래그 --transfer_config를 지정합니다.

bq mk
    --transfer_config
    --project_id=PROJECT_ID
    --data_source=DATA_SOURCE
    --display_name=DISPLAY_NAME
    --target_dataset=DATASET
    --params='PARAMETERS'

다음을 바꿉니다.


PROJECT_ID(선택사항): Google Cloud 프로젝트 ID.
특정 프로젝트를 지정하는 --project_id가 입력되지 않으면 기본 프로젝트가 사용됩니다.
DATA_SOURCE: 데이터 소스(예: saphana).
DISPLAY_NAME: 전송 구성의 표시 이름입니다. 데이터 전송 이름은 나중에 수정해야 할 경우를 대비해 간편하게 전송을 식별할 수 있는 값이면 됩니다.
DATASET. 전송 구성의 대상 데이터 세트입니다.
PARAMETERS: JSON 형식으로 생성된 전송 구성의 매개변수. 예를 들면 --params='{"param":"param_value"}'입니다. 다음은 Salesforce Marketing Cloud 전송을 위한 파라미터입니다.

connector.subdomain: API 하위 도메인입니다.
connector.instance: API 인스턴스 값입니다.
connector.authentication.oauth.clientId: OAuth 클라이언트의 앱 ID 이름입니다.
connector.authentication.oauth.clientSecret: OAuth 클라이언트의 앱 비밀번호입니다.



예를 들어 다음 명령어는 필요한 모든 파라미터를 사용하여 기본 프로젝트에 Salesforce Marketing Cloud 데이터 전송을 만듭니다.

  bq mk
      --transfer_config
      --target_dataset=mydataset
      --data_source=salesforce_marketing
      --display_name='My Transfer'
      --params='{"connector.subdomain": "abcd",
      "connector.instance": "x",
      "connector.authentication.oauth.clientId": "1234567890",
      "connector.authentication.oauth.clientSecret":"ABC12345"}'

--- 탭: API [https://cloud.google.com/bigquery/docs/sfmc-transfer?hl=ko#api] ---
projects.locations.transferConfigs.create [https://cloud.google.com/bigquery-transfer/docs/reference/datatransfer/rest/v1/projects.locations.transferConfigs/create?hl=ko] 메서드를 사용하고 TransferConfig [https://cloud.google.com/bigquery-transfer/docs/reference/datatransfer/rest/v1/projects.locations.transferConfigs?hl=ko#TransferConfig] 리소스의 인스턴스를 지정합니다.
전송 설정 문제 해결
Salesforce Marketing Cloud 데이터 전송을 설정하는 데 문제가 있는 경우 다음 문제 해결 단계를 시도해 보세요.
API 통합 패키지의 구성된 인증 [https://cloud.google.com/bigquery/docs/sfmc-transfer?hl=ko#sfmc-prereqs]이 서버 간으로 구성되어 있는지 확인합니다.
인증 앱이 범위에서 필요한 권한 [https://developer.salesforce.com/docs/marketing/marketing-cloud/guide/data-access-permissions.html]으로 구성되어 있는지 확인합니다.
오류 메시지
오류: invalid_grant. The client's IP address is unauthorized for this account. Allowlist the client's IP address in Marketing Cloud Administration.
해결 방법: 다음 단계 중 하나를 시도해 보세요.
Google Cloud 리소스에 사용 가능한 모든 IP 주소 [https://www.gstatic.com/ipranges/goog.json]를 사용 설정합니다.
IP 허용 목록 사용 중지 이렇게 하려면 Salesforce Marketing Cloud 애플리케이션에 로그인한 다음 설정 > 보안 설정 페이지로 이동하면 됩니다. 수정을 클릭한 다음 IP 주소로 로그인 제한(IP 허용 목록) 설정을 IP 허용 목록 사용 중지됨으로 구성합니다.
오류: INVALID_ARGUMENT. Table tableName does not exist in asset TableName
해결 방법: Salesforce Marketing Cloud 애플리케이션에 올바른 범위 권한이 구성되어 있는지 확인합니다. 자세한 내용은 Salesforce Marketing Cloud 기본 요건 [https://cloud.google.com/bigquery/docs/sfmc-transfer?hl=ko#sfmc-prereqs]을 참조하세요.
가격 책정
이 기능이 프리뷰 [https://cloud.google.com/products?hl=ko#product-launch-stages] 버전인 동안에는 Salesforce Marketing Cloud 데이터를 BigQuery로 전송하는 데 비용이 들지 않습니다.
다음 단계
BigQuery Data Transfer Service 개요는 BigQuery Data Transfer Service 소개 [https://cloud.google.com/bigquery/docs/dts-introduction?hl=ko]를 참조하세요.
전송 구성 정보 가져오기, 전송 구성 나열, 전송 실행 기록 보기를 포함한 데이터 전송 사용에 대한 정보는 전송 관리 [https://cloud.google.com/bigquery/docs/working-with-transfers?hl=ko]를 참조하세요.
교차 클라우드 작업으로 데이터를 로드 [https://cloud.google.com/bigquery/docs/load-data-using-cross-cloud-transfer?hl=ko]하는 방법을 알아보세요.
도움이 되었나요?
의견 보내기