Source URL: https://cloud.google.com/bigquery/docs/table-clones-intro

BigQuery [https://cloud.google.com/bigquery?hl=ko]
Documentation [https://cloud.google.com/bigquery/docs?hl=ko]
가이드 [https://cloud.google.com/bigquery/docs/introduction?hl=ko]
도움이 되었나요?
의견 보내기
이 페이지의 내용
테이블 클론 메타데이터 [https://cloud.google.com/bigquery/docs/table-clones-intro?hl=ko#table_clone_metadata]
테이블 클론 작업 [https://cloud.google.com/bigquery/docs/table-clones-intro?hl=ko#table_clone_operations]
스토리지 비용 [https://cloud.google.com/bigquery/docs/table-clones-intro?hl=ko#storage_costs]
제한사항 [https://cloud.google.com/bigquery/docs/table-clones-intro?hl=ko#limitations]
할당량 및 한도 [https://cloud.google.com/bigquery/docs/table-clones-intro?hl=ko#quotas_and_limits]
다음 단계 [https://cloud.google.com/bigquery/docs/table-clones-intro?hl=ko#whats_next]
테이블 클론 소개
bookmark_border
이 문서는 BigQuery의 테이블 클론에 관해 간략하게 설명합니다. 이 문서는 BigQuery [https://cloud.google.com/bigquery/docs?hl=ko] 및 BigQuery 테이블 [https://cloud.google.com/bigquery/docs/tables-intro?hl=ko]에 익숙한 사용자를 대상으로 작성되었습니다.
테이블 클론은 다른 테이블(기본 테이블이라고 함)의 경량 사본으로서 쓰기가 가능합니다. 기본 테이블과 다른 테이블 클론의 데이터를 저장하는 경우에만 요금이 청구되므로 처음에는 테이블 클론에 대한 스토리지 비용이 발생하지 않습니다. 스토리지의 청구 모델과 기본 테이블의 일부 추가 메타데이터를 제외하면 테이블 클론은 표준 테이블과 유사하여 쿼리, 복사, 삭제 등을 수행할 수 있습니다.
테이블 클론의 일반적인 사용 사례는 다음과 같습니다.
개발 및 테스트에 사용할 수 있는 프로덕션 테이블의 사본을 만듭니다.
사용자가 모든 프로덕션 데이터를 물리적으로 복사하지 않고 자체 분석 및 데이터 조작을 생성하도록 샌드박스를 만듭니다. 변경된 데이터만 청구됩니다.
테이블 클론을 만든 후 테이블 클론은 기본 테이블과 독립적으로 존재합니다. 기본 테이블 또는 테이블 클론의 변경사항은 서로에게 반영되지 않습니다.
테이블의 읽기 전용 경량 사본이 필요하면 테이블 스냅샷 [https://cloud.google.com/bigquery/docs/table-snapshots-intro?hl=ko]을 사용하는 것이 좋습니다.
테이블 클론 메타데이터
테이블 클론에는 표준 테이블과 동일한 메타데이터가 있으며 그 밖에도 다음 항목이 포함됩니다.
프로젝트, 데이터 세트, 테이블 클론 기본 테이블의 이름
테이블 클론 작업 시간: 시간 이동 [https://cloud.google.com/bigquery/docs/time-travel?hl=ko]을 사용하여 테이블 클론을 만든 경우의 시간 이동 타임스탬프입니다.
자세한 내용은 INFORMATION_SCHEMA.TABLES [https://cloud.google.com/bigquery/docs/information-schema-tables?hl=ko]를 참조하세요.
테이블 클론 작업
일반적으로 다음 작업을 포함하여 표준 테이블 [https://cloud.google.com/bigquery/docs/managing-tables?hl=ko]을 사용할 때와 동일한 방법으로 테이블 클론을 사용합니다.
쿼리
액세스 제어
메타데이터 가져오기
파티션 나누기 및 클러스터링
스키마 작업
삭제 중
하지만 테이블 클론 만들기는 표준 테이블 만들기와 다릅니다. 자세한 내용은 테이블 클론 만들기 [https://cloud.google.com/bigquery/docs/table-clones-create?hl=ko]를 참조하세요.
스토리지 비용
스토리지 비용 [https://cloud.google.com/bigquery/pricing?hl=ko#storage]이 테이블 클론에 적용되지만 BigQuery는 다른 테이블에 아직 청구되지 않은 테이블 클론의 데이터에 대해서만 요금을 청구합니다.
테이블 클론을 만들면 처음에는 테이블 클론에 대한 스토리지 비용이 발생하지 않습니다.
테이블 클론에서 데이터가 추가되거나 변경되면 추가 또는 업데이트된 데이터의 스토리지에 대한 요금이 청구됩니다.
테이블 클론에도 있는 데이터가 기본 테이블에서 변경되거나 삭제되면 변경 또는 삭제된 데이터의 테이블 클론 스토리지에 대한 요금이 청구됩니다. 변경되거나 삭제된 데이터가 포함된 클론이 여러 개 있으면 가장 오래된 클론에 사용된 스토리지에 대해서만 요금이 청구됩니다.
테이블 클론이 생성된 후에 데이터를 기본 테이블에 추가하면 테이블 클론의 해당 데이터 스토리지에 대한 요금이 청구되지 않지만 기본 테이블에서의 요금은 청구됩니다.
다음 이미지에서는 기본 테이블과 테이블 클론 스토리지 요금의 차이점을 보여줍니다.
참고:
BigQuery 스토리지는 열 기반이므로 기본 테이블의 데이터를 약간만 변경해도 테이블 클론의 스토리지 비용이 크게 증가할 수 있습니다.
기본 테이블을 일부 변경하면 이 테이블의 테이블 클론에서 사용된 전체 스토리지 용량에 대한 요금이 청구될 수 있습니다. 예를 들어 클러스터링 [https://cloud.google.com/bigquery/docs/creating-clustered-tables?hl=ko#modifying-cluster-spec]으로 기본 테이블을 수정하면 자동 재클러스터링이 발생할 수 있습니다. 재클러스터링은 기본 테이블의 스토리지 블록을 재작성할 수 있으므로 기본 테이블의 스토리지가 더 이상 클론의 스토리지와 같지 않습니다. 따라서 가장 오래된 기본 테이블의 클론에 수정된 파티션의 전체 스토리지 용량이 청구됩니다.
파티션은 테이블 클론의 스토리지 비용을 줄이는 데 도움이 됩니다. 일반적으로 BigQuery는 전체 테이블 클론 대신 파티션 내에서 수정된 데이터만 복사합니다.
자세한 내용은 BigQuery 스토리지 가격 책정 [https://cloud.google.com/bigquery/pricing?hl=ko#storage]을 참조하세요.
제한사항
같은 프로젝트의 데이터 세트 간에, 다른 프로젝트의 데이터 세트 간에 테이블을 클론할 수 있습니다. 하지만 테이블 클론의 대상 데이터 세트는 클론되는 테이블과 같은 리전 [https://cloud.google.com/bigquery/docs/locations?hl=ko] 및 조직 [https://cloud.google.com/resource-manager/docs/creating-managing-organization?hl=ko]에 있어야 합니다. 예를 들어 EU 기반 데이터 세트의 테이블을 US 기반 데이터 세트에 클론할 수 없습니다.
테이블 데이터 세트의 시간 이동 [https://cloud.google.com/bigquery/docs/time-travel?hl=ko] 기간보다 오래되었기 때문에 테이블 데이터를 클론할 수 없습니다.
뷰 [https://cloud.google.com/bigquery/docs/views-intro?hl=ko] 또는 구체화된 뷰 [https://cloud.google.com/bigquery/docs/materialized-views-intro?hl=ko]는 클론을 만들 수 없습니다.
외부 테이블 [https://cloud.google.com/bigquery/docs/external-tables?hl=ko]의 클론도 만들 수 없습니다.
테이블 클론을 만들 때 기존 테이블 또는 테이블 클론을 덮어쓸 수 없습니다. 자세한 내용은 테이블 이름 지정 [https://cloud.google.com/bigquery/docs/tables?hl=ko#table_naming]을 참조하세요.
쓰기 최적화 스토리지에 데이터가 있는 테이블을 클론할 경우(최근에 스트리밍된 행의 스트리밍 버퍼 [https://cloud.google.com/bigquery/docs/streaming-data-into-bigquery?hl=ko#dataavailability]) 쓰기 최적화된 스토리지의 데이터가 테이블 클론에 포함되지 않습니다.
시간 이동 [https://cloud.google.com/bigquery/docs/time-travel?hl=ko]에 데이터가 있는 테이블을 클론할 경우 시간 이동 데이터가 테이블 클론에 포함되지 않습니다.
테이블 클론은 탐색기 창의 표준 테이블과 구분할 수 없습니다. 하지만 테이블 세부정보를 확인 [https://cloud.google.com/bigquery/docs/tables?hl=ko#get_table_information_using_information_schema]하여 표준 테이블과 테이블 클론을 알 수 있습니다. 테이블 클론 세부정보에는 표준 테이블에 없는 기본 테이블 정보 섹션이 있습니다.
클론 작업을 사용하여 기존 테이블에 데이터를 추가할 수 없습니다. 예를 들어 --append_table=true 및 --clone=true 플래그 설정을 동일한 bq cp [https://cloud.google.com/bigquery/docs/reference/bq-cli-reference?hl=ko#bq_cp] 명령어에 사용할 수는 없습니다. 테이블을 복제할 때 데이터를 추가하려면 복사 작업을 대신 사용하세요.
테이블 클론을 만들 때 해당 이름은 테이블을 만들 때와 동일한 이름 지정 규칙 [https://cloud.google.com/bigquery/docs/tables?hl=ko#table_naming]을 따라야 합니다.
테이블 클론 만들기에는 복사 작업에 대한 BigQuery 제한 [https://cloud.google.com/bigquery/quotas?hl=ko#copy_jobs]이 적용됩니다.
BigQuery가 테이블 클론을 만드는 데 걸리는 시간은 기본 스토리지가 동적으로 관리되기 때문에 실행마다 크게 다를 수 있습니다.
할당량 및 한도
테이블 클론에는 표준 테이블과 동일한 할당량 및 한도가 적용됩니다. 자세한 내용은 테이블 할당량 및 한도 [https://cloud.google.com/bigquery/quotas?hl=ko#table_limits]를 참조하세요. 또한 테이블 클론 한도 [https://cloud.google.com/bigquery/quotas?hl=ko#table_clones]가 적용됩니다.
다음 단계
테이블 클론 만들기 [https://cloud.google.com/bigquery/docs/table-clones-create?hl=ko]
도움이 되었나요?
의견 보내기