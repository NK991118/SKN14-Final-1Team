Source URL: https://cloud.google.com/bigquery/docs/display-video-transfer

BigQuery [https://cloud.google.com/bigquery?hl=ko]
Documentation [https://cloud.google.com/bigquery/docs?hl=ko]
가이드 [https://cloud.google.com/bigquery/docs/introduction?hl=ko]
도움이 되었나요?
의견 보내기
이 페이지의 내용
지원되는 보고서 [https://cloud.google.com/bigquery/docs/display-video-transfer?hl=ko#supported_reports]
지원되는 구성 데이터 [https://cloud.google.com/bigquery/docs/display-video-transfer?hl=ko#supported_configuration_data]
Display & Video 360 전송의 데이터 수집 [https://cloud.google.com/bigquery/docs/display-video-transfer?hl=ko#data-ingestion]
새로고침 기간 [https://cloud.google.com/bigquery/docs/display-video-transfer?hl=ko#refresh]
시작하기 전에 [https://cloud.google.com/bigquery/docs/display-video-transfer?hl=ko#before_you_begin]
기본 요건 [https://cloud.google.com/bigquery/docs/display-video-transfer?hl=ko#prerequisites]
Display & Video 360 ID 찾기 [https://cloud.google.com/bigquery/docs/display-video-transfer?hl=ko#find_dv_360_id]
파일 이름 프리픽스 찾기 [https://cloud.google.com/bigquery/docs/display-video-transfer?hl=ko#finding_your_filename_prefix]
Display & Video 360 전송 예약
bookmark_border
Display & Video 360용 BigQuery Data Transfer Service 커넥터를 사용하면 Display & Video 360 보고와 구성 데이터의 반복되는 로드 작업을 자동으로 예약하고 관리할 수 있습니다.
지원되는 보고서
Display & Video 360용 BigQuery Data Transfer Service는 다음과 같은 보고 옵션을 지원합니다.
데이터 전송 v2(디스플레이 및 동영상 DTv2) 파일 [https://developers.google.com/bid-manager/dtv2/reference/file-format?hl=ko]
Display & Video 360 보고서가 BigQuery 테이블 및 뷰로 변환되는 방식은 Display & Video 360 데이터 변환 [https://cloud.google.com/bigquery/docs/display-video-transformation?hl=ko]을 참조하세요.
Display & Video 360은 최대 60일 동안 데이터 전송 파일을 보관합니다.
보고 옵션 지원
반복 빈도
매일, 데이터 전송이 처음 만들어진 시간(기본값)
시간을 구성할 수 있습니다.
새로고침 범위 [https://cloud.google.com/bigquery/docs/display-video-transfer?hl=ko#refresh]
지난 2일
구성할 수 없음
최대 백필 [https://cloud.google.com/bigquery/docs/working-with-transfers?hl=ko#manually_trigger_a_transfer] 기간
최근 60일
지원되는 구성 데이터
보고 데이터 외에도 BigQuery Data Transfer Service는 Display & Video 360에서 다음 구성 데이터를 전송합니다. 구성 데이터는 Display & Video 360 API v3 [https://developers.google.com/display-video/api/reference/rest/v3?hl=ko]에서 검색됩니다.
파트너 [https://developers.google.com/display-video/api/reference/rest/v3/partners?hl=ko#resource:-partner]
광고주 [https://developers.google.com/display-video/api/reference/rest/v3/advertisers?hl=ko#resource:-advertiser]
LineItem [https://developers.google.com/display-video/api/reference/rest/v3/advertisers.lineItems?hl=ko#LineItem]
LineItemTargeting [https://developers.google.com/display-video/api/reference/rest/v3/advertisers.lineItems/bulkListAssignedTargetingOptions?hl=ko#LineItemAssignedTargetingOption]
Campaign [https://developers.google.com/display-video/api/reference/rest/v3/advertisers.campaigns?hl=ko#Campaign]
CampaignTargeting [https://developers.google.com/display-video/api/reference/rest/v3/advertisers.campaigns.targetingTypes.assignedTargetingOptions?hl=ko#AssignedTargetingOption]
InsertionOrder [https://developers.google.com/display-video/api/reference/rest/v3/advertisers.insertionOrders?hl=ko#InsertionOrder]
InsertionOrderTargeting [https://developers.google.com/display-video/api/reference/rest/v3/advertisers.insertionOrders.targetingTypes.assignedTargetingOptions?hl=ko#AssignedTargetingOption]
AdGroup [https://developers.google.com/display-video/api/reference/rest/v3/advertisers.adGroups?hl=ko#AdGroup]
AdGroupTargeting [https://developers.google.com/display-video/api/reference/rest/v3/advertisers.adGroups/bulkListAdGroupAssignedTargetingOptions?hl=ko#AdGroupAssignedTargetingOption]
AdGroupAd [https://developers.google.com/display-video/api/reference/rest/v3/advertisers.adGroupAds?hl=ko#AdGroupAd]
Creative [https://developers.google.com/display-video/api/reference/rest/v3/advertisers.creatives?hl=ko#resource:-creative]
각 구성 데이터 유형에 대한 자세한 내용은 다음 링크를 참조하세요.
파트너 정보 [https://support.google.com/displayvideo/answer/7622449?hl=ko]
광고주 만들기 [https://support.google.com/displayvideo/answer/3424070?hl=ko]
광고 항목 만들기 [https://support.google.com/displayvideo/answer/2891312?hl=ko]
캠페인 만들기 [https://support.google.com/displayvideo/answer/7205081?hl=ko]
게재 신청서 만들기 [https://support.google.com/displayvideo/answer/2696705?hl=ko]
YouTube + 파트너 광고 항목에 대한 정보 [https://support.google.com/displayvideo/answer/6274216?hl=ko]
광고 소재 관리 [https://support.google.com/displayvideo/answer/7530472?hl=ko]
Display & Video 360 전송의 데이터 수집
Display & Video 360에서 BigQuery로 데이터를 전송할 때는 데이터가 날짜별로 파티션을 나눈 BigQuery 테이블에 로드됩니다. 데이터가 로드되는 테이블 파티션은 데이터 소스의 날짜에 해당합니다. 동일한 날짜에 여러 전송을 예약하면 BigQuery Data Transfer Service가 해당 날짜의 파티션을 최신 데이터로 덮어씁니다. 동일한 일자에 전송이 여러 개 있거나 백필을 실행해도 데이터가 중복되지 않으며 다른 일자의 파티션에 영향을 주지 않습니다.
새로고침 기간
새로고침 기간은 데이터 전송이 발생할 때 데이터 전송이 데이터를 검색하는 일 수입니다. 예를 들어 새로고침 기간이 3일이고 일일 전송이 발생하는 경우 BigQuery Data Transfer Service는 소스 테이블에서 지난 3일 동안의 모든 데이터를 검색합니다. 이 예시에서 일일 전송이 발생하면 BigQuery Data Transfer Service는 현재 날짜의 소스 테이블 데이터 사본이 포함된 새 BigQuery 대상 테이블 파티션을 만든 다음 백필 실행을 자동으로 트리거하여 BigQuery 대상 테이블 파티션을 지난 2일 동안의 소스 테이블 데이터로 업데이트합니다. 자동으로 트리거된 백필 실행은 BigQuery Data Transfer Service 커넥터에서 증분 업데이트가 지원되는지 여부에 따라 BigQuery 대상 테이블을 덮어쓰거나 증분 업데이트합니다.
데이터 전송을 처음 실행하면 데이터 전송에서 새로고침 기간 내에 사용 가능한 모든 소스 데이터를 검색합니다. 예를 들어 새로고침 기간이 3일이고 데이터 전송을 처음 실행하면 BigQuery Data Transfer Service에서 3일 이내에 모든 소스 데이터를 검색합니다.
새로고침 기간은 TransferConfig.data_refresh_window_days API 필드 [https://cloud.google.com/bigquery/docs/reference/datatransfer/rest/v1/projects.locations.transferConfigs?hl=ko#TransferConfig.FIELDS.data_refresh_window_days]에 매핑됩니다.
새로고침 기간 외의 데이터(예: 이전 데이터)를 검색하거나 전송 중단 또는 불일치 문제를 해결하려면 백필 실행 [https://cloud.google.com/bigquery/docs/working-with-transfers?hl=ko#manually_trigger_a_transfer]을 시작하거나 예약하면 됩니다.
시작하기 전에
Display & Video 360 데이터 전송을 만들기 전에 다음 기본 요건 및 정보를 검토하세요.
기본 요건
BigQuery Data Transfer Service 사용 설정 [https://cloud.google.com/bigquery/docs/enable-transfer-service?hl=ko]에 필요한 모든 작업을 완료했는지 확인합니다.
Display & Video 360 데이터를 저장할 BigQuery 데이터 세트를 만듭니다 [https://cloud.google.com/bigquery/docs/datasets?hl=ko].
Display & Video 360 파트너 ID [https://support.google.com/displayvideo/answer/7622449?hl=ko] 또는 광고주 ID [https://support.google.com/displayvideo/answer/11415707?hl=ko]가 있는지 확인합니다. 파트너 ID가 계층 구조의 상위 항목입니다.
Display & Video API에서 파트너 또는 광고주 데이터에 액세스할 수 있는 읽기 권한 [https://support.google.com/displayvideo/answer/2723011?hl=ko]이 있는지 확인합니다.
조직에서 Display & Video 360 데이터 전송 v2(Display & Video 360 DTv2) 파일에 액세스할 수 있어야 합니다. 이러한 파일은 Display & Video 360팀에서 Cloud Storage 버킷에 전달합니다. Display & Video 360 DTv2 파일에 대한 액세스 요청은 Display & Video 360과 직접 계약했는지 여부에 따라 다릅니다. 두 경우 모두 추가 수수료가 부과될 수 있습니다.
Display & Video 360과 계약한 경우 Display & Video 360 지원팀에 문의 [https://support.google.com/displayvideo/answer/9026876?hl=ko]하여 Display & Video 360 DTv2 파일을 설정하세요.
Display & Video 360과 계약을 맺지 않은 경우 Display & Video 360 DTv2 파일에 액세스하려면 대행사에 문의하세요.
이 단계를 완료하면 설정이 파트너 또는 광고주용인지 여부에 따라 다음 Cloud Storage 버킷 이름 중 하나를 받게 됩니다.
gs://dcdt_-dbm_partnerPARTNER_ID
gs://dcdt_-dbm_advertiserADVERTISER_ID
참고: Google Cloud 팀은 사용자를 대신하여 Display & Video 360 DTv2 파일에 대한 액세스 권한을 생성하거나 부여할 수 없습니다. Display & Video 360 DTv2 파일에 액세스하려면 Display & Video 360 지원팀 [https://support.google.com/displayvideo/answer/9026876?hl=ko] 또는 대행사에 문의하세요.
Pub/Sub의 전송 실행 알림을 설정하려면 pubsub.topics.setIamPolicy 권한이 있어야 합니다. 자세한 내용은 BigQuery Data Transfer Service 실행 알림 [https://cloud.google.com/bigquery/docs/transfer-run-notifications?hl=ko]을 참조하세요.
Display & Video 360 ID 찾기
Display & Video 360 ID를 검색하려면 Google Cloud 콘솔의 Cloud Storage 버킷 페이지로 이동하여 Display & Video 360 데이터 전송 Cloud Storage 버킷의 파일을 조사합니다. Display & Video 360 ID는 제공된 Cloud Storage 버킷의 파일을 일치시키는 데 사용됩니다. ID는 파일 이름에 포함되며 Cloud Storage 버킷 이름에는 포함되지 않습니다. 예를 들면 다음과 같습니다.
이름이 dbm_partner123_activity_*인 파일에서 ID는 123입니다.
이름이 dbm_advertiser567_activity_*인 파일에서 ID는 567입니다.
파일 이름 프리픽스 찾기
드물지만 Cloud Storage 버킷에 있는 파일의 이름이 Google Marketing Platform 서비스팀에서 사용자에게 설정한 커스텀 비표준 파일 이름인 경우가 있습니다. 예를 들면 다음과 같습니다.
이름이 dbm_partner123456custom_activity_*인 파일에서 프리픽스는 dbm_partner123456custom입니다.
파일 이름 프리픽스와 관련된 지원이 필요하면 Display & Video 360 지원팀 [https://support.google.com/displayvideo/answer/9026876?hl=ko]에 문의하세요.
Display & Video 360 데이터 전송 설정
다음 옵션 중 하나를 선택합니다.
--- 탭: 콘솔 [https://cloud.google.com/bigquery/docs/display-video-transfer?hl=ko#%EC%BD%98%EC%86%94] ---
Google Cloud 콘솔의 데이터 전송 페이지로 이동합니다.

데이터 전송으로 이동 [https://console.cloud.google.com/bigquery/transfers?hl=ko] 
add 전송 만들기를 클릭합니다.
전송 만들기 페이지에서 다음을 수행합니다.


소스 유형 섹션의 소스에서 Display & Video 360를 선택합니다.
전송 구성 이름 섹션의 표시 이름에 데이터 전송 이름을 입력합니다. 나중에 전송을 수정해야 할 경우를 대비해 전송 이름은 전송을 식별할 수 있는 값이면 됩니다.

일정 옵션 섹션에서 다음을 수행합니다.


지금 시작 또는 설정 시간에 시작을 선택한 후 시작일과 실행 시간을 제공합니다.
반복 빈도에서 데이터 전송을 실행할 빈도 옵션을 선택합니다. 일을 선택한 경우 UTC로 유효한 시간을 제공합니다.

대상 설정 섹션의 대상 데이터 세트 메뉴에서 데이터를 저장하기 위해 만든 데이터 세트를 선택합니다.
데이터 소스 세부정보 섹션에서 다음을 수행합니다.


DV360 DTV2 Cloud Storage 버킷 필드에 Display & Video 360 DTv2 파일이 포함된 Cloud Storage 버킷을 입력합니다. 이 버킷을 설정해야 하는 경우 Display & Video 360 지원팀 [https://support.google.com/displayvideo/answer/9026876?hl=ko]에 문의하세요.
DV360 파트너/광고주 ID 필드에 파트너 ID [https://support.google.com/displayvideo/answer/7622449?hl=ko] 또는 광고주 ID [https://support.google.com/displayvideo/answer/11415707?hl=ko]를 입력합니다.
(선택사항) 알림 옵션 섹션에서 다음을 수행합니다.
전환을 클릭하여 이메일 알림을 사용 설정합니다. 이 옵션을 사용 설정하면 전송 실행이 실패할 때 전송 관리자에게 이메일 알림이 발송됩니다.
전환 버튼을 클릭하여 Pub/Sub 알림을 사용 설정합니다. Cloud Pub/Sub 주제 선택에서 주제 [https://cloud.google.com/pubsub/docs/overview?hl=ko#types] 이름을 선택하거나 주제 만들기를 클릭합니다. 이 옵션은 전송에 대한 Pub/Sub 실행 알림 [https://cloud.google.com/bigquery/docs/transfer-run-notifications?hl=ko]을 구성합니다.


저장을 클릭합니다.

--- 탭: bq [https://cloud.google.com/bigquery/docs/display-video-transfer?hl=ko#bq] ---
bq mk 명령어를 입력하고 전송 생성 플래그 --transfer_config를 지정합니다. 다음 플래그는 필수입니다.


--data_source
--target_dataset
--display_name
--params


  bq mk --transfer_config \
  --project_id=PROJECT_ID \
  --target_dataset=DATASET \
  --display_name=NAME \
  --params='PARAMETERS' \
  --data_source=DATA_SOURCE

각 항목의 의미는 다음과 같습니다.


PROJECT_ID: 프로젝트 ID
DATASET. 데이터 전송 구성의 대상 데이터 세트
NAME: 데이터 전송 구성의 표시 이름. 전송 이름은 나중에 수정해야 할 경우를 대비해 간편하게 전송을 식별할 수 있는 값이면 됩니다.
PARAMETERS: JSON 형식으로 생성된 데이터 전송 구성의 파라미터.
예를 들면 --params='{"param":"param_value"}'입니다. Display & Video 360 전송의 경우 bucket 및 displayvideo_id 매개변수가 필요합니다. file_name_prefix 매개변수는 선택사항이며 커스텀 파일 이름인 경우에만 드물게 사용됩니다.
DATA_SOURCE: 데이터 소스 — displayvideo


예를 들어 다음 명령어는 Display & Video 360 ID 123456, Cloud Storage 버킷 dcdt_-dbm_partner123456, 대상 데이터 세트 mydataset를 사용하여 My Transfer라는 Display & Video 360 데이터 전송을 만듭니다.

기본 프로젝트에 데이터 전송이 생성됩니다.

  bq mk --transfer_config \
  --target_dataset=mydataset \
  --display_name='My Transfer' \
  --params='{"bucket":"dcdt_-dbm_partner123456","displayvideo_id": "123456","file_name_prefix":"YYY"}' \
  --data_source=displayvideo

명령어를 실행한 후 다음과 같은 메시지가 수신됩니다.

[URL omitted] Please copy and paste the above URL into your web browser and
follow the instructions to retrieve an authentication code.

메시지 안내를 따라 명령줄에 인증 코드를 붙여넣습니다.

--- 탭: API [https://cloud.google.com/bigquery/docs/display-video-transfer?hl=ko#api] ---
projects.locations.transferConfigs.create [https://cloud.google.com/bigquery/docs/reference/datatransfer/rest/v1/projects.locations.transferConfigs/create?hl=ko] 메서드를 사용하고 TransferConfig [https://cloud.google.com/bigquery/docs/reference/datatransfer/rest/v1/projects.locations.transferConfigs?hl=ko#TransferConfig] 리소스의 인스턴스를 지정합니다.
데이터 쿼리
BigQuery로 전송되는 데이터는 수집 시간으로 파티션을 나눈 테이블에 기록됩니다. 자세한 내용은 파티션을 나눈 테이블 소개 [https://cloud.google.com/bigquery/docs/partitioned-tables?hl=ko]를 참조하세요.
테이블을 직접 쿼리하는 대신 자동 생성된 뷰를 쿼리하는 것이 좋습니다. 그러나 테이블을 직접 쿼리하려면 쿼리에서 _PARTITIONTIME 유사 열을 사용해야 합니다. 자세한 내용은 파티션을 나눈 테이블 쿼리 [https://cloud.google.com/bigquery/docs/querying-partitioned-tables?hl=ko]를 참조하세요.
도움이 되었나요?
의견 보내기