Source URL: https://cloud.google.com/bigquery/docs/repositories

BigQuery [https://cloud.google.com/bigquery?hl=ko]
Documentation [https://cloud.google.com/bigquery/docs?hl=ko]
가이드 [https://cloud.google.com/bigquery/docs/introduction?hl=ko]
도움이 되었나요?
의견 보내기
이 페이지의 내용
시작하기 전에 [https://cloud.google.com/bigquery/docs/repositories?hl=ko#before-you-begin]
필요한 역할 [https://cloud.google.com/bigquery/docs/repositories?hl=ko#required-roles]
저장소 만들기 [https://cloud.google.com/bigquery/docs/repositories?hl=ko#create-repository]
서드 파티 저장소에 연결 [https://cloud.google.com/bigquery/docs/repositories?hl=ko#connect-third-party]
SSH를 통해 원격 저장소 연결 [https://cloud.google.com/bigquery/docs/repositories?hl=ko#connect-ssh]
HTTPS를 통해 원격 저장소 연결 [https://cloud.google.com/bigquery/docs/repositories?hl=ko#connect-https]
원격 저장소 연결 수정 [https://cloud.google.com/bigquery/docs/repositories?hl=ko#edit-connection]
저장소 공유 [https://cloud.google.com/bigquery/docs/repositories?hl=ko#share-repository]
저장소 만들기
bookmark_border
프리뷰
이 제품 또는 기능에는 서비스별 약관 [https://cloud.google.com/terms/service-terms?hl=ko#1]의 일반 서비스 약관 섹션에 있는 'GA 이전 제공 서비스 약관'이 적용됩니다. GA 이전 제품 및 기능은 '있는 그대로' 제공되며 지원이 제한될 수 있습니다. 자세한 내용은 출시 단계 설명 [https://cloud.google.com/products?hl=ko#product-launch-stages]을 참조하세요.
참고: 이 프리뷰 기능과 관련된 의견을 제공하거나 궁금한 점이 있으면 bigquery-repositories-feedback@google.com [mailto:%20bigquery-repositories-feedback@google.com]으로 문의하세요.
이 문서에서는 다음 작업을 비롯하여 BigQuery에서 저장소를 사용하는 방법을 보여줍니다.
저장소 만들기
저장소 삭제
저장소 공유
선택적으로 BigQuery 저장소를 서드 파티 저장소에 연결
시작하기 전에
Sign in to your Google Cloud account. If you're new to Google Cloud, create an account [https://console.cloud.google.com/freetrial?hl=ko] to evaluate how our products perform in real-world scenarios. New customers also get $300 in free credits to run, test, and deploy workloads.
In the Google Cloud console, on the project selector page, select or create a Google Cloud project.
Note: If you don't plan to keep the resources that you create in this procedure, create a project instead of selecting an existing project. After you finish these steps, you can delete the project, removing all resources associated with the project.
Go to project selector [https://console.cloud.google.com/projectselector2/home/dashboard?hl=ko]
Verify that billing is enabled for your Google Cloud project [https://cloud.google.com/billing/docs/how-to/verify-billing-enabled?hl=ko#confirm_billing_is_enabled_on_a_project].
Enable the BigQuery and Dataform APIs.
Enable the APIs [https://console.cloud.google.com/flows/enableapi?apiid=bigquery.googleapis.com%2Cdataform.googleapis.com&hl=ko]
필요한 역할
저장소 및 작업공간을 사용하는 데 필요한 권한을 얻으려면 관리자에게 저장소 및 작업공간에 대한 다음 IAM 역할을 부여해 달라고 요청하세요.
공유 저장소 만들기 및 관리: 코드 소유자 [https://cloud.google.com/iam/docs/roles-permissions/dataform?hl=ko#dataform.codeOwner](roles/dataform.codeOwner)
공유 저장소에서 작업공간 만들기 및 삭제: 코드 편집기 [https://cloud.google.com/iam/docs/roles-permissions/dataform?hl=ko#dataform.codeEditor](roles/dataform.codeEditor)
공유 저장소의 작업공간에서 파일 만들기, 수정, 버전 제어: 코드 편집기 [https://cloud.google.com/iam/docs/roles-permissions/dataform?hl=ko#dataform.codeEditor](roles/dataform.codeEditor)
공유 저장소에서 작업공간 및 파일 보기: 코드 뷰어 [https://cloud.google.com/iam/docs/roles-permissions/dataform?hl=ko#dataform.codeViewer](roles/dataform.codeViewer)
비공개 저장소의 작업공간 및 파일을 사용한 모든 작업을 포함하여 비공개 저장소를 만들고 관리하기: 코드 생성자 [https://cloud.google.com/iam/docs/roles-permissions/dataform?hl=ko#dataform.codeCreator](roles/dataform.codeCreator)
역할 부여에 대한 자세한 내용은 프로젝트, 폴더, 조직에 대한 액세스 관리 [https://cloud.google.com/iam/docs/granting-changing-revoking-access?hl=ko]를 참조하세요.
커스텀 역할 [https://cloud.google.com/iam/docs/creating-custom-roles?hl=ko]이나 다른 사전 정의된 역할 [https://cloud.google.com/iam/docs/roles-overview?hl=ko#predefined]을 통해 필요한 권한을 얻을 수도 있습니다.
저장소에 코드 편집자 역할이 있는 주 구성원은 저장소의 모든 작업공간을 수정할 수 있습니다.
생성한 비공개 저장소는 프로젝트 수준에서 BigQuery 관리자 또는 BigQuery Studio 관리자 역할을 부여받은 주체에게 계속 표시됩니다. 이러한 주체는 다른 사용자와 비공개 저장소를 공유할 수 있습니다.
저장소 만들기
BigQuery 저장소를 만들려면 다음 단계를 따르세요.
Google Cloud 콘솔에서 BigQuery 페이지로 이동합니다.
BigQuery로 이동 [https://console.cloud.google.com/bigquery?hl=ko]
탐색기 창에서 저장소 폴더를 클릭합니다.
편집기에서 저장소 추가를 클릭합니다.
저장소 만들기 창의 저장소 ID 필드에 고유한 ID를 입력합니다.
ID에는 숫자, 문자, 하이픈, 밑줄만 포함할 수 있습니다.
리전 드롭다운 목록에서 저장소와 콘텐츠를 저장할 BigQuery 리전을 선택합니다. 현재 위치에서 가장 가까운 BigQuery 리전을 선택하세요.
사용 가능한 BigQuery 리전 목록은 BigQuery Studio 위치 [https://cloud.google.com/bigquery/docs/locations?hl=ko#bqstudio-loc]를 참고하세요. 저장소 리전은 BigQuery 데이터 세트의 위치와 일치하지 않아도 됩니다.
만들기를 클릭합니다.
서드 파티 저장소에 연결
이 섹션에서는 BigQuery 저장소를 원격 저장소에 연결하는 방법을 보여줍니다. 저장소를 연결한 후에는 저장소에 포함된 작업공간의 파일에 대해 Git 작업을 실행할 수 있습니다. 예를 들어 원격 저장소에서 업데이트를 가져오고 원격 저장소에 변경사항을 푸시합니다.
연결하는 각 원격 저장소에 대해 전용 BigQuery 저장소를 만드는 것이 좋습니다. 매핑을 명확하게 하기 위해 BigQuery 저장소에 원격 저장소와 비슷한 이름을 지정합니다.
HTTPS 또는 SSH를 통해 원격 저장소를 연결할 수 있습니다. 원격 저장소가 공개 인터넷에 공개되어 있지 않은 경우(예: 방화벽 뒤에 있는 경우) BigQuery 저장소를 원격 저장소에 연결할 수 없습니다. 다음 표에는 지원되는 Git 제공업체와 해당 저장소에 사용할 수 있는 연결 방법이 나와 있습니다.
Git 제공업체 연결 방법
Azure DevOps 서비스 SSH
Bitbucket SSH
GitHub SSH 또는 HTTPS
GitLab SSH 또는 HTTPS
중요: dataform.restrictGitRemotes 정책에서 허용되지 않은 원격 Git 저장소에 연결된 BigQuery 저장소를 만들려면 먼저 정책의 allowedValues 목록에 해당 원격 Git 저장소를 추가한 후 새 BigQuery 저장소를 만들어 원격 저장소에 연결합니다. 자세한 내용은 원격 저장소 제한 [https://cloud.google.com/dataform/docs/restrict-git-remotes?hl=ko]을 참조하세요.
SSH를 통해 원격 저장소 연결
SSH를 통해 원격 저장소를 연결하려면 SSH 키와 Secret Manager 보안 비밀을 생성해야 합니다. SSH 키는 공개 SSH 키와 비공개 SSH 키로 구성됩니다. 공개 SSH 키를 Git 제공업체와 공유하고 비공개 SSH 키로 Secret Manager 보안 비밀을 만들어야 합니다. 그런 다음 기본 BigQuery 서비스 계정과 보안 비밀을 공유합니다.
BigQuery는 비공개 SSH 키가 포함된 보안 비밀을 사용하여 Git 제공업체에 로그인하여 사용자 대신 변경사항을 커밋합니다. BigQuery는 사용자의 Google Cloud 이메일 주소를 사용하여 이러한 커밋을 만들어 각 커밋을 알 수 있습니다.
경고: 생성한 비공개 SSH 키는 저장소를 사용하는 모든 BigQuery 사용자와 공유됩니다. Git 제공업체에서 머신 사용자를 만들고 BigQuery에서 사용할 원격 Git 저장소에 대한 액세스를 제한하는 것이 좋습니다. Google Cloud 프로젝트 소유자 및 코드 소유자 [https://cloud.google.com/bigquery/docs/access-control?hl=ko] 역할이 있는 BigQuery 사용자만 키를 사용하여 저장소를 연결할 수 있습니다. BigQuery 사용자는 키 자체를 볼 수 없습니다.
SSH를 통해 원격 저장소를 BigQuery 저장소에 연결하려면 다음 단계를 따르세요.
Git 제공업체에서 다음을 수행합니다.
--- 탭: Azure DevOps 서비스 [https://cloud.google.com/bigquery/docs/repositories?hl=ko#azure-devops-%EC%84%9C%EB%B9%84%EC%8A%A4] ---
Azure DevOps 서비스에서 비공개 SSH 키를 만듭니다 [https://learn.microsoft.com/en-us/azure/devops/repos/git/use-ssh-keys-to-authenticate?view=azure-devops#step-1-create-your-ssh-keys].
Azure DevOps 서비스 저장소에 공개 SSH 키를 업로드 [https://learn.microsoft.com/en-us/azure/devops/repos/git/use-ssh-keys-to-authenticate?view=azure-devops#step-2-add-the-public-key-to-azure-devops]합니다.

--- 탭: Bitbucket [https://cloud.google.com/bigquery/docs/repositories?hl=ko#bitbucket] ---
Bitbucket에서 비공개 SSH 키를 만듭니다 [https://support.atlassian.com/bitbucket-cloud/docs/configure-ssh-and-two-step-verification/].
Bitbucket 저장소에 공개 SSH 키를 업로드 [https://support.atlassian.com/bitbucket-cloud/docs/configure-ssh-and-two-step-verification/]합니다.

--- 탭: GitHub [https://cloud.google.com/bigquery/docs/repositories?hl=ko#github] ---
GitHub에서 기존 SSH 키를 확인 [https://docs.github.com/en/authentication/connecting-to-github-with-ssh/checking-for-existing-ssh-keys]합니다.
기존 SSH 키가 없거나 새 키를 사용하려면 비공개 SSH 키를 만드세요 [https://docs.github.com/en/authentication/connecting-to-github-with-ssh/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent].
GitHub 공개 SSH 키를 GitHub 저장소에 업로드 [https://docs.github.com/en/authentication/connecting-to-github-with-ssh/adding-a-new-ssh-key-to-your-github-account]합니다.

--- 탭: GitLab [https://cloud.google.com/bigquery/docs/repositories?hl=ko#gitlab] ---
GitLab에서 비공개 SSH 키를 만듭니다 [https://docs.gitlab.com/ee/user/ssh.html#generate-an-ssh-key-pair].
GitLab 저장소에 GitLab 공개 SSH 키를 업로드 [https://docs.gitlab.com/ee/user/ssh.html#add-an-ssh-key-to-your-gitlab-account]합니다.
Secret Manager에서 보안 비밀을 만들고 [https://cloud.google.com/secret-manager/docs/creating-and-accessing-secrets?hl=ko#create] 비공개 SSH 키를 보안 비밀 값으로 붙여넣습니다. 비공개 SSH 키는 ~/.ssh/id_ed25519와 유사한 파일에 저장해야 합니다. 나중에 찾을 수 있도록 보안 비밀에 이름을 지정합니다.
기본 Dataform 서비스 계정에 보안 비밀에 대한 액세스 권한을 부여 [https://cloud.google.com/secret-manager/docs/manage-access-to-secrets?hl=ko]합니다.
기본 Dataform 서비스 계정의 형식은 다음과 같습니다.
service-
PROJECT_NUMBER@gcp-sa-dataform.iam.gserviceaccount.com
서비스 계정에 roles/secretmanager.secretAccessor [https://cloud.google.com/secret-manager/docs/access-control?hl=ko#secretmanager.secretAccessor] 역할을 부여합니다.
Google Cloud 콘솔에서 BigQuery 페이지로 이동합니다.
BigQuery로 이동 [https://console.cloud.google.com/bigquery?hl=ko]
탐색기 창에서 저장소 폴더를 펼칩니다.
원격 저장소에 연결할 BigQuery 저장소를 선택합니다.
편집기에서 구성 탭을 선택합니다.
Git과 연결을 클릭합니다.
원격 저장소에 연결 창에서 SSH 라디오 버튼을 선택합니다.
원격 Git 저장소 URL 필드에 .git로 끝나는 원격 Git 저장소 URL을 입력합니다.
원격 Git 저장소의 URL은 다음 형식 중 하나여야 합니다.
절대 URL: ssh://git@{host_name}[:{port}]/{repository_path}. port는 선택사항입니다.
SCP와 같은 URL: git@{host_name}:{repository_path}
기본 원격 브랜치 이름 필드에 원격 Git 저장소의 기본 브랜치 이름을 입력합니다.
보안 비밀 드롭다운에서 SSH 비공개 키가 포함된 보안 비밀을 선택합니다.
SSH 공개 호스트 키 값 필드에 Git 제공업체의 공개 호스트 키를 입력합니다.
--- 탭: Azure DevOps 서비스 [https://cloud.google.com/bigquery/docs/repositories?hl=ko#azure-devops-%EC%84%9C%EB%B9%84%EC%8A%A4] ---
SSH 공개 호스트 키 값은 known_hosts 파일 형식이어야 합니다.
값에는 base64 형식으로 인코딩된 알고리즘과 공개 키가 포함되어야 하지만 다음 형식처럼 호스트 이름이나 IP는 포함되지 않습니다.
ALGORITHM BASE64_KEY_VALUE

Azure DevOps Services 공개 호스트 키를 검색하려면 터미널에서 ssh-keyscan -t rsa ssh.dev.azure.com 명령어를 실행합니다.

--- 탭: Bitbucket [https://cloud.google.com/bigquery/docs/repositories?hl=ko#bitbucket] ---
SSH 공개 호스트 키 값은 known_hosts 파일 형식이어야 합니다.
값에는 base64 형식으로 인코딩된 알고리즘과 공개 키가 포함되어야 하지만 다음 형식처럼 호스트 이름이나 IP는 포함되지 않습니다.
ALGORITHM BASE64_KEY_VALUE

Bitbucket 공개 호스트 키를 가져오려면 SSH 구성 [https://support.atlassian.com/bitbucket-cloud/docs/configure-ssh-and-two-step-verification/]을 참고하세요.

--- 탭: GitHub [https://cloud.google.com/bigquery/docs/repositories?hl=ko#github] ---
SSH 공개 호스트 키 값은 known_hosts 파일 형식이어야 합니다.
값에는 base64 형식으로 인코딩된 알고리즘과 공개 키가 포함되어야 하지만 다음 형식처럼 호스트 이름이나 IP는 포함되지 않습니다.
ALGORITHM BASE64_KEY_VALUE

GitHub 공개 호스트 키를 가져오려면 GitHub의 SSH 키 지문 [https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/githubs-ssh-key-fingerprints]을 참고하세요.

--- 탭: GitLab [https://cloud.google.com/bigquery/docs/repositories?hl=ko#gitlab] ---
SSH 공개 호스트 키 값은 known_hosts 파일 형식이어야 합니다.
값에는 base64 형식으로 인코딩된 알고리즘과 공개 키가 포함되어야 하지만 다음 형식처럼 호스트 이름이나 IP는 포함되지 않습니다.
ALGORITHM BASE64_KEY_VALUE

GitLab 공개 호스트 키를 가져오려면 SSH known_hosts 항목 [https://docs.gitlab.com/ee/user/gitlab_com/#ssh-known_hosts-entries]을 참고하세요.
연결을 클릭합니다.
HTTPS를 통해 원격 저장소 연결
HTTPS를 통해 원격 저장소를 연결하려면 개인 액세스 토큰으로 Secret Manager 보안 비밀을 만들고 기본 BigQuery 서비스 계정과 보안 비밀을 공유해야 합니다.
그러면 BigQuery가 액세스 토큰을 사용하여 Git 제공업체에 로그인하여 사용자 대신 변경사항을 커밋합니다. BigQuery는 사용자의 Google Cloud 이메일 주소를 사용하여 이러한 커밋을 만들어 각 커밋을 알 수 있습니다.
경고: 생성한 비공개 HTTPS 토큰은 저장소를 사용하는 모든 BigQuery 사용자 간에 공유됩니다. Git 제공업체에서 머신 사용자를 만들고 BigQuery에서 사용할 원격 Git 저장소에 대한 액세스를 제한하는 것이 좋습니다. Google Cloud 프로젝트 소유자 및 코드 소유자 [https://cloud.google.com/bigquery/docs/access-control?hl=ko] 역할이 있는 BigQuery 사용자만 토큰을 사용하여 저장소를 연결할 수 있습니다. BigQuery 사용자는 토큰 자체를 볼 수 없습니다.
HTTPS를 통해 원격 저장소를 BigQuery 저장소에 연결하려면 다음 단계를 따르세요.
Git 제공업체에서 다음을 수행합니다.
--- 탭: GitHub [https://cloud.google.com/bigquery/docs/repositories?hl=ko#github] ---
GitHub에서 세분화된 개인 액세스 토큰 [https://github.blog/2022-10-18-introducing-fine-grained-personal-access-tokens-for-github/] 또는 기본 개인 액세스 토큰 [https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/creating-a-personal-access-token#about-personal-access-tokens]을 만듭니다.


세분화된 GitHub 개인 액세스 토큰의 경우 다음을 실행합니다.



저장소 액세스를 선택한 저장소만으로 선택한 다음 연결할 저장소를 선택합니다.
저장소 콘텐츠에 대한 읽기 및 쓰기 액세스 권한을 부여합니다.
필요에 따라 토큰 만료 시간을 설정합니다.



기본 GitHub 개인 액세스 토큰의 경우 다음을 실행합니다.



BigQuery에 repo 권한을 부여합니다.
필요에 따라 토큰 만료 시간을 설정합니다.

조직에서 SAML 싱글 사인온(SSO)을 사용하는 경우 토큰을 승인 [https://docs.github.com/en/enterprise-cloud@latest/authentication/authenticating-with-saml-single-sign-on/authorizing-a-personal-access-token-for-use-with-saml-single-sign-on]합니다.

--- 탭: GitLab [https://cloud.google.com/bigquery/docs/repositories?hl=ko#gitlab] ---
GitLab에서 GitLab 개인 액세스 토큰 [https://docs.gitlab.com/ee/user/profile/personal_access_tokens.html]을 만듭니다.
토큰 이름을 dataform으로 지정합니다. 이는 필수입니다.
BigQuery에 api, read_repository, write_repository 권한을 부여합니다.
필요에 따라 토큰 만료 시간을 설정합니다.
Secret Manager에서 원격 저장소의 개인 액세스 토큰이 포함된 보안 비밀을 만듭니다 [https://cloud.google.com/secret-manager/docs/creating-and-accessing-secrets?hl=ko#create].
기본 Dataform 서비스 계정에 보안 비밀에 대한 액세스 권한을 부여 [https://cloud.google.com/secret-manager/docs/manage-access-to-secrets?hl=ko]합니다.
기본 Dataform 서비스 계정의 형식은 다음과 같습니다.
service-
PROJECT_NUMBER@gcp-sa-dataform.iam.gserviceaccount.com
서비스 계정에 roles/secretmanager.secretAccessor [https://cloud.google.com/secret-manager/docs/access-control?hl=ko#secretmanager.secretAccessor] 역할을 부여합니다.
Google Cloud 콘솔에서 BigQuery 페이지로 이동합니다.
BigQuery로 이동 [https://console.cloud.google.com/bigquery?hl=ko]
탐색기 창에서 저장소 폴더를 펼칩니다.
원격 저장소에 연결할 BigQuery 저장소를 선택합니다.
편집기에서 구성 탭을 선택합니다.
Git과 연결을 클릭합니다.
원격 저장소에 연결 창에서 HTTPS 라디오 버튼을 선택합니다.
원격 Git 저장소 URL 필드에 .git로 끝나는 원격 Git 저장소 URL을 입력합니다.
원격 Git 저장소의 URL에 사용자 이름이나 비밀번호가 포함될 수 없습니다.
기본 원격 브랜치 이름 필드에 원격 Git 저장소의 기본 브랜치 이름을 입력합니다.
보안 비밀 드롭다운에서 개인 액세스 토큰이 포함된 보안 비밀을 선택합니다.
연결을 클릭합니다.
원격 저장소 연결 수정
BigQuery 저장소와 원격 Git 저장소 간의 연결을 수정하려면 다음 단계를 따르세요.
Google Cloud 콘솔에서 BigQuery 페이지로 이동합니다.
BigQuery로 이동 [https://console.cloud.google.com/bigquery?hl=ko]
탐색기 창에서 저장소 폴더를 펼칩니다.
연결을 수정할 BigQuery 저장소를 선택합니다.
편집기에서 구성 탭을 선택합니다.
저장소 페이지에서 Git 연결 수정을 클릭합니다.
연결 설정을 수정합니다.
업데이트를 클릭합니다.
저장소 공유
저장소를 공유하려면 다음 단계를 따르세요.
Google Cloud 콘솔에서 BigQuery 페이지로 이동합니다.
BigQuery로 이동 [https://console.cloud.google.com/bigquery?hl=ko]
탐색기 창에서 저장소 폴더를 클릭합니다.
Git 저장소 창에서 공유할 저장소를 선택합니다.
more_vert 작업 옵션을 클릭한 다음 공유를 클릭합니다.
공유 권한 창에서 사용자/그룹 추가를 클릭합니다.
사용자/그룹 추가 창의 새 주 구성원 필드에 쉼표로 구분된 사용자 또는 그룹 이름을 하나 이상 입력합니다.
역할 필드에서 새 주 구성원에게 할당할 역할을 선택합니다.
저장을 클릭합니다.
저장소 삭제
저장소 및 저장소의 모든 콘텐츠를 삭제하려면 다음 단계를 따르세요.
Google Cloud 콘솔에서 BigQuery 페이지로 이동합니다.
BigQuery로 이동 [https://console.cloud.google.com/bigquery?hl=ko]
탐색기 창에서 저장소 폴더를 클릭합니다.
Git 저장소 창에서 삭제할 저장소를 선택합니다.
more_vert 작업 옵션을 클릭한 다음 삭제를 클릭합니다.
삭제를 클릭합니다.
다음 단계
작업공간을 만드는 방법 [https://cloud.google.com/bigquery/docs/workspaces?hl=ko] 알아보기
도움이 되었나요?
의견 보내기