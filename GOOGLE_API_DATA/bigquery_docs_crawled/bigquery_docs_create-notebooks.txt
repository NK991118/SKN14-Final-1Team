Source URL: https://cloud.google.com/bigquery/docs/create-notebooks

BigQuery [https://cloud.google.com/bigquery?hl=ko]
Documentation [https://cloud.google.com/bigquery/docs?hl=ko]
가이드 [https://cloud.google.com/bigquery/docs/introduction?hl=ko]
도움이 되었나요?
의견 보내기
이 페이지의 내용
시작하기 전에 [https://cloud.google.com/bigquery/docs/create-notebooks?hl=ko#before_you_begin]
필수 권한 [https://cloud.google.com/bigquery/docs/create-notebooks?hl=ko#required_permissions]
노트북 만들기 [https://cloud.google.com/bigquery/docs/create-notebooks?hl=ko#create_notebooks]
코드 애셋의 기본 리전 설정 [https://cloud.google.com/bigquery/docs/create-notebooks?hl=ko#set_the_default_region_for_code_assets]
BigQuery 편집기에서 노트북 만들기 [https://cloud.google.com/bigquery/docs/create-notebooks?hl=ko#create-notebook-console]
노트북 만들기
bookmark_border
이 문서에서는 BigQuery에서 Colab Enterprise 노트북 [https://cloud.google.com/bigquery/docs/notebooks-introduction?hl=ko]을 만드는 방법을 설명합니다. 노트북은 Dataform [https://cloud.google.com/dataform/docs/overview?hl=ko]으로 구동되는 BigQuery Studio [https://cloud.google.com/bigquery/docs/query-overview?hl=ko#bigquery-studio] 코드 애셋입니다.
시작하기 전에
Sign in to your Google Cloud account. If you're new to Google Cloud, create an account [https://console.cloud.google.com/freetrial?hl=ko] to evaluate how our products perform in real-world scenarios. New customers also get $300 in free credits to run, test, and deploy workloads.
In the Google Cloud console, on the project selector page, select or create a Google Cloud project.
Note: If you don't plan to keep the resources that you create in this procedure, create a project instead of selecting an existing project. After you finish these steps, you can delete the project, removing all resources associated with the project.
Go to project selector [https://console.cloud.google.com/projectselector2/home/dashboard?hl=ko]
Verify that billing is enabled for your Google Cloud project [https://cloud.google.com/billing/docs/how-to/verify-billing-enabled?hl=ko#confirm_billing_is_enabled_on_a_project].
Enable the BigQuery API.
Enable the API [https://console.cloud.google.com/flows/enableapi?apiid=bigquery.googleapis.com&hl=ko]
필수 권한
노트북 생성, 수정, 보기를 위해 적합한 권한을 설정합니다.
Dataform 관리자(roles/dataform.admin) 역할 [https://cloud.google.com/dataform/docs/access-control?hl=ko#dataform.admin]이 있는 모든 사용자는 프로젝트에 생성된 모든 노트북에 대해 소유자 액세스 권한을 갖습니다.
BigQuery Identity and Access Management(IAM)에 대한 자세한 내용은 IAM으로 액세스 제어 [https://cloud.google.com/bigquery/docs/access-control?hl=ko]를 참조하세요.
노트북 만들기 권한
노트북을 만들고 실행하려면 다음 IAM 권한이 필요합니다.
resourcemanager.projects.get
resourcemanager.projects.list
bigquery.config.get
bigquery.jobs.create
bigquery.readsessions.create
bigquery.readsessions.getData
bigquery.readsessions.update
resourcemanager.projects.get
resourcemanager.projects.list
dataform.locations.get
dataform.locations.list
dataform.repositories.create
참고: dataform.repositories.create 권한이 있는 사용자는 기본 Dataform 서비스 계정과 해당 서비스 계정에 부여된 모든 권한을 사용하여 코드를 실행할 수 있습니다. 자세한 내용은 Dataform 권한의 보안 고려사항 [https://cloud.google.com/dataform/docs/access-control?hl=ko#security-considerations-permissions]을 참조하세요.
dataform.repositories.list
dataform.collections.create
dataform.collections.list
aiplatform.notebookRuntimeTemplates.apply
aiplatform.notebookRuntimeTemplates.get
aiplatform.notebookRuntimeTemplates.list
aiplatform.notebookRuntimeTemplates.getIamPolicy
aiplatform.notebookRuntimes.assign
aiplatform.notebookRuntimes.get
aiplatform.notebookRuntimes.list
aiplatform.operations.list
이러한 권한은 다음 IAM 역할로부터 얻을 수 있습니다.
BigQuery 읽기 세션 사용자(roles/bigquery.readSessionUser) [https://cloud.google.com/bigquery/docs/access-control?hl=ko#bigquery.readSessionUser]
BigQuery Studio 사용자(roles/bigquery.studioUser) [https://cloud.google.com/bigquery/docs/access-control?hl=ko#bigquery.studioUser]
BigQuery Studio 사용자 역할은 다음 IAM 역할을 조합합니다.
BigQuery 작업 사용자(roles/bigquery.jobUser) [https://cloud.google.com/bigquery/docs/access-control?hl=ko#bigquery.jobUser]
노트북 런타임 사용자(roles/aiplatform.notebookRuntimeUser) [https://cloud.google.com/vertex-ai/docs/general/access-control?hl=ko#aiplatform.notebookRuntimeUser]
코드 생성자(roles/dataform.codeCreator) [https://cloud.google.com/dataform/docs/access-control?hl=ko#dataform.codeCreator]
참고: 프로젝트에서 코드 생성자 역할이 할당된 사용자는 Dataform API 또는 Dataform 명령줄 인터페이스(CLI)를 사용하여 해당 프로젝트의 코드 애셋 이름을 나열할 수 있습니다. 관리자가 아닌 사용자가 BigQuery Studio를 사용할 때 직접 만들었거나 공유받은 코드 애셋만 볼 수 있습니다.
노트북 수정 권한
노트북을 수정하고 실행하려면 다음 IAM 역할이 필요합니다.
BigQuery 작업 사용자(roles/bigquery.jobUser) [https://cloud.google.com/bigquery/docs/access-control?hl=ko#bigquery.jobUser]
BigQuery 읽기 세션 사용자(roles/bigquery.readSessionUser) [https://cloud.google.com/bigquery/docs/access-control?hl=ko#bigquery.readSessionUser]
노트북 런타임 사용자(roles/aiplatform.notebookRuntimeUser) [https://cloud.google.com/vertex-ai/docs/general/access-control?hl=ko#aiplatform.notebookRuntimeUser]
코드 편집자(roles/dataform.codeEditor) [https://cloud.google.com/dataform/docs/access-control?hl=ko#dataform.codeEditor]
노트북 보기 권한
노트북을 보고 실행하려면 다음 IAM 역할이 필요합니다.
BigQuery 작업 사용자(roles/bigquery.jobUser) [https://cloud.google.com/bigquery/docs/access-control?hl=ko#bigquery.jobUser]
BigQuery 읽기 세션 사용자(roles/bigquery.readSessionUser) [https://cloud.google.com/bigquery/docs/access-control?hl=ko#predefined-roles]
노트북 런타임 사용자(roles/aiplatform.notebookRuntimeUser) [https://cloud.google.com/vertex-ai/docs/general/access-control?hl=ko#aiplatform.notebookRuntimeUser]
코드 뷰어(roles/dataform.codeViewer) [https://cloud.google.com/dataform/docs/access-control?hl=ko#dataform.codeViewer]
노트북 만들기
다음 섹션에서 노트북을 만드는 방법을 알아보세요.
코드 애셋의 기본 리전 설정
코드 애셋을 처음 만드는 경우 코드 애셋의 기본 리전을 설정합니다. 생성된 후에는 코드 애셋의 리전을 변경할 수 없습니다.
참고: 노트북을 만들고 코드 애셋에 사용 중인 것과 다른 기본 리전을 선택하면(예: us-central1을 사용 중일 때 us-west1 선택), 해당 노트북 및 이후에 만드는 모든 코드 애셋에 기본적으로 새 리전이 사용됩니다. 기존 코드 애셋에는 생성 시 지정된 리전이 계속 사용됩니다.
BigQuery Studio의 모든 코드 애셋은 같은 기본 리전을 사용합니다. 코드 애셋의 기본 리전을 설정하려면 다음 단계를 수행합니다.
BigQuery 페이지로 이동합니다.
BigQuery로 이동 [https://console.cloud.google.com/bigquery?hl=ko]
탐색기 창에서 코드 애셋을 사용 설정한 프로젝트를 찾습니다.
프로젝트 옆에 있는 more_vert 작업 보기를 클릭한 후 기본 코드 리전 변경을 클릭합니다.
리전에서 코드 애셋에 사용할 리전을 선택합니다.
선택을 클릭합니다.
사용 가능한 리전 목록은 BigQuery Studio 위치 [https://cloud.google.com/bigquery/docs/locations?hl=ko#bqstudio-loc]를 참조하세요.
BigQuery 편집기에서 노트북 만들기
지정된 테이블에 대한 기본 쿼리가 포함된 노트북을 만들려면 다음 단계를 따르세요.
BigQuery 페이지로 이동합니다.
BigQuery로 이동 [https://console.cloud.google.com/bigquery?hl=ko]
편집기 창의 탭 표시줄에서 add_box SQL 쿼리 옆에 있는 arrow_drop_down 화살표를 클릭한 다음 Python 노트북 생성을 클릭합니다.
bigquery-public-data.ml_datasets.penguins 공개 데이터 세트에 대한 쿼리 예시를 보여주는 셀이 포함된 새 노트북이 열립니다.
선택사항: 노트북 세부정보 또는 버전 기록 [https://cloud.google.com/bigquery/docs/create-notebooks?hl=ko#create_a_notebook_from_an_existing_notebook]을 보거나, 새 댓글을 추가하거나, 기존 댓글에 답글을 달거나 링크를 가져오려면 다음 툴바를 사용하세요.
세부정보, 버전 기록, 댓글 툴바 기능은 프리뷰 [https://cloud.google.com/products?hl=ko#product-launch-stages] 버전으로 제공됩니다. 이러한 기능에 대한 의견을 제공하거나 지원을 요청하려면 bqui-workspace-pod@google.com [mailto:bqui-workspace-pod@google.com]으로 이메일을 보내세요.
테이블에서 노트북 만들기
특정 테이블에 대한 기본 쿼리가 포함된 노트북을 만들려면 다음 단계를 따르세요.
BigQuery 페이지로 이동합니다.
BigQuery로 이동 [https://console.cloud.google.com/bigquery?hl=ko]
탐색기 창에서 프로젝트를 펼치고 쿼리할 테이블을 찾습니다.
테이블 옆에 있는 more_vert 작업 보기를 클릭하고 다음에서 쿼리 > Python 노트북을 클릭합니다.
선택한 테이블에 대한 쿼리 예시를 보여주는 셀이 포함된 새 노트북이 열립니다.
노트북을 만들어 쿼리 결과 세트 살펴보기
노트북을 만들어 쿼리 결과 세트를 살펴보려면 다음 단계를 따르세요.
BigQuery 페이지로 이동합니다.
BigQuery로 이동 [https://console.cloud.google.com/bigquery?hl=ko]
편집기 창에서 쿼리 결과를 생성하는 쿼리를 실행합니다.
쿼리 결과 창에서 데이터 탐색을 클릭한 후 Python 노트북으로 탐색을 클릭합니다.
쿼리 SQL과 쿼리 결과를 반환하는 코드가 있는 셀이 포함된 새 노트북이 열립니다.
기존 노트북에서 노트북 만들기
기존 노트북 버전을 새 노트북으로 열려면 다음 단계를 따르세요.
Google Cloud 콘솔에서 BigQuery 페이지로 이동합니다.
BigQuery로 이동 [https://console.cloud.google.com/bigquery?hl=ko]
탐색기 창에서 프로젝트와 Notebooks 폴더를 펼치고 필요한 경우 공유 노트북 폴더를 펼칩니다. 노트북을 선택합니다.
schedule 버전 기록을 클릭합니다.
노트북 버전 옆에 있는 more_vert 작업 보기를 클릭한 후 새 Python 노트북으로 열기를 클릭합니다.
노트북 사본이 새 노트북으로 열립니다.
노트북 업로드
로컬 노트북을 업로드하여 BigQuery Studio에서 사용할 수 있습니다. 그러면 업로드된 노트북이 Google Cloud 콘솔의 BigQuery 페이지에 표시됩니다.
노트북을 업로드하려면 다음 단계를 따르세요.
Google Cloud 콘솔에서 BigQuery 페이지로 이동합니다.
BigQuery로 이동 [https://console.cloud.google.com/bigquery?hl=ko]
탐색기 창에서 프로젝트를 펼친 후 다음 중 하나를 수행합니다.
Notebooks 옆에 있는 more_vert 작업 보기 > Notebooks에 업로드를 클릭합니다.
Google Cloud 프로젝트 이름 옆에 있는 more_vert 작업 보기 > 프로젝트에 업로드 > Python 노트북을 클릭합니다.
노트북 업로드 대화상자의 노트북 필드에서 찾아보기를 클릭하고 업로드할 노트북을 선택합니다.
(선택사항) 노트북 이름 필드에서 노트북 이름을 수정합니다.
리전 필드에서 노트북을 업로드할 리전을 선택합니다.
업로드를 클릭합니다.
노트북이 탐색기 창에 표시됩니다.
런타임에 연결
다음 섹션을 사용하여 노트북을 Vertex AI 런타임 [https://cloud.google.com/colab/docs/create-runtime?hl=ko]에 연결하는 방법을 알아보세요. 런타임은 노트북에서 코드를 실행하는 컴퓨팅 리소스입니다.
런타임에 대한 자세한 내용은 런타임 및 런타임 템플릿 [https://cloud.google.com/colab/docs/runtimes?hl=ko]을 참조하세요.
참고: VPC 서비스 제어 [https://cloud.google.com/vpc-service-controls/docs/overview?hl=ko]를 사용하는 경우 런타임에 연결하기 전에 VPC 서비스 제어를 사용한 비공개 Google 액세스 [https://cloud.google.com/vpc-service-controls/docs/private-connectivity?hl=ko]를 구성해야 합니다. 그렇지 않으면 서비스에서 Failed to connect to Runtime Network projects/projectid/global/networks/default' was not found.
오류를 반환합니다.
기본 런타임에 연결
기본 런타임은 최소한의 설정이 필요한 사전 설정된 런타임입니다.
기본 런타임에 연결하려면 다음 단계를 수행합니다.
Google Cloud 콘솔에서 BigQuery 페이지로 이동합니다.
BigQuery로 이동 [https://console.cloud.google.com/bigquery?hl=ko]
탐색기 창에서 프로젝트와 Notebooks 폴더를 펼치고 필요한 경우 공유 노트북 폴더를 펼칩니다. 노트북 이름을 클릭하여 엽니다.
노트북에서 연결을 클릭하거나 노트북의 셀을 실행합니다.
아직 활성 런타임이 없는 경우 기본 런타임에 연결하는 데 몇 분 정도 걸릴 수 있습니다.
기본이 아닌 런타임에 연결
기본 런타임 이외의 런타임을 사용하려면 먼저 Vertex AI에서 추가 런타임을 생성 [https://cloud.google.com/vertex-ai/docs/colab/create-runtime?hl=ko]해야 합니다.
기본이 아닌 런타임에 연결하려면 다음 단계를 수행합니다.
Google Cloud 콘솔에서 BigQuery 페이지로 이동합니다.
BigQuery로 이동 [https://console.cloud.google.com/bigquery?hl=ko]
탐색기 창에서 프로젝트와 Notebooks 폴더를 펼치고 필요한 경우 공유 노트북 폴더를 펼칩니다. 노트북 이름을 클릭하여 엽니다.
노트북에서 연결 옆에 있는 arrow_drop_down 드롭다운을 클릭한 다음 런타임에 연결을 클릭합니다.
기존 런타임에 연결을 클릭합니다.
런타임에서 사용할 런타임을 선택합니다.
연결을 클릭합니다.
새 런타임에 연결
새 런타임에 연결하려면 다음 단계를 수행합니다.
Google Cloud 콘솔에서 BigQuery 페이지로 이동합니다.
BigQuery로 이동 [https://console.cloud.google.com/bigquery?hl=ko]
탐색기 창에서 프로젝트와 Notebooks 폴더를 펼치고 필요한 경우 공유 노트북 폴더를 펼칩니다. 노트북 이름을 클릭하여 엽니다.
노트북에서 연결 옆에 있는 arrow_drop_down 드롭다운을 클릭한 다음 런타임에 연결을 클릭합니다.
새 런타임 만들기를 클릭합니다.
런타임 템플릿에서 사용할 Vertex AI 런타임 템플릿 [https://cloud.google.com/colab/docs/create-runtime-template?hl=ko]을 선택합니다.
런타임 이름에 런타임 이름을 입력합니다.
연결을 클릭합니다.
노트북에 대한 액세스 권한 부여
다른 사용자에게 노트북에 대한 액세스 권한을 부여하려면 해당 사용자를 적절한 IAM 역할에 추가하세요.
중요: 노트북에 액세스할 수 있는 사용자는 노트북의 코드로 생성된 출력에 자신이 액세스할 수 없는 테이블의 데이터가 포함되어 있더라도 모든 출력을 볼 수 있습니다. 저장된 출력이 공유되지 않도록 하려면 노트북 출력 저장을 사용 중지 [https://cloud.google.com/bigquery/docs/create-notebooks?hl=ko#disable_output_saving]합니다.
Google Cloud 콘솔에서 BigQuery 페이지로 이동합니다.
BigQuery로 이동 [https://console.cloud.google.com/bigquery?hl=ko]
탐색기 창에서 프로젝트와 Notebooks 폴더를 펼치고 필요한 경우 공유 노트북 폴더를 펼칩니다. 액세스 권한을 부여할 노트북을 찾습니다.
노트북 옆에 있는 more_vert 작업 보기를 클릭한 후 공유 > 권한 관리를 클릭합니다.
권한 관리 창에서 사용자/그룹 추가를 클릭합니다.
새 주 구성원 필드에 주 구성원을 입력합니다.
역할 목록에서 다음 역할 중 하나를 선택합니다.
코드 소유자 [https://cloud.google.com/dataform/docs/access-control?hl=ko#dataform.codeOwner]: 삭제 또는 공유를 포함하여 노트북에서 모든 작업을 수행할 수 있습니다.
코드 편집자 [https://cloud.google.com/dataform/docs/access-control?hl=ko#dataform.codeEditor]: 노트북을 수정할 수 있습니다.
코드 뷰어 [https://cloud.google.com/dataform/docs/access-control?hl=ko#dataform.codeViewer]: 노트북을 볼 수 있습니다.
참고: 또한 주 구성원이 노트북을 실행하기 위해서는 노트북 런타임 사용자(roles/aiplatform.notebookRuntimeUser) [https://cloud.google.com/vertex-ai/docs/general/access-control?hl=ko#aiplatform.notebookRuntimeUser] 및 BigQuery 사용자(roles/bigquery.user) [https://cloud.google.com/bigquery/docs/access-control?hl=ko#bigquery.user] 역할이 있어야 합니다.
(선택사항) 역할 및 고급 공유 설정의 전체 목록을 보려면 고급 공유를 클릭합니다.
저장을 클릭합니다.
노트북 정보 페이지로 돌아가려면 닫기를 클릭합니다.
노트북 공유
노트북을 다른 사용자와 공유하려면 노트북 링크를 생성하여 공유하면 됩니다. 공유한 노트북을 다른 사용자가 볼 수 있으려면 먼저 노트북에 대한 액세스 권한을 부여 [https://cloud.google.com/bigquery/docs/create-notebooks?hl=ko#grant_access_to_notebooks]해야 합니다.
노트북을 실행하려면 사용자에게 노트북이 액세스하는 데이터에 대한 액세스 권한이 있어야 합니다. 자세한 내용은 데이터 세트에 대한 액세스 권한 부여 [https://cloud.google.com/bigquery/docs/control-access-to-resources-iam?hl=ko#grant_access_to_a_dataset]를 참조하세요.
중요: 노트북에 액세스할 수 있는 사용자는 노트북의 코드로 생성된 출력에 자신이 액세스할 수 없는 테이블의 데이터가 포함되어 있더라도 모든 출력을 볼 수 있습니다. 저장된 출력이 공유되지 않도록 하려면 노트북 출력 저장을 사용 중지 [https://cloud.google.com/bigquery/docs/create-notebooks?hl=ko#disable_output_saving]합니다.
Google Cloud 콘솔에서 BigQuery 페이지로 이동합니다.
BigQuery로 이동 [https://console.cloud.google.com/bigquery?hl=ko]
탐색기 창에서 프로젝트와 Notebooks 폴더를 펼치고 필요한 경우 공유 노트북 폴더를 펼칩니다. 공유할 노트북을 찾습니다.
노트북 옆에 있는 more_vert 작업 보기를 클릭한 후 공유 > 링크 복사를 클릭합니다.
다른 사용자와 링크를 공유합니다.
노트북 출력 저장 사용 중지
노트북 출력 저장을 사용 중지하여 저장된 노트북 출력이 노트북 파일에 액세스할 수 있는 다른 사용자와 공유되지 않도록 할 수 있습니다.
선택한 노트북에 대한 출력 저장을 사용 중지하면 BigQuery에서 노트북 파일에 저장된 모든 출력을 삭제하고 후속 실행의 출력을 저장하지 않습니다.
하지만 해당 노트북에 대한 액세스 권한 [https://cloud.google.com/bigquery/docs/create-notebooks?hl=ko#grant_access_to_notebooks]이 있는 사용자는 여전히 다음과 같은 방법으로 출력을 볼 수 있습니다.
노트북을 실행하여 현재 출력을 확인합니다. 이 출력은 저장되지 않습니다.
노트북의 보관 버전과 업데이트 기록의 출력을 확인합니다.
선택한 노트북에 대해 출력 저장을 사용 중지하려면 다음 단계를 수행합니다.
Google Cloud 콘솔에서 BigQuery 페이지로 이동합니다.
BigQuery로 이동 [https://console.cloud.google.com/bigquery?hl=ko]
탐색기 창에서 프로젝트와 Notebooks 폴더를 펼친 후 출력 저장을 사용 중지할 노트북을 선택합니다.
arrow_drop_down 헤더 공개 상태 전환 > 수정 > 노트북 설정을 클릭합니다.
노트북 설정 창에서 이 노트북을 저장할 때 코드 셀 출력 생략을 선택합니다.
저장을 클릭합니다.
새로고침을 클릭합니다.
충돌 해결
사용자와 다른 사용자가 노트북에서 충돌하는 변경사항을 수행하면 서비스에서 Automatic saving failed. This file was updated remotely or in another tab. 오류가 발생하고 Show diff 링크를 제공합니다. 충돌을 해결하려면 다음 단계를 따르세요.
Show diff 링크를 클릭합니다. 원격 변경사항 검토 대화상자가 열립니다.
(선택사항) 노트북 소스 코드를 비교하려면 원시 소스 체크박스를 선택합니다.
(선택사항) 별도의 창 대신 버전 인라인을 비교하려면 인라인 비교 체크박스를 선택합니다.
변경사항을 검토하고 유지할 항목을 결정한 후 필요한 경우 입력을 수정합니다.
변경사항 저장을 클릭합니다.
노트북 이름 바꾸기
노트북 이름을 바꾸려면 다음 단계를 따르세요.
Google Cloud 콘솔에서 BigQuery 페이지로 이동합니다.
BigQuery로 이동 [https://console.cloud.google.com/bigquery?hl=ko]
탐색기 창에서 프로젝트와 Notebooks 폴더를 펼치고 필요한 경우 공유 노트북 폴더를 펼칩니다. 이름을 바꾸려는 노트북을 찾습니다.
노트북 옆에 있는 more_vert 작업 보기를 클릭한 후 이름 바꾸기를 클릭합니다.
노트북 이름을 입력한 후 이름 바꾸기를 클릭합니다.
문제 해결
자세한 내용은 Colab Enterprise 문제 해결 [https://cloud.google.com/colab/docs/troubleshooting?hl=ko]을 참조하세요.
다음 단계
노트북 관리 [https://cloud.google.com/bigquery/docs/manage-notebooks?hl=ko] 방법 알아보기
노트북 예약 [https://cloud.google.com/bigquery/docs/orchestrate-notebooks?hl=ko] 방법 알아보기
도움이 되었나요?
의견 보내기