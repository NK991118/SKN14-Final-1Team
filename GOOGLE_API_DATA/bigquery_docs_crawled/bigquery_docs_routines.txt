Source URL: https://cloud.google.com/bigquery/docs/routines

BigQuery [https://cloud.google.com/bigquery?hl=ko]
Documentation [https://cloud.google.com/bigquery/docs?hl=ko]
가이드 [https://cloud.google.com/bigquery/docs/introduction?hl=ko]
도움이 되었나요?
의견 보내기
이 페이지의 내용
권한 [https://cloud.google.com/bigquery/docs/routines?hl=ko#permissions]
루틴 만들기 [https://cloud.google.com/bigquery/docs/routines?hl=ko#create_a_routine]
루틴 나열 [https://cloud.google.com/bigquery/docs/routines?hl=ko#list_routines]
루틴 본문 보기 [https://cloud.google.com/bigquery/docs/routines?hl=ko#view_the_body_of_a_routine]
루틴 삭제 [https://cloud.google.com/bigquery/docs/routines?hl=ko#delete_a_routine]
루틴 관리
bookmark_border
BigQuery에서 루틴은 다음을 포함하는 리소스 유형입니다.
저장 프로시져 [https://cloud.google.com/bigquery/docs/procedures?hl=ko#writing_a_procedure]
원격 함수 [https://cloud.google.com/bigquery/docs/remote-functions?hl=ko]를 포함한 사용자 정의 함수 [https://cloud.google.com/bigquery/docs/user-defined-functions?hl=ko](UDF)
테이블 함수 [https://cloud.google.com/bigquery/docs/table-functions?hl=ko]
이 문서에서는 BigQuery의 모든 루틴 유형에 공통적인 작업을 설명합니다.
권한
루틴을 실행하려면 루틴이 포함된 데이터 세트에 대한 bigquery.routines.get 권한이 있어야 합니다.
기본적으로 테이블 또는 뷰와 같이 루틴에서 참조하는 모든 리소스에 액세스할 수 있는 권한이 필요합니다. UDF 및 테이블 함수의 경우 호출자를 대신하여 이러한 리소스에 액세스하도록 함수를 승인할 수 있습니다. 자세한 내용은 승인된 함수 [https://cloud.google.com/bigquery/docs/authorized-functions?hl=ko]를 참조하세요.
루틴 만들기
프로젝트를 만들려면 bigquery.routines.create 권한이 있어야 합니다.
--- 탭: SQL [https://cloud.google.com/bigquery/docs/routines?hl=ko#sql] ---
루틴 유형에 따라 다음 DDL 문 중 하나를 실행합니다.


저장 프로시저: CREATE PROCEDURE [https://cloud.google.com/bigquery/docs/reference/standard-sql/data-definition-language?hl=ko#create_procedure]
사용자 정의 함수: CREATE FUNCTION [https://cloud.google.com/bigquery/docs/reference/standard-sql/data-definition-language?hl=ko#create_function_statement]
테이블 함수: CREATE TABLE FUNCTION [https://cloud.google.com/bigquery/docs/reference/standard-sql/data-definition-language?hl=ko#create_table_function_statement]

--- 탭: API [https://cloud.google.com/bigquery/docs/routines?hl=ko#api] ---
Routine 리소스 [https://cloud.google.com/bigquery/docs/reference/rest/v2/routines?hl=ko#Routine]가 정의된 routines.insert 메서드 [https://cloud.google.com/bigquery/docs/reference/rest/v2/routines/insert?hl=ko]를 호출합니다.
루틴 나열
데이터 세트에 루틴을 나열하려면 bigquery.routines.get 및 bigquery.routines.list 권한이 있어야 합니다.
--- 탭: 콘솔 [https://cloud.google.com/bigquery/docs/routines?hl=ko#%EC%BD%98%EC%86%94] ---
Google Cloud 콘솔에서 BigQuery 페이지를 엽니다.

BigQuery로 이동 [https://console.cloud.google.com/bigquery?hl=ko] 
탐색기 패널에서 프로젝트를 확장하고 데이터 세트를 선택합니다.
루틴 목록을 펼칩니다.

--- 탭: SQL [https://cloud.google.com/bigquery/docs/routines?hl=ko#sql] ---
INFORMATION_SCHEMA.ROUTINES 뷰 [https://cloud.google.com/bigquery/docs/information-schema-routines?hl=ko]를 쿼리합니다.




 Google Cloud 콘솔에서 BigQuery 페이지로 이동합니다.

BigQuery로 이동 [https://console.cloud.google.com/bigquery?hl=ko] 
쿼리 편집기에서 다음 문을 입력합니다.

SELECT
  COLUMN_LIST
FROM
   { DATASET | REGION }.INFORMATION_SCHEMA.ROUTINES;


play_circle 실행을 클릭합니다.




쿼리를 실행하는 방법에 대한 자세한 내용은 대화형 쿼리 실행 [https://cloud.google.com/bigquery/docs/running-queries?hl=ko#queries]을 참조하세요.

다음을 바꿉니다.


COLUMN_LIST: INFORMATION_SCHEMA.ROUTINES 뷰 [https://cloud.google.com/bigquery/docs/information-schema-routines?hl=ko]의 쉼표로 구분된 열 목록
DATASET: 프로젝트의 데이터 세트 이름
REGION: 리전 한정자 [https://cloud.google.com/bigquery/docs/information-schema-intro?hl=ko#region_qualifier]


예를 들면 다음과 같습니다.

SELECT
  routine_name, routine_type, routine_body
FROM
  mydataset.INFORMATION_SCHEMA.ROUTINES;
+------------------+----------------+--------------+
|   routine_name   |  routine_type  | routine_body |
+------------------+----------------+--------------+
| AddFourAndDivide | FUNCTION       | SQL          |
| create_customer  | PROCEDURE      | SQL          |
| names_by_year    | TABLE FUNCTION | SQL          |
+------------------+----------------+--------------+

--- 탭: bq [https://cloud.google.com/bigquery/docs/routines?hl=ko#bq] ---
--routines 플래그와 함께 bq ls 명령어 [https://cloud.google.com/bigquery/docs/reference/bq-cli-reference?hl=ko#bq_ls]를 사용합니다.

bq ls --routines DATASET

다음을 바꿉니다.


DATASET: 프로젝트의 데이터 세트 이름


예를 들면 다음과 같습니다.

bq ls --routines mydataset
         Id              Routine Type        Language    Creation Time    Last Modified Time
------------------ ----------------------- ---------- ----------------- --------------------
 AddFourAndDivide   SCALAR_FUNCTION         SQL        05 May 01:12:03   05 May 01:12:03
 create_customer    PROCEDURE               SQL        21 Apr 19:55:51   21 Apr 19:55:51
 names_by_year      TABLE_VALUED_FUNCTION   SQL        01 Sep 22:59:17   01 Sep 22:59:17

--- 탭: API [https://cloud.google.com/bigquery/docs/routines?hl=ko#api] ---
데이터 세트 ID를 사용하여 routines.list 메서드 [https://cloud.google.com/bigquery/docs/reference/rest/v2/routines/list?hl=ko]를 호출합니다.
루틴 본문 보기
루틴 본문을 보려면 bigquery.routines.get 권한이 있어야 합니다.
--- 탭: 콘솔 [https://cloud.google.com/bigquery/docs/routines?hl=ko#%EC%BD%98%EC%86%94] ---
Google Cloud 콘솔에서 BigQuery 페이지를 엽니다.

BigQuery로 이동 [https://console.cloud.google.com/bigquery?hl=ko] 
탐색기 패널에서 프로젝트를 확장하고 데이터 세트를 선택합니다.
루틴 목록을 펼칩니다.
루틴을 선택합니다. 루틴 본문은 루틴 쿼리 아래에 나열됩니다.

--- 탭: SQL [https://cloud.google.com/bigquery/docs/routines?hl=ko#sql] ---
INFORMATION_SCHEMA.ROUTINES [https://cloud.google.com/bigquery/docs/information-schema-routines?hl=ko] 뷰의 routine_definition 열을 선택합니다.




 Google Cloud 콘솔에서 BigQuery 페이지로 이동합니다.

BigQuery로 이동 [https://console.cloud.google.com/bigquery?hl=ko] 
쿼리 편집기에서 다음 문을 입력합니다.

SELECT
  routine_definition
FROM
  { DATASET | REGION }.INFORMATION_SCHEMA.ROUTINES
WHERE
  routine_name = ROUTINE_NAME;


play_circle 실행을 클릭합니다.




쿼리를 실행하는 방법에 대한 자세한 내용은 대화형 쿼리 실행 [https://cloud.google.com/bigquery/docs/running-queries?hl=ko#queries]을 참조하세요.

다음을 바꿉니다.


DATASET: 프로젝트의 데이터 세트 이름
REGION: 리전 한정자 [https://cloud.google.com/bigquery/docs/information-schema-intro?hl=ko#region_qualifier]
ROUTINE_NAME: 루틴의 이름


예를 들면 다음과 같습니다.

SELECT
  routine_definition
FROM
  mydataset.INFORMATION_SCHEMA.ROUTINES
WHERE
  routine_name = 'AddFourAndDivide';
+--------------------+
| routine_definition |
+--------------------+
| (x + 4) / y        |
+--------------------+

--- 탭: bq [https://cloud.google.com/bigquery/docs/routines?hl=ko#bq] ---
--routine 플래그와 함께 bq show 명령어 [https://cloud.google.com/bigquery/docs/reference/bq-cli-reference?hl=ko#bq_show]를 사용합니다.

bq show --routine DATASET.ROUTINE_NAME

다음을 바꿉니다.


DATASET: 프로젝트의 데이터 세트 이름
ROUTINE_NAME: 루틴의 이름


예를 들면 다음과 같습니다.

bq show --routine mydataset.AddFourAndDivide
         Id           Routine Type     Language             Signature             Definition     Creation Time    Last Modified Time
 ------------------ ----------------- ---------- ------------------------------- ------------- ----------------- --------------------
  AddFourAndDivide   SCALAR_FUNCTION   SQL        (x INT64, y INT64) -> FLOAT64   (x + 4) / y   05 May 01:12:03   05 May 01:12:03

--- 탭: API [https://cloud.google.com/bigquery/docs/routines?hl=ko#api] ---
데이터 세트 ID와 루틴 이름으로 routines.get [https://cloud.google.com/bigquery/docs/reference/rest/v2/routines/get?hl=ko] 메서드를 호출합니다. 루틴 본문이 Routine 객체 [https://cloud.google.com/bigquery/docs/reference/rest/v2/routines?hl=ko#Routine]에 반환됩니다.
루틴 삭제
루틴을 삭제하려면 bigquery.routines.delete 권한이 있어야 합니다.
--- 탭: 콘솔 [https://cloud.google.com/bigquery/docs/routines?hl=ko#%EC%BD%98%EC%86%94] ---
Google Cloud 콘솔에서 BigQuery 페이지를 엽니다.

BigQuery로 이동 [https://console.cloud.google.com/bigquery?hl=ko] 
탐색기 패널에서 프로젝트를 확장하고 데이터 세트를 선택합니다.
루틴 목록을 펼칩니다.
루틴을 선택합니다.
more_vert 작업 옵션을 펼치고 삭제를 클릭합니다.
대화상자에 "delete"를 입력하고 삭제를 클릭하여 확인합니다.

--- 탭: SQL [https://cloud.google.com/bigquery/docs/routines?hl=ko#sql] ---
루틴 유형에 따라 다음 DDL 문 중 하나를 실행합니다.


저장 프로시저: DROP PROCEDURE [https://cloud.google.com/bigquery/docs/reference/standard-sql/data-definition-language?hl=ko#drop_procedure_statement]
사용자 정의 함수: DROP FUNCTION [https://cloud.google.com/bigquery/docs/reference/standard-sql/data-definition-language?hl=ko#drop_function_statement]
테이블 함수: DROP TABLE FUNCTION [https://cloud.google.com/bigquery/docs/reference/standard-sql/data-definition-language?hl=ko#drop_table_function]


예를 들면 다음과 같습니다.
DROP FUNCTION IF EXISTS mydataset.AddFourAndDivide

--- 탭: bq [https://cloud.google.com/bigquery/docs/routines?hl=ko#bq] ---
--routine 플래그와 함께 bq rm 명령어 [https://cloud.google.com/bigquery/docs/reference/bq-cli-reference?hl=ko#bq_rm]를 사용합니다.

bq rm --routine DATASET.ROUTINE_NAME

다음을 바꿉니다.


DATASET: 프로젝트의 데이터 세트 이름
ROUTINE_NAME: 루틴의 이름


예를 들면 다음과 같습니다.
bq rm --routine mydataset.AddFourAndDivide

--- 탭: API [https://cloud.google.com/bigquery/docs/routines?hl=ko#api] ---
데이터 세트 ID와 루틴 이름으로 routines.delete [https://cloud.google.com/bigquery/docs/reference/rest/v2/routines/delete?hl=ko] 메서드를 호출합니다.
도움이 되었나요?
의견 보내기