Source URL: https://cloud.google.com/bigquery/docs/geospatial-tutorial-hurricane

BigQuery [https://cloud.google.com/bigquery?hl=ko]
Documentation [https://cloud.google.com/bigquery/docs?hl=ko]
가이드 [https://cloud.google.com/bigquery/docs/introduction?hl=ko]
의견 보내기
지리정보 분석을 사용하여 허리케인 경로 표시
bookmark_border
이 페이지의 내용
목표 [https://cloud.google.com/bigquery/docs/geospatial-tutorial-hurricane?hl=ko#objectives]
비용 [https://cloud.google.com/bigquery/docs/geospatial-tutorial-hurricane?hl=ko#costs]
시작하기 전에 [https://cloud.google.com/bigquery/docs/geospatial-tutorial-hurricane?hl=ko#before-you-begin]
샘플 데이터 탐색 [https://cloud.google.com/bigquery/docs/geospatial-tutorial-hurricane?hl=ko#explore_the_sample_data]
글로벌 허리케인 트랙(IBTrACS) 데이터 세트 [https://cloud.google.com/bigquery/docs/geospatial-tutorial-hurricane?hl=ko#the_global_hurricane_tracks_ibtracs_dataset]
이 튜토리얼에서는 지리정보 분석을 소개합니다. 지리정보 분석을 사용하면 BigQuery에서 지리공간 데이터를 쉽게 분석하고 시각화할 수 있습니다.
목표
이 튜토리얼의 목표는 다음과 같습니다.
지리정보 분석 함수를 사용하여 위도와 경도 열을 지리적 점으로 변환
허리케인의 경로를 나타내는 쿼리를 실행
BigQuery Geo Viz [https://cloud.google.com/bigquery/docs/geospatial-visualize?hl=ko]에서 결과를 시각화
비용
BigQuery는 유료 제품이며 이 튜토리얼에서는 BigQuery 사용 비용이 청구됩니다. BigQuery는 일부 리소스를 특정 한도까지 무료로 사용할 수 있습니다. 자세한 내용은 BigQuery 무료 연산 및 무료 등급 [https://cloud.google.com/bigquery/pricing?hl=ko#free]을 참조하세요.
시작하기 전에
이 튜토리얼을 시작하기 전에 Google Cloud Console을 사용하여 프로젝트를 만들거나 선택합니다.
Sign in to your Google Cloud account. If you're new to Google Cloud, create an account [https://console.cloud.google.com/freetrial?hl=ko] to evaluate how our products perform in real-world scenarios. New customers also get $300 in free credits to run, test, and deploy workloads.
In the Google Cloud console, on the project selector page, select or create a Google Cloud project.
Note: If you don't plan to keep the resources that you create in this procedure, create a project instead of selecting an existing project. After you finish these steps, you can delete the project, removing all resources associated with the project.
Go to project selector [https://console.cloud.google.com/projectselector2/home/dashboard?hl=ko]
BigQuery는 새 프로젝트에서 자동으로 사용 설정됩니다. 기존 프로젝트에서 BigQuery를 활성화하려면
Enable the BigQuery API.
Enable the API [https://console.cloud.google.com/flows/enableapi?apiid=bigquery&hl=ko]
으로 이동합니다.
선택사항: 프로젝트에 대한 결제를 사용 설정 [https://cloud.google.com/billing/docs/how-to/modify-project?hl=ko]합니다. 결제를 사용 설정하거나 신용카드를 제공하지 않는 경우 이 문서의 단계가 계속 작동합니다. BigQuery에서는 단계를 수행하기 위한 샌드박스를 제공합니다. 자세한 내용은 BigQuery 샌드박스 사용 설정 [https://cloud.google.com/bigquery/docs/sandbox?hl=ko]을 참조하세요.
참고: 프로젝트에 결제 계정이 있고 BigQuery 샌드박스를 사용하려는 경우 프로젝트의 결제를 중지 [https://cloud.google.com/billing/docs/how-to/modify-project?hl=ko#disable_billing_for_a_project]하세요.
샘플 데이터 탐색
이 튜토리얼에서는 Google Cloud 공개 데이터 세트 프로그램 [https://cloud.google.com/datasets?hl=ko]을 통해 제공되는 데이터 세트를 사용합니다. 공개 데이터 세트는 BigQuery에 저장되며 일반 대중이 사용할 수 있는 모든 데이터 세트입니다. 공개 데이터세트는 사용자가 액세스하고 애플리케이션에 통합할 수 있도록 BigQuery가 호스팅하는 데이터세트입니다. 이러한 데이터 세트 저장 비용은 Google에서 부담하며 프로젝트 [https://cloud.google.com/bigquery/docs/projects?hl=ko]를 통해 데이터에 대한 공개 액세스 권한을 부여합니다. 사용자에게는 데이터에 대한 쿼리 요금만 부과됩니다(쿼리 가격 책정 세부정보 [https://cloud.google.com/bigquery/pricing?hl=ko#analysis_pricing_models]에 따라 매월 1TB까지는 무료).
글로벌 허리케인 트랙(IBTrACS) 데이터 세트
글로벌 허리케인 트랙 (IBTrACS) 데이터 세트 [https://console.cloud.google.com/bigquery?p=bigquery-public-data&%3Bd=noaa_hurricanes&%3Bpage=dataset&hl=ko]
NOAA의 IBTrACS(International Best Track Archive for Climate Stewardship)를 통해 글로벌 열대 사이클론(TC) 트랙의 과거 위치와 강도 정보가 제공됩니다. 열대 사이클론(TC, Tropical Cyclone)은 북대서양과 북동태평양 해분의 허리케인, 북서태평양 해분의 태풍, 북인도양 및 남인도양 해분의 사이클론, 남서태평양 해분의 열대 사이클론을 말합니다.
IBTrACS는 열대 사이클론을 예측하고 발표하는 책임을 맡고 있는 국제 모니터링 센터에서 발표하는 열대 사이클론 관련 데이터를 수집하며, 여기에는 과거의 주요 데이터세트도 포함됩니다. IBTrACS에는 9개 국가의 데이터가 포함되어 있습니다. 지금까지 이러한 시스템을 나타내는 데이터에는 트랙과 강도의 가장 정확한 평가('베스트 트랙'이라는 용어가 여기에서 유래함)를 포함하고 있습니다.
hurricanes 테이블의 세부정보를 확인하여 Google Cloud Console에서 데이터 탐색을 시작할 수 있습니다.
허리케인 스키마로 이동 [https://console.cloud.google.com/bigquery?p=bigquery-public-data&%3Bd=noaa_hurricanes&%3Bt=hurricanes&%3Bpage=table&hl=ko]
2017년 허리케인 마리아의 경로 쿼리
이 튜토리얼 섹션에서는 2017년 시즌의 허리케인 마리아의 경로를 찾는 GoogleSQL 쿼리를 실행합니다. 허리케인의 경로를 그려보려면 여러 시점에서 허리케인의 위치를 쿼리합니다.
쿼리 세부정보
허리케인 마리아의 경로를 찾는 데 아래의 GoogleSQL 쿼리를 사용합니다.
SELECT
  ST_GeogPoint(longitude, latitude) AS point,
  name,
  iso_time,
  dist2land,
  usa_wind,
  usa_pressure,
  usa_sshs,
  (usa_r34_ne + usa_r34_nw + usa_r34_se + usa_r34_sw)/4 AS radius_34kt,
  (usa_r50_ne + usa_r50_nw + usa_r50_se + usa_r50_sw)/4 AS radius_50kt
FROM
  `bigquery-public-data.noaa_hurricanes.hurricanes`
WHERE
  name LIKE '%MARIA%'
  AND season = '2017'
  AND ST_DWithin(ST_GeogFromText('POLYGON((-179 26, -179 48, -10 48, -10 26, -100 -10.1, -179 26))'),
    ST_GeogPoint(longitude, latitude), 10)
ORDER BY
  iso_time ASC
이 쿼리 절은 다음을 수행합니다.
SELECT ST_GeogPoint(longitude, latitude) AS point, name, iso_time, dist2land, usa_wind, usa_pressure, usa_sshs, (usa_r34_ne + usa_r34_nw + usa_r34_se + usa_r34_sw)/4 AS radius_34kt, (usa_r50_ne + usa_r50_nw + usa_r50_se + usa_r50_sw)/4 AS radius_50kt
SELECT 절은 폭풍의 모든 날씨 데이터를 선택하고 ST_GeogPoint 함수를 사용하여 latitude 및 longitude 열의 값을 GEOGRAPHY 유형(점)으로 변환합니다.
FROM bigquery-public-data.noaa_hurricanes.hurricanes
FROM 절은 쿼리 대상 테이블인 hurricanes를 지정합니다.
WHERE name LIKE '%MARIA%' AND season = '2017' AND ST_DWithin(ST_GeogFromText('POLYGON((-179 26, -179 48, -10 48, -10 26, -100 -10.1, -179 26))'), ST_GeogPoint(longitude, latitude), 10)
WHERE 절은 2017년 허리케인 시즌의 허리케인 마리아를 따라 이 데이터를 대서양의 점으로 필터링합니다.
ORDER BY iso_time ASC
ORDER BY 절은 점을 순서대로 나열하여 폭풍의 경로를 시간순으로 형성합니다.
쿼리 실행
Google Cloud 콘솔을 사용하여 쿼리를 실행하려면 다음 안내를 따르세요.
Google Cloud 콘솔에서 BigQuery 페이지로 이동합니다.
BigQuery 페이지로 이동 [https://console.cloud.google.com/bigquery?hl=ko]
쿼리 편집기 텍스트 영역에 다음 GoogleSQL 쿼리를 입력합니다.
SELECT
  ST_GeogPoint(longitude, latitude) AS point,
  name,
  iso_time,
  dist2land,
  usa_wind,
  usa_pressure,
  usa_sshs,
  (usa_r34_ne + usa_r34_nw + usa_r34_se + usa_r34_sw)/4 AS radius_34kt,
  (usa_r50_ne + usa_r50_nw + usa_r50_se + usa_r50_sw)/4 AS radius_50kt
FROM
  `bigquery-public-data.noaa_hurricanes.hurricanes`
WHERE
  name LIKE '%MARIA%'
  AND season = '2017'
  AND ST_DWithin(ST_GeogFromText('POLYGON((-179 26, -179 48, -10 48, -10 26, -100 -10.1, -179 26))'),
    ST_GeogPoint(longitude, latitude), 10)
ORDER BY
  iso_time ASC
실행을 클릭합니다.
쿼리를 완료하는 데 시간이 다소 걸립니다. 쿼리가 실행된 후 결과가 쿼리 결과 창에 표시됩니다.
Geo Viz에서 쿼리 결과 시각화
다음으로는 BigQuery Geo Viz(Google Maps API를 이용하여 BigQuery에서 지리공간 데이터를 시각화하는 웹 도구)로 결과를 시각화합니다.
Geo Viz 시작 및 인증
Geo Viz를 사용하기 전에 BigQuery의 데이터에 대한 액세스 권한을 인증하고 부여해야 합니다.
Geo Viz를 설정하려면 다음 안내를 따르세요.
Geo Viz 웹 도구를 엽니다.
Geo Viz 웹 도구 열기 [https://bigquerygeoviz.appspot.com/?hl=ko]
1단계 데이터 선택에서 승인을 클릭합니다.
계정 선택 대화상자에서 Google 계정을 클릭합니다.
액세스 대화상자에서 허용을 클릭하여 BigQuery 데이터에 액세스할 수 있는 권한을 Geo Viz에 부여합니다.
Geo Viz에서 쿼리 실행
액세스 권한을 인증하고 부여한 후 다음 단계는 Geo Viz에서 쿼리를 실행하는 것입니다.
쿼리를 실행하려면 다음 안내를 따르세요.
1단계 데이터 선택에서 프로젝트 ID 필드에 프로젝트 ID를 입력합니다.
쿼리 창에 다음 GoogleSQL 쿼리를 입력합니다.
SELECT
  ST_GeogPoint(longitude, latitude) AS point,
  name,
  iso_time,
  dist2land,
  usa_wind,
  usa_pressure,
  usa_sshs,
  (usa_r34_ne + usa_r34_nw + usa_r34_se + usa_r34_sw)/4 AS radius_34kt,
  (usa_r50_ne + usa_r50_nw + usa_r50_se + usa_r50_sw)/4 AS radius_50kt
FROM
  `bigquery-public-data.noaa_hurricanes.hurricanes`
WHERE
  name LIKE '%MARIA%'
  AND season = '2017'
  AND ST_DWithin(ST_GeogFromText('POLYGON((-179 26, -179 48, -10 48, -10 26, -100 -10.1, -179 26))'),
    ST_GeogPoint(longitude, latitude), 10)
ORDER BY
  iso_time ASC
실행을 클릭합니다.
쿼리가 완료되면 결과 표시를 클릭합니다. 2단계 데이터를 클릭할 수도 있습니다.
그러면 2단계로 넘어갑니다. 2단계에서 도형 열로 점을 선택합니다. 그러면 허리케인 마리아의 경로를 따라 점이 그려집니다.
Geo Viz에서 시각화 형식 지정
스타일 섹션에는 맞춤설정을 위한 시각 스타일의 목록이 나와 있습니다. 특정 속성은 특정한 데이터 유형에만 적용됩니다. 예를 들어 circleRadius는 점에만 영향을 미칩니다.
지원되는 스타일 속성은 다음과 같습니다.
fillColor - 다각형 또는 점의 채우기 색상. 예를 들어 'linear' 또는 'interval' 함수는 숫자 값을 색상 그라디언트에 매핑하는 데 사용될 수 있습니다.
fillOpacity - 다각형 또는 점의 채우기 불투명도입니다. 값은 0에서 1 사이여야 합니다. 여기서 0은 투명이고, 1은 불투명입니다.
strokeColor - 다각형 또는 선의 획이나 윤곽선 색상입니다.
strokeOpacity - 다각형 또는 선의 획이나 윤곽선 불투명도입니다. 값은 0에서 1 사이여야 합니다. 여기서 0은 투명이고, 1은 불투명입니다.
strokeWeight - 다각형 또는 선의 획 또는 윤곽선 너비(픽셀 단위)입니다.
circleRadius - 점을 나타내는 원의 반지름(미터 단위)입니다. 예를 들어 산점도 스타일을 만들기 위해 'linear' 함수를 사용하여 숫자 값을 점 크기에 매핑할 수 있습니다.
각 스타일마다 글로벌 값(모든 결과에 적용됨) 또는 데이터 기반 값(각 결과 행의 데이터에 따라 서로 다른 방식으로 적용됨)이 지정됩니다. 데이터 기반 값의 경우 결과를 결정하는 데 다음이 사용됩니다.
function - 필드 값에서 스타일 값을 계산하는 데 사용되는 함수입니다.
identity - 각 필드의 데이터 값이 스타일 값으로 사용됩니다.
categorical - 도메인에 나열된 각 필드의 데이터 값이 범위 내의 해당 스타일과 일대일로 매핑됩니다.
interval - 각 필드의 데이터 값이 도메인에서 가장 가까운 값으로 내림된 후 범위 내의 해당 스타일로 스타일링됩니다.
linear - 각 필드의 데이터 값이 도메인의 여러 값에 대하여 선형으로 보간된 후 범위 내의 해당 스타일의 혼합으로 스타일이 지정됩니다.
field - 데이터에서 지정된 필드가 스타일 지정 함수의 입력으로 사용됩니다.
domain - 필드의 샘플 입력값의 순서가 지정된 목록입니다. 샘플 입력(도메인)은 지정한 함수에 따라 샘플 출력(범위)과 페어링되고 모든 입력의 스타일 값을 유추하는 데 사용됩니다(도메인에 나열되지 않은 값까지 포함). 도메인의 값은 시각화하는 필드의 값과 동일한 유형(텍스트, 숫자 등)이어야 합니다.
range - 스타일 규칙의 샘플 출력 값의 목록입니다. 범위의 값은 제어할 스타일 속성과 동일한 유형(색상 또는 숫자)이어야 합니다. 예를 들어 fillColor 속성 범위에는 색상만 포함해야 합니다.
지도의 형식을 지정하려면 다음 안내를 따르세요.
2단계의 스타일 추가 또는 3단계 스타일을 클릭합니다.
점의 색상을 변경합니다. fillColor를 클릭합니다.
fillColor 패널에서:
데이터 기반을 클릭합니다.
함수로 linear를 선택합니다.
필드에서 usa_wind을 선택합니다.
도메인에서 첫 번째 상자에 0을 입력하고 두 번째 상자에 150을 입력합니다.
범위에서 첫 번째 상자를 클릭하고 16진수 상자에 #0006ff를 입력합니다. 두 번째 상자를 클릭하고 #ff0000을 입력합니다. 이렇게 하면 풍속에 따라 점 색상이 변경됩니다. 파란색은 더 약한 바람을, 빨간색은 더 강한 바람을 나타냅니다.
지도를 확인합니다. 포인터를 포인트 하나에 가져가면 해당 포인트의 날씨 데이터가 표시됩니다.
fillOpacity를 클릭합니다.
값 필드에 .5를 입력합니다.
지도를 확인합니다. 이제 점의 채우기 색상이 반투명해졌습니다.
허리케인의 반경에 따라 점의 크기를 변경합니다. circleRadius를 클릭합니다.
circleRadius 패널에서 다음을 수행합니다.
데이터 기반을 클릭합니다.
함수로 linear를 선택합니다.
필드에서 radius_50kt을 선택합니다.
도메인에서 첫 번째 상자에 0을 입력하고 두 번째 상자에 135을 입력합니다.
범위에서 첫 번째 상자에 5를 입력하고 두 번째 상자에 135000를 입력합니다.
지도를 확인합니다. 이제 각 점의 반지름이 허리케인의 반경에 해당합니다.
Geo Viz를 닫습니다.
삭제
이 튜토리얼에서 사용된 리소스 비용이 Google Cloud 계정에 청구되지 않도록 하려면 리소스가 포함된 프로젝트를 삭제하거나 프로젝트를 유지하고 개별 리소스를 삭제하세요.
만든 프로젝트를 삭제할 수 있습니다.
또는 나중에 사용할 수 있도록 프로젝트를 유지할 수 있습니다.
프로젝트를 삭제하는 방법은 다음과 같습니다.
주의: 프로젝트를 삭제하면 다음과 같은 효과가 발생합니다.
프로젝트의 모든 항목이 삭제됩니다. 이 문서의 태스크에 기존 프로젝트를 사용한 경우 프로젝트를 삭제하면 프로젝트에서 수행한 다른 작업도 삭제됩니다.
커스텀 프로젝트 ID가 손실됩니다. 이 프로젝트를 만들 때 앞으로 사용할 커스텀 프로젝트 ID를 만들었을 수 있습니다. appspot.com URL과 같이 프로젝트 ID를 사용하는 URL을 보존하려면 전체 프로젝트를 삭제하는 대신 프로젝트 내에서 선택한 리소스만 삭제합니다.
여러 아키텍처, 튜토리얼, 빠른 시작을 살펴보려는 경우 프로젝트를 재사용하면 프로젝트 할당량 한도 초과를 방지할 수 있습니다.
In the Google Cloud console, go to the Manage resources page.
Go to Manage resources [https://console.cloud.google.com/iam-admin/projects?hl=ko]
In the project list, select the project that you want to delete, and then click Delete.
In the dialog, type the project ID, and then click Shut down to delete the project.
다음 단계
지리정보 분석 옵션을 시각화하는 방법에 대해 자세히 알아보려면 지리정보 데이터 시각화 [https://cloud.google.com/bigquery/docs/geospatial-visualize?hl=ko]를 참조하세요.
지리정보 데이터를 사용하려면 지리정보 데이터 작업 [https://cloud.google.com/bigquery/docs/geospatial-data?hl=ko]을 참조하세요.
지리정보 분석에 사용할 수 있는 지리 함수에 대한 자세한 내용은 GoogleSQL의 지리 함수 [https://cloud.google.com/bigquery/docs/reference/standard-sql/geography_functions?hl=ko]를 참조하세요.
의견 보내기