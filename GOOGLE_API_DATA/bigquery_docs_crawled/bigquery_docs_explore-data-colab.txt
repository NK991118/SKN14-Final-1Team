Source URL: https://cloud.google.com/bigquery/docs/explore-data-colab

BigQuery [https://cloud.google.com/bigquery?hl=ko]
Documentation [https://cloud.google.com/bigquery/docs?hl=ko]
가이드 [https://cloud.google.com/bigquery/docs/introduction?hl=ko]
의견 보내기
노트북에서 쿼리 결과 탐색
bookmark_border
이 페이지의 내용
목표 [https://cloud.google.com/bigquery/docs/explore-data-colab?hl=ko#objectives]
비용 [https://cloud.google.com/bigquery/docs/explore-data-colab?hl=ko#costs]
시작하기 전에 [https://cloud.google.com/bigquery/docs/explore-data-colab?hl=ko#before-you-begin]
코드 애셋의 기본 리전 설정 [https://cloud.google.com/bigquery/docs/explore-data-colab?hl=ko#set_the_default_region_for_code_assets]
필수 권한 [https://cloud.google.com/bigquery/docs/explore-data-colab?hl=ko#required_permissions]
BigQuery에서 Colab Enterprise 노트북 [https://cloud.google.com/colab/docs/introduction?hl=ko]을 사용하여 BigQuery 쿼리 결과를 탐색할 수 있습니다.
이 튜토리얼에서는 BigQuery 공개 데이터 세트 [https://cloud.google.com/bigquery/public-data?hl=ko]에서 데이터를 쿼리하고 노트북에서 쿼리 결과를 탐색합니다.
목표
BigQuery에서 쿼리를 만들고 실행합니다.
노트북에서 쿼리 결과를 탐색합니다.
비용
이 튜토리얼에서는 Google Cloud 공개 데이터 세트 프로그램 [https://cloud.google.com/blog/products/data-analytics/big-data-analytics-in-the-cloud-with-free-public-datasets?hl=ko]을 통해 제공되는 데이터 세트를 사용합니다. 이러한 데이터 세트의 스토리지 비용은 Google에서 부담하며 데이터에 대한 공개 액세스를 제공합니다. 개발자에게는 데이터에서 수행하는 쿼리 요금이 청구됩니다. 자세한 내용은 BigQuery 가격 책정 [https://cloud.google.com/bigquery/pricing?hl=ko]을 참조하세요.
시작하기 전에
In the Google Cloud console, on the project selector page, select or create a Google Cloud project.
Note: If you don't plan to keep the resources that you create in this procedure, create a project instead of selecting an existing project. After you finish these steps, you can delete the project, removing all resources associated with the project.
Go to project selector [https://console.cloud.google.com/projectselector2/home/dashboard?hl=ko]
Verify that billing is enabled for your Google Cloud project [https://cloud.google.com/billing/docs/how-to/verify-billing-enabled?hl=ko#confirm_billing_is_enabled_on_a_project].
Enable the BigQuery API.
Enable the API [https://console.cloud.google.com/flows/enableapi?apiid=bigquery&hl=ko]
새 프로젝트의 경우 BigQuery가 자동으로 사용 설정됩니다.
코드 애셋의 기본 리전 설정
코드 애셋을 처음 만드는 경우 코드 애셋의 기본 리전을 설정합니다. 생성된 후에는 코드 애셋의 리전을 변경할 수 없습니다.
참고: 코드 애셋을 만들고 코드 애셋에 사용 중인 것과 다른 기본 리전을 선택하면(예: us-central1을 사용 중일 때 us-west1 선택), 해당 코드 애셋 및 이후에 만드는 모든 코드 애셋에 기본적으로 새 리전이 사용됩니다. 기존 코드 애셋에는 생성 시 지정된 리전이 계속 사용됩니다.
BigQuery Studio의 모든 코드 애셋은 같은 기본 리전을 사용합니다. 코드 애셋의 기본 리전을 설정하려면 다음 단계를 수행합니다.
BigQuery 페이지로 이동합니다.
BigQuery로 이동 [https://console.cloud.google.com/bigquery?hl=ko]
탐색기 창에서 코드 애셋을 사용 설정한 프로젝트를 찾습니다.
프로젝트 옆에 있는 more_vert 작업 보기를 클릭한 후 기본 코드 리전 변경을 클릭합니다.
리전에서 코드 애셋에 사용할 리전을 선택합니다.
선택을 클릭합니다.
사용 가능한 리전 목록은 BigQuery Studio 위치 [https://cloud.google.com/bigquery/docs/locations?hl=ko#bqstudio-loc]를 참조하세요.
필수 권한
노트북을 만들고 실행하려면 다음 Identity and Access Management(IAM) 역할이 필요합니다.
BigQuery 사용자(roles/bigquery.user) [https://cloud.google.com/bigquery/docs/access-control?hl=ko#bigquery.user]
노트북 런타임 사용자(roles/aiplatform.notebookRuntimeUser) [https://cloud.google.com/vertex-ai/docs/general/access-control?hl=ko#aiplatform.notebookRuntimeUser]
코드 생성자(roles/dataform.codeCreator) [https://cloud.google.com/dataform/docs/access-control?hl=ko#dataform.codeCreator]
노트북에서 쿼리 결과 열기
SQL 쿼리를 실행한 후 노트북을 사용하여 데이터를 탐색할 수 있습니다. 이 방법은 데이터를 사용하기 전에 BigQuery에서 데이터를 수정하려는 경우나 테이블에서 필드 하위 집합만 필요한 경우에 유용합니다.
Google Cloud 콘솔에서 BigQuery 페이지로 이동합니다.
BigQuery로 이동 [https://console.cloud.google.com/bigquery?hl=ko]
검색할 유형 필드에 bigquery-public-data를 입력합니다.
프로젝트가 표시되지 않으면 검색창에 bigquery를 입력한 후 모든 프로젝트 검색을 클릭하여 검색 문자열과 기존 프로젝트를 일치시킵니다.
bigquery-public-data > ml_datasets > penguins를 선택합니다.
penguins 테이블의 경우 more_vert 작업 보기를 클릭한 후 쿼리를 클릭합니다.
다음 예시와 같이 읽도록 생성된 쿼리에 필드 선택에 필요한 별표(*)를 추가합니다.
SELECT * FROM `bigquery-public-data.ml_datasets.penguins` LIMIT 1000;
play_circle 실행을 클릭합니다.
쿼리 결과 섹션에서 데이터 탐색을 클릭한 후 Python 노트북으로 탐색을 클릭합니다.
사용할 노트북 준비
런타임에 연결하고 애플리케이션 기본값을 설정하여 사용할 노트북을 준비합니다.
노트북 헤더에서 연결을 클릭하여 기본 런타임에 연결 [https://cloud.google.com/bigquery/docs/create-notebooks?hl=ko#connect_to_the_default_runtime]합니다.
설정 코드 블록에서 play_circle 셀 실행을 클릭합니다.
데이터 탐색
penguins 데이터를 BigQuery DataFrame [https://cloud.google.com/bigquery/docs/reference/bigquery-dataframes?hl=ko]에 로드하고 결과를 표시하려면 BigQuery 작업에서 DataFrame으로 로드된 결과 집합 섹션의 코드 블록에서 play_circle셀 실행을 클릭합니다.
데이터의 설명 측정항목을 가져오려면 describe()를 사용하여 설명 통계 표시 섹션의 코드 블록에서 play_circle 셀 실행을 클릭합니다.
선택사항: 다른 Python 함수나 패키지를 사용하여 데이터를 탐색하고 분석합니다.
다음 코드 샘플은 bigframes.pandas [https://cloud.google.com/bigquery/docs/use-bigquery-dataframes?hl=ko]를 사용하여 데이터를 분석하고 bigframes.ml [https://cloud.google.com/bigquery/docs/use-bigquery-dataframes?hl=ko#ml-capabilities]을 사용하여 BigQuery DataFrame의 penguins 데이터에서 선형 회귀 모델을 만드는 방법을 보여줍니다.
import bigframes.pandas as bpd

# Load data from BigQuery
query_or_table = "bigquery-public-data.ml_datasets.penguins"
bq_df = bpd.read_gbq(query_or_table)

# Inspect one of the columns (or series) of the DataFrame:
bq_df["body_mass_g"]

# Compute the mean of this series:
average_body_mass = bq_df["body_mass_g"].mean()
print(f"average_body_mass: {average_body_mass}")

# Find the heaviest species using the groupby operation to calculate the
# mean body_mass_g:
(
    bq_df["body_mass_g"]
    .groupby(by=bq_df["species"])
    .mean()
    .sort_values(ascending=False)
    .head(10)
)

# Create the Linear Regression model
from bigframes.ml.linear_model import LinearRegression

# Filter down to the data we want to analyze
adelie_data = bq_df[bq_df.species == "Adelie Penguin (Pygoscelis adeliae)"]

# Drop the columns we don't care about
adelie_data = adelie_data.drop(columns=["species"])

# Drop rows with nulls to get our training data
training_data = adelie_data.dropna()

# Pick feature columns and label column
X = training_data[
    [
        "island",
        "culmen_length_mm",
        "culmen_depth_mm",
        "flipper_length_mm",
        "sex",
    ]
]
y = training_data[["body_mass_g"]]

model = LinearRegression(fit_intercept=False)
model.fit(X, y)
model.score(X, y)
삭제
이 튜토리얼에서 사용된 리소스 비용이 Google Cloud 계정에 청구되지 않도록 하려면 리소스가 포함된 프로젝트를 삭제하거나 프로젝트를 유지하고 개별 리소스를 삭제하세요.
비용이 청구되지 않도록 하는 가장 쉬운 방법은 이 튜토리얼에서 만든 Google Cloud 프로젝트를 삭제하는 것입니다.
주의: 프로젝트 삭제가 미치는 영향은 다음과 같습니다.
프로젝트의 모든 항목이 삭제됩니다. 이 문서의 태스크에 기존 프로젝트를 사용한 경우 프로젝트를 삭제하면 프로젝트에서 수행한 다른 작업도 삭제됩니다.
커스텀 프로젝트 ID가 손실됩니다. 이 프로젝트를 만들 때 앞으로 사용할 커스텀 프로젝트 ID를 만들었을 수 있습니다. appspot.com URL과 같이 프로젝트 ID를 사용하는 URL을 보존하려면 전체 프로젝트를 삭제하는 대신 프로젝트 내에서 선택한 리소스만 삭제합니다.
여러 아키텍처, 튜토리얼, 빠른 시작을 살펴보려는 경우 프로젝트를 재사용하면 프로젝트 할당량 한도 초과를 방지할 수 있습니다.
In the Google Cloud console, go to the Manage resources page.
Go to Manage resources [https://console.cloud.google.com/iam-admin/projects?hl=ko]
In the project list, select the project that you want to delete, and then click Delete.
In the dialog, type the project ID, and then click Shut down to delete the project.
다음 단계
BigQuery에서 노트북 만들기 [https://cloud.google.com/bigquery/docs/create-notebooks?hl=ko] 자세히 알아보기
BigQuery DataFrames를 사용한 데이터 탐색 [https://cloud.google.com/bigquery/docs/use-bigquery-dataframes?hl=ko] 자세히 알아보기
의견 보내기