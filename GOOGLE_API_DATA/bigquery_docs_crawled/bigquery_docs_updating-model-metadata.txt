Source URL: https://cloud.google.com/bigquery/docs/updating-model-metadata

BigQuery [https://cloud.google.com/bigquery?hl=ko]
Documentation [https://cloud.google.com/bigquery/docs?hl=ko]
가이드 [https://cloud.google.com/bigquery/docs/introduction?hl=ko]
도움이 되었나요?
의견 보내기
이 페이지의 내용
필수 권한 [https://cloud.google.com/bigquery/docs/updating-model-metadata?hl=ko#required_permissions]
모델의 설명 업데이트 [https://cloud.google.com/bigquery/docs/updating-model-metadata?hl=ko#description]
모델의 라벨 업데이트 [https://cloud.google.com/bigquery/docs/updating-model-metadata?hl=ko#labels]
모델의 만료 시간 업데이트 [https://cloud.google.com/bigquery/docs/updating-model-metadata?hl=ko#expiration]
다음 단계 [https://cloud.google.com/bigquery/docs/updating-model-metadata?hl=ko#whats_next]
모델 메타데이터 업데이트
bookmark_border
이 페이지에서는 BigQuery ML 모델 메타데이터를 업데이트하는 방법을 설명합니다. 다음 방법을 사용하여 모델 메타데이터를 업데이트할 수 있습니다.
Google Cloud 콘솔 사용
bq 명령줄 도구에서 bq update 명령어 사용
models.patch [https://cloud.google.com/bigquery/docs/reference/rest/v2/models/patch?hl=ko] API 메서드 직접 호출 또는 클라이언트 라이브러리 사용
다음 모델 메타데이터를 업데이트할 수 있습니다.
설명 [https://cloud.google.com/bigquery/docs/updating-model-metadata?hl=ko#description]:Google Cloud 콘솔, bq 명령줄 도구, API 또는 클라이언트 라이브러리를 사용하여 업데이트할 수 있습니다.
라벨 [https://cloud.google.com/bigquery/docs/updating-model-metadata?hl=ko#labels]: Google Cloud 콘솔, bq 명령줄 도구, API 또는 클라이언트 라이브러리를 사용하여 업데이트할 수 있습니다.
만료 시간 [https://cloud.google.com/bigquery/docs/updating-model-metadata?hl=ko#expiration]: bq 도구, API 또는 클라이언트 라이브러리를 사용하여 업데이트할 수 있습니다.
필수 권한
모델 메타데이터를 업데이트하려면 데이터 세트에 대한 WRITER [https://cloud.google.com/bigquery/docs/control-access-to-resources-iam?hl=ko#grant_access_to_a_dataset] 역할을 할당받거나 bigquery.models.updateMetadata 권한이 있는 프로젝트 수준의 Identity and Access Management(IAM) 역할을 할당받아야 합니다. 프로젝트 수준에서 bigquery.models.updateMetadata 권한을 부여받으면 프로젝트의 모든 데이터 세트에 있는 모델의 메타데이터를 업데이트할 수 있습니다. 다음과 같은 사전 정의된 프로젝트 수준의 IAM 역할에는 bigquery.models.updateMetadata 권한이 포함되어 있습니다.
bigquery.dataEditor
bigquery.dataOwner
bigquery.admin
BigQuery ML의 IAM 역할과 권한에 대한 자세한 내용은 액세스 제어 [https://cloud.google.com/bigquery/docs/access-control?hl=ko]를 참조하세요.
모델의 설명 업데이트
모델의 설명은 모델을 식별하는 데 사용되는 텍스트 문자열입니다.
모델의 설명을 업데이트하려면 다음 단계를 따릅니다.
--- 탭: 콘솔 [https://cloud.google.com/bigquery/docs/updating-model-metadata?hl=ko#%EC%BD%98%EC%86%94] ---
Google Cloud 콘솔에서 BigQuery 페이지로 이동합니다.

BigQuery 페이지로 이동 [https://console.cloud.google.com/bigquery?hl=ko] 
탐색기 창에서 프로젝트를 펼친 후 데이터 세트를 펼칩니다.
데이터 세트에서 모델 폴더를 펼친 다음 모델 이름을 클릭하여 모델을 선택합니다.
세부정보 탭을 클릭합니다.
모델의 설명을 업데이트하려면 수정
edit을 클릭합니다.
세부정보 수정 대화상자에서 설명을 업데이트한 후 저장을 클릭합니다.

--- 탭: bq [https://cloud.google.com/bigquery/docs/updating-model-metadata?hl=ko#bq] ---
모델의 설명을 업데이트하려면 bq update 명령어를 --model 또는 -m 플래그 및 --description 플래그와 함께 실행합니다.

기본 프로젝트가 아닌 다른 프로젝트에서 모델을 업데이트하는 경우 프로젝트 ID를 [PROJECT_ID]:[DATASET] 형식으로 데이터 세트에 추가합니다.

bq update --model --description "[STRING]" PROJECT_ID:DATASET.MODEL


다음을 바꿉니다.


STRING은 모델을 따옴표로 묶어 설명하는 텍스트 문자열입니다.
PROJECT_ID는 프로젝트 ID입니다.
DATASET는 데이터 세트 이름입니다.
MODEL은 모델 이름입니다.


명령어 출력은 다음과 같이 표시됩니다.

Model 'myproject.mydataset.mymodel' successfully updated.


bq show 명령어를 실행하여 변경사항을 확인할 수 있습니다. 자세한 내용은 모델 메타데이터 가져오기 [https://cloud.google.com/bigquery/docs/getting-model-metadata?hl=ko]를 참조하세요.

예:

기본 프로젝트의 mydataset에 있는 mymodel의 설명을 업데이트하려면 다음 명령어를 입력합니다.
bq update --model --description "My updated description" \
mydataset.mymodel

myotherproject의 mydataset에 있는 mymodel의 설명을 업데이트하려면 다음 명령어를 입력합니다.
bq update --model --description "My updated description" \
myotherproject:mydataset.mymodel

--- 탭: API [https://cloud.google.com/bigquery/docs/updating-model-metadata?hl=ko#api] ---
API를 사용하여 모델의 설명을 업데이트하려면 models.patch [https://cloud.google.com/bigquery/docs/reference/rest/v2/models/patch?hl=ko] 메서드를 호출하고 projectId, datasetId, modelId를 제공합니다. 설명을 수정하려면 모델 리소스 [https://cloud.google.com/bigquery/docs/reference/rest/v2/models?hl=ko#Model]의 'description' 속성을 추가하거나 업데이트합니다.

--- 탭: Go [https://cloud.google.com/bigquery/docs/updating-model-metadata?hl=ko#go] ---
이 샘플을 사용해 보기 전에 BigQuery 빠른 시작: 클라이언트 라이브러리 사용 [https://cloud.google.com/bigquery/docs/quickstarts/quickstart-client-libraries?hl=ko]의 Go 설정 안내를 따르세요.
        
      
      
  자세한 내용은 BigQuery Go API 참고 문서 [https://godoc.org/cloud.google.com/go/bigquery]를 확인하세요.
  
    
    
      BigQuery에 인증하려면 애플리케이션 기본 사용자 인증 정보를 설정합니다.
      자세한 내용은 클라이언트 라이브러리의 인증 설정 [https://cloud.google.com/bigquery/docs/authentication?hl=ko#client-libs]을 참조하세요.
      
    
      






    
  
  
  
  




















  





  
    
  
  











  









  




  



  


  import (
	"context"
	"fmt"

	"cloud.google.com/go/bigquery"
)

// updateModelDescription demonstrates fetching BigQuery ML model metadata and updating the
// Description metadata.
func updateModelDescription(projectID, datasetID, modelID string) error {
	// projectID := "my-project-id"
	// datasetID := "mydataset"
	// modelID := "mymodel"
	ctx := context.Background()
	client, err := bigquery.NewClient(ctx, projectID)
	if err != nil {
		return fmt.Errorf("bigquery.NewClient: %w", err)
	}
	defer client.Close()

	model := client.Dataset(datasetID).Model(modelID)
	oldMeta, err := model.Metadata(ctx)
	if err != nil {
		return fmt.Errorf("couldn't retrieve model metadata: %w", err)
	}
	update := bigquery.ModelMetadataToUpdate [https://cloud.google.com/go/docs/reference/cloud.google.com/go/bigquery/latest/index.html?hl=ko#cloud_google_com_go_bigquery_ModelMetadataToUpdate]{
		Description: "This model was modified from a Go program",
	}
	if _, err = model.Update(ctx, update, oldMeta.ETag); err != nil {
		return fmt.Errorf("couldn't update model: %w", err)
	}
	return nil
}

--- 탭: tabpanel-java ---
이 샘플을 사용해 보기 전에 BigQuery 빠른 시작: 클라이언트 라이브러리 사용 [https://cloud.google.com/bigquery/docs/quickstarts/quickstart-client-libraries?hl=ko]의 Java 설정 안내를 따르세요.
        
      
      
  자세한 내용은 BigQuery Java API 참고 문서 [https://cloud.google.com/java/docs/reference/google-cloud-bigquery/latest/overview?hl=ko]를 확인하세요.
  
    
    
      BigQuery에 인증하려면 애플리케이션 기본 사용자 인증 정보를 설정합니다.
      자세한 내용은 클라이언트 라이브러리의 인증 설정 [https://cloud.google.com/bigquery/docs/authentication?hl=ko#client-libs]을 참조하세요.
      
    
      






    
  
  
  
  




















  





  
    
  
  











  









  




  



  


  import com.google.cloud.bigquery.BigQuery [https://cloud.google.com/java/docs/reference/google-cloud-bigquery/latest/com.google.cloud.bigquery.BigQuery.html?hl=ko];
import com.google.cloud.bigquery.BigQueryException [https://cloud.google.com/java/docs/reference/google-cloud-bigquery/latest/com.google.cloud.bigquery.BigQueryException.html?hl=ko];
import com.google.cloud.bigquery.BigQueryOptions [https://cloud.google.com/java/docs/reference/google-cloud-bigquery/latest/com.google.cloud.bigquery.BigQueryOptions.html?hl=ko];
import com.google.cloud.bigquery.Model [https://cloud.google.com/java/docs/reference/google-cloud-bigquery/latest/com.google.cloud.bigquery.Model.html?hl=ko];
import com.google.cloud.bigquery.ModelId [https://cloud.google.com/java/docs/reference/google-cloud-bigquery/latest/com.google.cloud.bigquery.ModelId.html?hl=ko];

// Sample to update description on a model
public class UpdateModelDescription {

  public static void runUpdateModelDescription() {
    // TODO(developer): Replace these variables before running the sample.
    String datasetName = "MY_DATASET_NAME";
    String modelName = "MY_MODEL_NAME";
    String newDescription = "A really great model.";
    updateModelDescription(datasetName, modelName, newDescription);
  }

  public static void updateModelDescription(
      String datasetName, String modelName, String newDescription) {
    try {
      // Initialize client that will be used to send requests. This client only needs to be created
      // once, and can be reused for multiple requests.
      BigQuery [https://cloud.google.com/java/docs/reference/google-cloud-bigquery/latest/com.google.cloud.bigquery.BigQuery.html?hl=ko] bigquery = BigQueryOptions [https://cloud.google.com/java/docs/reference/google-cloud-bigquery/latest/com.google.cloud.bigquery.BigQueryOptions.html?hl=ko].getDefaultInstance().getService();

      Model [https://cloud.google.com/java/docs/reference/google-cloud-bigquery/latest/com.google.cloud.bigquery.Model.html?hl=ko] model = bigquery.getModel [https://cloud.google.com/java/docs/reference/google-cloud-bigquery/latest/com.google.cloud.bigquery.BigQuery.html?hl=ko#com_google_cloud_bigquery_BigQuery_getModel_com_google_cloud_bigquery_ModelId_com_google_cloud_bigquery_BigQuery_ModelOption____](ModelId.of(datasetName, modelName));
      bigquery.update [https://cloud.google.com/java/docs/reference/google-cloud-bigquery/latest/com.google.cloud.bigquery.BigQuery.html?hl=ko#com_google_cloud_bigquery_BigQuery_update_com_google_cloud_bigquery_DatasetInfo_com_google_cloud_bigquery_BigQuery_DatasetOption____](model.toBuilder().setDescription(newDescription).build());
      System.out.println("Model description updated successfully to " + newDescription);
    } catch (BigQueryException [https://cloud.google.com/java/docs/reference/google-cloud-bigquery/latest/com.google.cloud.bigquery.BigQueryException.html?hl=ko] e) {
      System.out.println("Model description was not updated \n" + e.toString());
    }
  }
}

--- 탭: tabpanel-node.js ---
이 샘플을 사용해 보기 전에 BigQuery 빠른 시작: 클라이언트 라이브러리 사용 [https://cloud.google.com/bigquery/docs/quickstarts/quickstart-client-libraries?hl=ko]의 Node.js 설정 안내를 따르세요.
        
      
      
  자세한 내용은 BigQuery Node.js API 참고 문서 [https://googleapis.dev/nodejs/bigquery/latest/index.html]를 확인하세요.
  
    
    
      BigQuery에 인증하려면 애플리케이션 기본 사용자 인증 정보를 설정합니다.
      자세한 내용은 클라이언트 라이브러리의 인증 설정 [https://cloud.google.com/bigquery/docs/authentication?hl=ko#client-libs]을 참조하세요.
      
    
      






    
  
  
  
  




















  





  
    
  
  











  









  




  



  


  // Import the Google Cloud client library
const {BigQuery} = require('@google-cloud/bigquery [https://cloud.google.com/nodejs/docs/reference/bigquery/latest/overview.html?hl=ko]');
const bigquery = new BigQuery [https://cloud.google.com/nodejs/docs/reference/bigquery/latest/bigquery/bigquery.html?hl=ko]();

async function updateModel() {
  // Updates a model's metadata.

  /**
   * TODO(developer): Uncomment the following lines before running the sample
   */
  // const datasetId = "my_dataset";
  // const modelId = "my__model";

  const metadata = {
    description: 'A really great model.',
  };

  const dataset = bigquery.dataset(datasetId);
  const [apiResponse] = await dataset.model [https://cloud.google.com/nodejs/docs/reference/bigquery/latest/bigquery/dataset.html?hl=ko](modelId).setMetadata(metadata);
  const newDescription = apiResponse.description;

  console.log(`${modelId} description: ${newDescription}`);
}

--- 탭: tabpanel-python ---
이 샘플을 사용해 보기 전에 BigQuery 빠른 시작: 클라이언트 라이브러리 사용 [https://cloud.google.com/bigquery/docs/quickstarts/quickstart-client-libraries?hl=ko]의 Python 설정 안내를 따르세요.
        
      
      
  자세한 내용은 BigQuery Python API 참고 문서 [https://cloud.google.com/python/docs/reference/bigquery/latest?hl=ko]를 확인하세요.
  
    
    
      BigQuery에 인증하려면 애플리케이션 기본 사용자 인증 정보를 설정합니다.
      자세한 내용은 클라이언트 라이브러리의 인증 설정 [https://cloud.google.com/bigquery/docs/authentication?hl=ko#client-libs]을 참조하세요.
      
    
      






    
  
  
  
  




















  





  
    
  
  











  









  




  



  


  
from google.cloud import bigquery [https://cloud.google.com/python/docs/reference/bigquery/latest/?hl=ko]

# Construct a BigQuery client object.
client = bigquery [https://cloud.google.com/python/docs/reference/bigquery/latest/?hl=ko].Client [https://cloud.google.com/python/docs/reference/bigquery/latest/google.cloud.bigquery.client.Client.html?hl=ko]()

# TODO(developer): Set model_id to the ID of the model to fetch.
# model_id = 'your-project.your_dataset.your_model'

model = client.get_model [https://cloud.google.com/python/docs/reference/bigquery/latest/google.cloud.bigquery.client.Client.html?hl=ko#google_cloud_bigquery_client_Client_get_model](model_id)  # Make an API request.
model.description = "This model was modified from a Python program."
model = client.update_model [https://cloud.google.com/python/docs/reference/bigquery/latest/google.cloud.bigquery.client.Client.html?hl=ko#google_cloud_bigquery_client_Client_update_model](model, ["description"])  # Make an API request.

full_model_id = "{}.{}.{}".format(model.project, model.dataset_id, model.model_id)
print(
    "Updated model '{}' with description '{}'.".format(
        full_model_id, model.description
    )
)
모델의 라벨 업데이트
라벨은 리소스에 연결할 수 있는 키-값 쌍입니다. BigQuery ML 리소스를 만들 때 라벨은 선택사항입니다. 자세한 내용은 라벨 추가 및 사용 [https://cloud.google.com/bigquery/docs/adding-using-labels?hl=ko]을 참조하세요.
모델의 라벨을 업데이트하려면 다음 단계를 따릅니다.
--- 탭: 콘솔 [https://cloud.google.com/bigquery/docs/updating-model-metadata?hl=ko#%EC%BD%98%EC%86%94] ---
탐색기 창에서 프로젝트를 펼친 후 데이터 세트를 펼칩니다.
데이터 세트에서 모델 폴더를 펼친 다음 모델 이름을 클릭하여 모델을 선택합니다.
세부정보 탭을 클릭합니다.
모델의 라벨을 업데이트하려면 수정
edit을 클릭합니다.
세부정보 수정 대화상자에서 라벨을 추가, 삭제 또는 수정하고 저장을 클릭합니다.

--- 탭: bq [https://cloud.google.com/bigquery/docs/updating-model-metadata?hl=ko#bq] ---
모델의 라벨을 업데이트하려면 bq update 명령어를 --model 또는 -m 플래그 및 --set_label 플래그와 함께 실행합니다. 라벨 여러 개를 추가하거나 업데이트하려면 --set_label 플래그를 반복합니다.

기본 프로젝트가 아닌 다른 프로젝트에서 모델을 업데이트하는 경우 프로젝트 ID를 [PROJECT_ID]:[DATASET] 형식으로 데이터 세트에 추가합니다.

bq update --model --set_label KEY:VALUE \
PROJECT_ID:DATASET.MODEL


다음을 바꿉니다.


KEY:VALUE는 추가하거나 업데이트하려는 라벨의 키-값 쌍에 해당합니다. 기존 라벨과 동일한 키를 지정하면 기존 라벨의 값이 업데이트됩니다. 키는 고유해야 합니다.
PROJECT_ID는 프로젝트 ID입니다.
DATASET는 데이터 세트 이름입니다.
MODEL은 모델 이름입니다.


명령어 출력은 다음과 같이 표시됩니다.

Model 'myproject.mydataset.mymodel' successfully updated.


bq show 명령어를 실행하여 변경사항을 확인할 수 있습니다. 자세한 내용은 모델 메타데이터 가져오기 [https://cloud.google.com/bigquery/docs/getting-model-metadata?hl=ko]를 참조하세요.

예:

mymodel의 department 라벨을 업데이트하려면 bq update 명령어를 입력하고 department를 라벨 키로 지정합니다. 예를 들어 department:shipping 라벨을 department:logistics로 업데이트하려면 다음 명령어를 입력합니다. mydataset는 기본 프로젝트가 아닌 myotherproject에 있습니다.
bq update --model --set_label department:logistics \
myotherproject:mydataset.mymodel

--- 탭: API [https://cloud.google.com/bigquery/docs/updating-model-metadata?hl=ko#api] ---
API를 사용하여 모델의 라벨을 업데이트하려면 models.patch [https://cloud.google.com/bigquery/docs/reference/rest/v2/models/patch?hl=ko] 메서드를 호출하고 projectId, datasetId, modelId를 제공합니다. 라벨을 수정하려면 모델 리소스 [https://cloud.google.com/bigquery/docs/reference/rest/v2/models?hl=ko#Model]의 'labels' 속성을 추가하거나 업데이트합니다.
모델의 만료 시간 업데이트
모델의 만료 시간은 모델이 삭제되는 시점을 나타내는 타임스탬프 값입니다. CLI, API 또는 클라이언트 라이브러리를 사용하여 모델을 만들 때 모델의 만료 시간을 설정할 수 있습니다. 또한 모델을 만든 후 모델에서 만료 시간을 설정하거나 업데이트할 수 있습니다. 모델의 만료 시간은 '수명' 또는 TTL이라고도 합니다.
모델에 만료 시간을 설정하지 않으면 모델이 만료되지 않으므로 수동으로 모델을 삭제 [https://cloud.google.com/bigquery/docs/deleting-models?hl=ko]해야 합니다.
참고: 모델의 만료 시간 설정 또는 업데이트는 Google Cloud 콘솔에서 지원되지 않습니다.
만료 시간 값은 값이 설정된 위치에 따라 다르게 표시됩니다. 원하는 세부사항 수준에 따라 적절한 방법을 사용하세요.
명령줄 도구에서는 만료 시간이 현재 UTC 시간의 초 단위로 표시됩니다. 명령줄에서 만료 시간을 지정하면 초 단위의 정수 값이 현재 UTC 타임스탬프에 추가됩니다.
API에서는 만료 시간이 해당 세대부터 밀리초 단위로 표시됩니다. 현재 타임스탬프보다 낮은 만료 값을 지정하면 모델이 즉시 만료됩니다.
모델의 만료 시간을 업데이트하려면 다음 단계를 따릅니다.
--- 탭: 콘솔 [https://cloud.google.com/bigquery/docs/updating-model-metadata?hl=ko#%EC%BD%98%EC%86%94] ---
Google Cloud 콘솔에서는 모델 만료 시간을 설정하거나 업데이트할 수 없습니다.

--- 탭: bq [https://cloud.google.com/bigquery/docs/updating-model-metadata?hl=ko#bq] ---
모델의 만료 시간을 업데이트하려면 bq update 명령어를 --model 또는 -m 플래그 및 --expiration 플래그와 함께 실행합니다.

기본 프로젝트가 아닌 다른 프로젝트에서 모델을 업데이트하는 경우 프로젝트 ID를 [PROJECT_ID]:[DATASET] 형식으로 데이터 세트에 추가합니다.

bq update --model --expiration INTEGER \
PROJECT_ID:DATASET.MODEL


다음을 바꿉니다.


INTEGER는 모델의 수명(초)입니다. 최솟값은 3,600초(1시간)입니다. 만료 시간은 현재 UTC 시간과 정수 값을 더한 값으로 계산됩니다.
PROJECT_ID는 프로젝트 ID입니다.
DATASET는 데이터 세트 이름입니다.
MODEL은 모델 이름입니다.


명령어 출력은 다음과 같이 표시됩니다.

Model 'myproject.mydataset.mymodel' successfully updated.


bq show 명령어를 실행하여 변경사항을 확인할 수 있습니다. 자세한 내용은 모델 메타데이터 가져오기 [https://cloud.google.com/bigquery/docs/getting-model-metadata?hl=ko]를 참조하세요.

예:

mydataset의 mymodel 만료 시간을 5일(432,000초)로 업데이트하려면 다음 명령어를 입력합니다. 여기서 mydataset는 기본 프로젝트에 있습니다.
bq update --model --expiration 432000 mydataset.mymodel

mydataset의 mymodel 만료 시간을 5일(432,000초)로 업데이트하려면 다음 명령어를 입력합니다. mydataset는 기본 프로젝트가 아닌 myotherproject에 있습니다.
bq update --model --expiration 432000 myotherproject:mydataset.mymodel

--- 탭: API [https://cloud.google.com/bigquery/docs/updating-model-metadata?hl=ko#api] ---
API를 사용하여 모델 만료 시간을 업데이트하려면 models.patch [https://cloud.google.com/bigquery/docs/reference/rest/v2/models/patch?hl=ko] 메서드를 호출하고 projectId, datasetId, modelId를 제공합니다. 만료 시간을 수정하려면 모델 리소스 [https://cloud.google.com/bigquery/docs/reference/rest/v2/models?hl=ko#Model]의 'expirationTime' 속성을 추가하거나 업데이트합니다.
'expirationTime'은 해당 세대부터 밀리초 단위로 표시됩니다.
다음 단계
BigQuery ML 개요는 BigQuery ML 소개 [https://cloud.google.com/bigquery/docs/bqml-introduction?hl=ko] 참조하기
BigQuery ML을 시작하려면 BigQuery ML에서 머신러닝 모델 만들기 [https://cloud.google.com/bigquery/docs/create-machine-learning-model?hl=ko] 참조하기
모델 작업에 대한 자세한 내용은 다음을 참조
모델 메타데이터 가져오기 [https://cloud.google.com/bigquery/docs/getting-model-metadata?hl=ko]
모델 나열 [https://cloud.google.com/bigquery/docs/listing-models?hl=ko]
모델 관리 [https://cloud.google.com/bigquery/docs/managing-models?hl=ko]
모델 삭제 [https://cloud.google.com/bigquery/docs/deleting-models?hl=ko]
도움이 되었나요?
의견 보내기