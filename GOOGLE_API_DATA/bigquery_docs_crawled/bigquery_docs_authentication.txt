Source URL: https://cloud.google.com/bigquery/docs/authentication

BigQuery [https://cloud.google.com/bigquery?hl=ko]
Documentation [https://cloud.google.com/bigquery/docs?hl=ko]
가이드 [https://cloud.google.com/bigquery/docs/introduction?hl=ko]
도움이 되었나요?
의견 보내기
BigQuery에 인증
bookmark_border
이 페이지의 내용
API 액세스 [https://cloud.google.com/bigquery/docs/authentication?hl=ko#use-api]
클라이언트 라이브러리 [https://cloud.google.com/bigquery/docs/authentication?hl=ko#client-libraries]
Google Cloud CLI [https://cloud.google.com/bigquery/docs/authentication?hl=ko#gcloud]
REST [https://cloud.google.com/bigquery/docs/authentication?hl=ko#rest]
BigQuery 인증 설정 [https://cloud.google.com/bigquery/docs/authentication?hl=ko#authn-how-to]
로컬 개발 환경용 [https://cloud.google.com/bigquery/docs/authentication?hl=ko#local-development]
Google Cloud [https://cloud.google.com/bigquery/docs/authentication?hl=ko#on-gcp]
온프레미스 또는 다른 클라우드 제공업체 [https://cloud.google.com/bigquery/docs/authentication?hl=ko#on-prem]
이 문서에서는 프로그래매틱 방식으로 BigQuery에 인증하는 방법을 설명합니다. BigQuery에 인증하는 방법은 API에 액세스하는 데 사용하는 인터페이스와 코드가 실행되는 환경에 따라 다릅니다.
BigQuery에 인증에 대한 간단한 예시는 인증 시작하기 [https://cloud.google.com/bigquery/docs/authentication/getting-started?hl=ko]를 참조하세요.
Google Cloud 인증에 대한 자세한 내용은 인증 메서드 [https://cloud.google.com/docs/authentication?hl=ko]를 참조하세요.
API 액세스
BigQuery는 프로그래매틱 액세스를 지원합니다. 다음 방법으로 API에 액세스할 수 있습니다.
클라이언트 라이브러리 [https://cloud.google.com/bigquery/docs/authentication?hl=ko#client-libraries]
Google Cloud CLI [https://cloud.google.com/bigquery/docs/authentication?hl=ko#gcloud]
REST [https://cloud.google.com/bigquery/docs/authentication?hl=ko#rest]
클라이언트 라이브러리
BigQuery API 클라이언트 라이브러리 [https://cloud.google.com/bigquery/docs/reference/libraries?hl=ko]는 BigQuery에 프로그래매틱 방식으로 인증할 수 있도록 고급 언어 지원을 제공합니다. Google Cloud API 호출을 인증하기 위해 클라이언트 라이브러리는 애플리케이션 기본 사용자 인증 정보(ADC) [https://cloud.google.com/docs/authentication/application-default-credentials?hl=ko]를 지원합니다. 라이브러리는 정의된 위치 집합에서 사용자 인증 정보를 찾고 이러한 사용자 인증 정보를 사용해서 API에 대한 요청을 인증합니다. ADC를 사용하면 애플리케이션 코드를 수정할 필요 없이 로컬 개발 또는 프로덕션과 같은 다양한 환경에서 애플리케이션에 사용자 인증 정보를 제공할 수 있습니다.
Google Cloud CLI
gcloud CLI [https://cloud.google.com/bigquery/docs/reference/bq-cli-reference?hl=ko]를 사용하여 BigQuery에 액세스할 때 gcloud CLI 명령어에서 사용하는 사용자 인증 정보를 제공하는 사용자 계정으로 gcloud CLI에 로그인 [https://cloud.google.com/sdk/docs/authorizing?hl=ko]합니다.
조직의 보안 정책으로 인해 사용자 계정에 필요한 권한이 없는 경우 서비스 계정 가장 [https://cloud.google.com/bigquery/docs/authentication?hl=ko#sa-impersonation]을 사용할 수 있습니다.
자세한 내용은 gcloud CLI 사용을 위한 인증 [https://cloud.google.com/docs/authentication/gcloud?hl=ko]을 참조하세요. BigQuery에서 gcloud CLI를 사용하는 방법에 대한 자세한 내용은 gcloud CLI 설치 [https://cloud.google.com/bigquery/docs/reference/bq-cli-reference?hl=ko]를 참조하세요.
REST
gcloud CLI 사용자 인증 정보를 사용하거나 애플리케이션 기본 사용자 인증 정보 [https://cloud.google.com/docs/authentication/application-default-credentials?hl=ko]를 사용하여 BigQuery API [https://cloud.google.com/bigquery/docs/reference/rest?hl=ko]에 인증할 수 있습니다. REST 요청 인증에 대한 자세한 내용은 REST를 사용하여 인증 [https://cloud.google.com/docs/authentication/rest?hl=ko]을 참조하세요. 사용자 인증 정보 유형은 gcloud CLI 사용자 인증 정보 및 ADC 사용자 인증 정보 [https://cloud.google.com/docs/authentication/gcloud?hl=ko#gcloud-credentials]를 참조하세요.
BigQuery 인증 설정
인증 설정 방법은 코드를 실행 중인 환경에 따라 달라집니다.
인증 설정을 위한 가장 일반적인 옵션은 다음과 같습니다. 인증에 대한 추가 옵션 및 자세한 내용은 인증 방법 [https://cloud.google.com/docs/authentication?hl=ko]을 참조하세요.
로컬 개발 환경용
다음 방법으로 로컬 개발 환경의 사용자 인증 정보를 설정할 수 있습니다.
클라이언트 라이브러리 또는 서드 파티 도구의 사용자 인증 정보 [https://cloud.google.com/bigquery/docs/authentication?hl=ko#client-libs]
명령줄을 통한 REST 요청의 사용자 인증 정보 [https://cloud.google.com/bigquery/docs/authentication?hl=ko#rest-requests]
서비스 계정 가장 [https://cloud.google.com/bigquery/docs/authentication?hl=ko#sa-impersonation]
클라이언트 라이브러리 또는 서드 파티 도구
로컬 환경에서 애플리케이션 기본 사용자 인증 정보(ADC) [https://cloud.google.com/docs/authentication/application-default-credentials?hl=ko]를 설정합니다.
Install [https://cloud.google.com/sdk/docs/install?hl=ko] the Google Cloud CLI. After installation, initialize [https://cloud.google.com/sdk/docs/initializing?hl=ko] the Google Cloud CLI by running the following command:
gcloud init
If you're using an external identity provider (IdP), you must first sign in to the gcloud CLI with your federated identity [https://cloud.google.com/iam/docs/workforce-log-in-gcloud?hl=ko].
If you're using a local shell, then create local authentication credentials for your user account:
gcloud auth application-default login
You don't need to do this if you're using Cloud Shell.
If an authentication error is returned, and you are using an external identity provider (IdP), confirm that you have signed in to the gcloud CLI with your federated identity [https://cloud.google.com/iam/docs/workforce-log-in-gcloud?hl=ko].
로그인 화면이 표시됩니다. 로그인하면 사용자 인증 정보는 ADC에서 사용하는 로컬 사용자 인증 정보 파일 [https://cloud.google.com/docs/authentication/application-default-credentials?hl=ko#personal]에 저장됩니다.
로컬 환경에서 ADC 사용에 대한 자세한 내용은 로컬 개발 환경용 ADC 설정 [https://cloud.google.com/docs/authentication/set-up-adc-local-dev-environment?hl=ko]을 참조하세요.
명령줄의 REST 요청
명령줄에서 REST 요청을 수행할 때는 요청을 전송하는 명령어의 일부로 gcloud auth print-access-token [https://cloud.google.com/sdk/gcloud/reference/auth/print-access-token?hl=ko]을 포함하여 gcloud CLI 사용자 인증 정보를 사용할 수 있습니다.
다음 예시에서는 지정된 프로젝트에 대한 서비스 계정을 나열합니다. REST 요청에도 동일한 패턴을 사용할 수 있습니다.
요청 데이터를 사용하기 전에 다음을 바꿉니다.
PROJECT_ID: Google Cloud 프로젝트 ID입니다.
요청을 보내려면 다음 옵션 중 하나를 펼칩니다.
curl(Linux, macOS, Cloud Shell)


PowerShell(Windows)






  REST 및 gRPC를 사용하여 인증하는 방법에 대한 자세한 내용은 REST 사용을 위한 인증 [https://cloud.google.com/docs/authentication/rest?hl=ko]을 참조하세요. 로컬 ADC 사용자 인증 정보와 gcloud CLI 사용자 인증 정보의 차이점에 대한 자세한 내용은 gcloud CLI 인증 구성 및 ADC 구성 [https://cloud.google.com/docs/authentication/gcloud?hl=ko#gcloud-credentials]을 참조하세요.
서비스 계정 가장
대부분의 경우 사용자 인증 정보를 사용하여 로컬 개발 환경에서 인증할 수 있습니다. 이렇게 할 수 없거나 서비스 계정에 할당된 권한을 테스트해야 하는 경우에는 서비스 계정 가장을 사용할 수 있습니다. 서비스 계정 토큰 생성자 [https://cloud.google.com/iam/docs/understanding-roles?hl=ko#iam.serviceAccountTokenCreator](roles/iam.serviceAccountTokenCreator) IAM 역할에 포함된 iam.serviceAccounts.getAccessToken 권한이 있어야 합니다.
gcloud config set 명령어 [https://cloud.google.com/sdk/gcloud/reference/config?hl=ko]를 사용하여 서비스 계정 가장을 사용하도록 gcloud CLI를 설정할 수 있습니다.
gcloud config set auth/impersonate_service_account 
SERVICE_ACCT_EMAIL
일부 언어의 경우 서비스 계정 가장을 사용하여 클라이언트 라이브러리에서 사용할 로컬 ADC 파일을 만들 수 있습니다. 이 방법은 Go, Java, Node.js, Python 클라이언트 라이브러리에서만 지원되며 다른 언어에서는 지원되지 않습니다. 서비스 계정 가장으로 로컬 ADC 파일을 설정하려면 gcloud auth application-default login 명령어 [https://cloud.google.com/sdk/gcloud/reference/auth/application-default/login?hl=ko]와 함께 --impersonate-service-account 플래그 [https://cloud.google.com/sdk/gcloud/reference?hl=ko#--impersonate-service-account]를 사용합니다.
gcloud auth application-default login --impersonate-service-account=
SERVICE_ACCT_EMAIL
서비스 계정 가장에 대한 자세한 내용은 서비스 계정 가장 사용 [https://cloud.google.com/docs/authentication/use-service-account-impersonation?hl=ko]을 참조하세요.
Google Cloud
Google Cloud에서 실행되는 워크로드를 인증하려면 코드가 실행 중인 컴퓨팅 리소스(예: Compute Engine 가상 머신(VM) 인스턴스 [https://cloud.google.com/compute/docs/access/create-enable-service-accounts-for-instances?hl=ko#using])에 연결된 서비스 계정의 사용자 인증 정보를 사용합니다. 이 방식은 Google Cloud 컴퓨팅 리소스에서 실행되는 코드에 선호되는 인증 방법입니다.
대부분의 서비스의 경우 코드를 실행할 리소스를 만들 때 서비스 계정을 연결해야 합니다. 이후에는 서비스 계정을 추가하거나 교체할 수 없습니다. 언제든지 VM 인스턴스에 서비스 계정을 연결할 수 있게 해주는 Compute Engine은 예외입니다.
gcloud CLI를 사용하여 서비스 계정을 만들고 리소스에 연결합니다.
Google Cloud CLI를 설치합니다 [https://cloud.google.com/sdk/docs/install?hl=ko]. 설치 후 다음 명령어를 실행하여 Google Cloud CLI를 초기화 [https://cloud.google.com/sdk/docs/initializing?hl=ko]합니다.
gcloud init
외부 ID 공급업체(IdP)를 사용하는 경우 먼저 제휴 ID로 gcloud CLI에 로그인 [https://cloud.google.com/iam/docs/workforce-log-in-gcloud?hl=ko]해야 합니다.
Set up authentication:
Create the service account:
gcloud iam service-accounts create 
SERVICE_ACCOUNT_NAME
Replace SERVICE_ACCOUNT_NAME with a name for the service account.
To provide access to your project and your resources, grant a role to the service account:
gcloud projects add-iam-policy-binding 
PROJECT_ID --member="serviceAccount:
SERVICE_ACCOUNT_NAME@
PROJECT_ID.iam.gserviceaccount.com" --role=
ROLE
Replace the following:
SERVICE_ACCOUNT_NAME: the name of the service account
PROJECT_ID: the project ID where you created the service account
ROLE: the role to grant
Note: The --role flag affects which resources the service account can access in your project. You can revoke these roles or grant additional roles later. In production environments, do not grant the Owner, Editor, or Viewer roles. Instead, grant a predefined role [https://cloud.google.com/iam/docs/understanding-roles?hl=ko#predefined_roles] or custom role [https://cloud.google.com/iam/docs/understanding-custom-roles?hl=ko] that meets your needs.
To grant another role to the service account, run the command as you did in the previous step.
Grant the required role to the principal that will attach the service account to other resources.
gcloud iam service-accounts add-iam-policy-binding 
SERVICE_ACCOUNT_NAME@
PROJECT_ID.iam.gserviceaccount.com --member="user:
USER_EMAIL" --role=roles/iam.serviceAccountUser
Replace the following:
SERVICE_ACCOUNT_NAME: the name of the service account
PROJECT_ID: the project ID where you created the service account
USER_EMAIL: the email address for a Google Account
코드를 실행할 리소스를 만들고 이 리소스에 서비스 계정을 연결합니다. 예를 들어 Compute Engine을 사용하는 경우 다음 안내를 따르세요.
Create a Compute Engine instance. Configure the instance as follows:
INSTANCE_NAME을 원하는 인스턴스 이름으로 바꿉니다.
--zone 플래그를 인스턴스를 만들 영역 [https://cloud.google.com/compute/docs/zones?hl=ko#available]으로 설정합니다.
--service-account 플래그를 만든 서비스 계정의 이메일 주소로 설정합니다.
gcloud compute instances create 
INSTANCE_NAME --zone=
ZONE --service-account=
SERVICE_ACCOUNT_EMAIL
Google API 인증에 대한 자세한 내용은 인증 방법 [https://cloud.google.com/docs/authentication?hl=ko]을 참조하세요.
온프레미스 또는 다른 클라우드 제공업체
Google Cloud 외부에서 인증을 설정하는 데 선호되는 방법은 워크로드 아이덴티티 제휴를 사용하는 것입니다. 자세한 내용은 인증 문서에서 온프레미스 또는 다른 클라우드 제공업체의 ADC 설정 [https://cloud.google.com/docs/authentication/set-up-adc-on-premises?hl=ko]을 참조하세요.
BigQuery 액세스 제어
BigQuery에 인증한 후에는 Google Cloud 리소스에 액세스할 수 있는 권한이 있어야 합니다. BigQuery는 승인에 Identity and Access Management(IAM)를 사용합니다.
BigQuery의 역할에 대한 자세한 내용은 BigQuery의 IAM 소개 [https://cloud.google.com/bigquery/docs/access-control?hl=ko]를 참조하세요. IAM 및 승인에 대한 자세한 내용은 IAM 개요 [https://cloud.google.com/iam/docs/overview?hl=ko]를 참조하세요.
다음 단계
인증 시작하기 [https://cloud.google.com/bigquery/docs/authentication/getting-started?hl=ko]
설치된 앱을 사용자 계정으로 인증 [https://cloud.google.com/bigquery/docs/authentication/end-user-installed?hl=ko]
JSON 웹 토큰으로 인증 [https://cloud.google.com/bigquery/docs/json-web-tokens?hl=ko]
Google Cloud 인증 방법 [https://cloud.google.com/docs/authentication?hl=ko#auth-decision-tree] 알아보기
인증 사용 사례 [https://cloud.google.com/docs/authentication/use-cases?hl=ko] 목록 살펴보기
도움이 되었나요?
의견 보내기