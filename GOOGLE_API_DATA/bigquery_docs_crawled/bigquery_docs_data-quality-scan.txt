Source URL: https://cloud.google.com/bigquery/docs/data-quality-scan

BigQuery [https://cloud.google.com/bigquery?hl=ko]
Documentation [https://cloud.google.com/bigquery/docs?hl=ko]
가이드 [https://cloud.google.com/bigquery/docs/introduction?hl=ko]
도움이 되었나요?
의견 보내기
이 페이지의 내용
시작하기 전에 [https://cloud.google.com/bigquery/docs/data-quality-scan?hl=ko#before_you_begin]
필요한 역할 [https://cloud.google.com/bigquery/docs/data-quality-scan?hl=ko#required_roles]
필요한 데이터 스캔 역할 [https://cloud.google.com/bigquery/docs/data-quality-scan?hl=ko#permissions-rules]
데이터 품질 스캔 만들기 [https://cloud.google.com/bigquery/docs/data-quality-scan?hl=ko#create_a_data_quality_scan]
데이터 품질 스캔 실행 [https://cloud.google.com/bigquery/docs/data-quality-scan?hl=ko#run-scans]
데이터 품질 문제 스캔
bookmark_border
이 문서에서는 BigQuery와 Dataplex 범용 카탈로그를 함께 사용하여 데이터가 품질 기대치를 충족하도록 하는 방법을 설명합니다. Dataplex Universal Catalog 자동 데이터 품질을 사용하면 BigQuery 테이블의 데이터 품질을 정의하고 측정할 수 있습니다. 데이터 스캔을 자동화하고 정의된 규칙에 따라 데이터를 검증하며 데이터가 품질 요구사항을 충족하지 않으면 알림을 로깅할 수 있습니다.
자동 데이터 품질에 대한 자세한 내용은 자동 데이터 품질 개요 [https://cloud.google.com/dataplex/docs/auto-data-quality-overview?hl=ko]를 참고하세요.
도움말: 이 문서의 단계에서는 프로젝트 전반에서 데이터 품질 스캔을 관리하는 방법을 보여줍니다. 특정 테이블을 사용할 때 데이터 품질 스캔을 만들고 관리할 수도 있습니다. 자세한 내용은 이 문서의 특정 테이블의 데이터 품질 스캔 관리 [https://cloud.google.com/bigquery/docs/data-quality-scan?hl=ko#start-from-table] 섹션을 참조하세요.
시작하기 전에
Enable the Dataplex API.
Enable the API [https://console.cloud.google.com/flows/enableapi?apiid=dataplex.googleapis.com&hl=ko]
선택사항: Dataplex Universal Catalog에서 데이터 프로필 스캔 결과를 기반으로 데이터 품질 규칙 추천을 생성하게 하려면 데이터 프로필 스캔을 만들고 실행 [https://cloud.google.com/bigquery/docs/data-profile-scan?hl=ko]합니다.
필요한 역할
BigQuery 테이블에서 데이터 품질 스캔을 실행하려면 BigQuery 테이블을 읽을 수 있는 권한과 테이블을 스캔하는 데 사용된 프로젝트에서 BigQuery 작업을 만들 수 있는 권한이 있어야 합니다.
참고: Dataplex Universal Catalog는 프로젝트에서 BigQuery 작업을 만들지 않습니다. 하지만 테이블의 권한을 확인하기 위해 DryRun 작업을 만들려면 이 권한이 필요합니다.
BigQuery 테이블과 데이터 품질 스캔이 서로 다른 프로젝트에 있는 경우 데이터 품질 스캔이 포함된 프로젝트의 Dataplex Universal Catalog 서비스 계정에 해당 BigQuery 테이블에 대한 읽기 권한을 부여해야 합니다.
참고: 데이터 품질 또는 데이터 프로필 스캔을 만들지 않았거나 이 프로젝트에 Dataplex Universal Catalog 레이크가 없으면 gcloud beta services identity create --service=dataplex.googleapis.com을 실행하여 서비스 식별자를 만듭니다. 이 명령어는 Dataplex Universal Catalog 서비스 식별자가 있는 경우 반환합니다.
데이터 품질 규칙이 추가 테이블을 참조하는 경우 스캔 프로젝트의 서비스 계정에 동일한 테이블에 대한 읽기 권한이 있어야 합니다.
스캔 결과를 BigQuery 테이블로 내보내는 데 필요한 권한을 얻으려면 관리자에게 Dataplex Universal Catalog 서비스 계정에 결과 데이터 세트 및 테이블에 대한 BigQuery 데이터 편집자(roles/bigquery.dataEditor) IAM 역할을 부여해달라고 요청하세요. 그러면 다음 권한을 부여합니다.
bigquery.datasets.get
bigquery.tables.create
bigquery.tables.get
bigquery.tables.getData
bigquery.tables.update
bigquery.tables.updateData
BigQuery 데이터가 Dataplex Universal Catalog 레이크에 구성되어 있으면 Dataplex Universal Catalog 서비스 계정에 Dataplex 메타데이터 리더(roles/dataplex.metadataReader) 및 Dataplex 뷰어(roles/dataplex.viewer) IAM 역할을 부여합니다. 또는 다음 권한이 모두 필요합니다.
dataplex.lakes.list
dataplex.lakes.get
dataplex.zones.list
dataplex.zones.get
dataplex.entities.list
dataplex.entities.get
dataplex.operations.get
Cloud Storage에서 BigQuery 외부 테이블을 스캔하는 경우 Dataplex Universal Catalog 서비스 계정에 버킷에 대한 스토리지 객체 뷰어(roles/storage.objectViewer) 역할을 부여합니다. 또는 Dataplex Universal Catalog 서비스 계정에 다음 권한을 할당합니다.
storage.buckets.get
storage.objects.get
데이터 품질 스캔 결과를 Dataplex Universal Catalog 메타데이터로 게시하려면 테이블에 대한 BigQuery 데이터 편집자(roles/bigquery.dataEditor) IAM 역할과 테이블과 동일한 위치에 있는 @bigquery 항목 그룹에 대한 dataplex.entryGroups.useDataQualityScorecardAspect 권한을 부여받아야 합니다. 또는 테이블과 동일한 위치에 있는 @bigquery 항목 그룹에 대한 Dataplex 카탈로그 편집자(roles/dataplex.catalogEditor) 역할이 부여되어야 합니다.
또는 다음 권한이 모두 필요합니다.
테이블에 대한 bigquery.tables.get
테이블에 대한 bigquery.tables.update
테이블에 대한 bigquery.tables.updateData
테이블에 대한 bigquery.tables.delete
@bigquery 항목 그룹에 대한 dataplex.entryGroups.useDataQualityScorecardAspect
또는 다음 권한이 모두 필요합니다.
@bigquery 항목 그룹에 대한 dataplex.entries.update
@bigquery 항목 그룹에 대한 dataplex.entryGroups.useDataQualityScorecardAspect
BigQuery 열 수준 액세스 정책으로 보호되는 열에 액세스해야 하는 경우 해당 열에 Dataplex Universal Catalog 서비스 계정 권한을 할당합니다. 데이터 스캔을 만들거나 업데이트하는 사용자는 열에 대한 권한도 필요합니다.
테이블에 BigQuery 행 수준 액세스 정책이 사용 설정되어 있으면 Dataplex Universal Catalog 서비스 계정에 표시되는 행만 스캔할 수 있습니다. 개별 사용자의 액세스 권한은 행 수준 정책에 따라 평가되지 않습니다.
필요한 데이터 스캔 역할
자동 데이터 품질을 사용하려면 관리자에게 다음 IAM 역할 중 하나를 부여해 달라고 요청하세요.
DataScan 리소스에 대한 전체 액세스 권한: Dataplex DataScan 관리자(roles/dataplex.dataScanAdmin)
DataScan 리소스 만들기: 프로젝트에 대한 Dataplex DataScan 생성자(roles/dataplex.dataScanCreator)
DataScan 리소스에 대한 쓰기 액세스 권한: Dataplex DataScan 편집자(roles/dataplex.dataScanEditor)
규칙 및 결과를 제외한 DataScan 리소스에 대한 읽기 액세스 권한: Dataplex DataScan 뷰어(roles/dataplex.dataScanViewer)
규칙 및 결과를 포함한 DataScan 리소스에 대한 읽기 액세스 권한: Dataplex DataScan DataViewer(roles/dataplex.dataScanDataViewer)
다음 표에는 DataScan 권한이 나와 있습니다.
권한 이름 다음 작업을 수행할 수 있는 권한을 부여합니다.
dataplex.datascans.create DataScan 만들기
dataplex.datascans.delete DataScan 삭제
dataplex.datascans.get ID 또는 일정(결과 및 규칙 제외)과 같은 작업 메타데이터 보기
dataplex.datascans.getData 규칙 및 결과를 포함한 DataScan 세부정보 보기
dataplex.datascans.list DataScan 나열
dataplex.datascans.run DataScan 실행
dataplex.datascans.update DataScan의 설명 업데이트
dataplex.datascans.getIamPolicy 스캔에서 현재 IAM 권한 보기
dataplex.datascans.setIamPolicy 스캔에서 IAM 권한 설정
데이터 품질 스캔 만들기
--- 탭: 콘솔 [https://cloud.google.com/bigquery/docs/data-quality-scan?hl=ko#%EC%BD%98%EC%86%94] ---
Google Cloud 콘솔의 BigQuery 메타데이터 선별 페이지에서 데이터 프로파일링 및 품질 탭으로 이동합니다.


  
  데이터 프로파일링 및 품질로 이동 [https://console.cloud.google.com/bigquery/governance/metadata-curation/data-profiling-and-quality?hl=ko]



데이터 품질 스캔 만들기를 클릭합니다.
스캔 정의 창에서 다음 필드를 작성합니다.


선택사항: 표시 이름을 입력합니다.
ID를 입력합니다. 리소스 이름 지정 규칙 [https://cloud.google.com/compute/docs/naming-resources?hl=ko#resource-name-format]을 참조하세요.
선택사항: 설명을 입력합니다.
테이블 필드에서 찾아보기를 클릭합니다. 스캔할 테이블을 선택한 다음 선택을 클릭합니다.

표준 BigQuery 테이블만 지원됩니다.

멀티 리전 데이터 세트의 테이블에서 데이터 스캔을 생성할 리전을 선택합니다.

Dataplex Universal Catalog 레이크 내에 구성된 테이블을 찾아보려면 Dataplex 레이크 내에서 찾아보기를 클릭합니다.
범위 필드에서 증분 또는 전체 데이터를 선택합니다.


증분을 선택한 경우: 타임스탬프 열 필드에서 새 레코드가 추가될 때 증가하고 새 레코드를 식별하는 데 사용할 수 있는 BigQuery 테이블의 DATE 또는 TIMESTAMP 유형 열을 선택합니다. 테이블의 파티션을 나누는 열일 수 있습니다.

데이터를 필터링하려면 행 필터링 체크박스를 선택합니다. GoogleSQL 문법의 WHERE 절 [https://cloud.google.com/bigquery/docs/reference/standard-sql/query-syntax?hl=ko#where_clause]의 일부로 사용될 수 있는 유효한 SQL 표현식으로 구성된 행 필터를 제공합니다.
예를 들면 col1 >= 0입니다.
필터는 여러 열 조건의 조합일 수 있습니다. 예를 들면 col1 >= 0 AND col2 < 10입니다.
데이터를 샘플링하려면 샘플링 크기 목록에서 샘플링 비율을 선택합니다. 소수점 이하 3자리까지 0.0%에서 100.0% 사이의 백분율 값을 선택합니다. 데이터 세트가 클수록 낮은 샘플링 비율을 선택합니다. 예를 들어 1PB 테이블의 경우 0.1%에서 1.0% 사이의 값을 입력하면 데이터 품질 스캔에서 1~10TB의 데이터를 샘플링합니다. 증분 데이터 스캔의 경우 데이터 품질 스캔은 최신 증분에 샘플링을 적용합니다.
데이터 품질 스캔 결과를 Dataplex Universal Catalog 메타데이터로 게시하려면 BigQuery 및 Dataplex 카탈로그에 결과 게시 체크박스를 선택합니다.

소스 테이블의 BigQuery 및 Dataplex Universal Catalog 페이지에 있는 데이터 품질 탭에서 최신 스캔 결과를 확인할 수 있습니다. 사용자가 게시된 스캔 결과에 액세스할 수 있도록 하려면 이 문서의 데이터 프로필 스캔 결과에 대한 액세스 권한 부여 [https://cloud.google.com/bigquery/docs/data-quality-scan?hl=ko#share-results] 섹션을 참조하세요.

일정 섹션에서 다음 옵션 중 하나를 선택합니다.


반복: 시간별, 일별, 주별, 월별 또는 커스텀 일정으로 데이터 품질 스캔을 실행합니다. 스캔 실행 빈도와 시간을 지정합니다. 커스텀을 선택하는 경우 크론 [https://en.wikipedia.org/wiki/Cron] 형식을 사용하여 일정을 지정합니다.
주문형: 데이터 품질 스캔을 주문형으로 실행합니다.

계속을 클릭합니다.

데이터 품질 규칙 창에서 이 데이터 품질 스캔 구성을 위한 규칙을 정의합니다.


규칙 추가를 클릭한 후 다음 옵션 중에서 선택합니다.


프로필 기반 추천: 기존 데이터 프로파일링 스캔에 기반을 둔 추천으로 규칙을 빌드합니다.


열 선택: 권장 규칙을 가져올 열을 선택합니다.
스캔 프로젝트 선택: 데이터 프로필 스캔이 데이터 품질 스캔을 만드는 프로젝트와 다른 프로젝트에 있는 경우 프로필 스캔을 가져올 프로젝트를 선택합니다.
프로필 결과 선택: 프로필 결과를 하나 이상 선택한 후 확인을 클릭합니다. 그러면 시작점으로 사용할 수 있는 추천 규칙 목록이 채워집니다.
추가할 규칙의 체크박스를 선택한 다음 선택을 클릭합니다. 선택하면 규칙이 현재 규칙 목록에 추가됩니다. 그런 다음 규칙을 수정할 수 있습니다.

기본 제공 규칙 유형: 사전 정의된 규칙에서 규칙을 빌드합니다.
사전 정의된 규칙 [https://cloud.google.com/dataplex/docs/auto-data-quality-overview?hl=ko#predefined-rules] 목록을 참조하세요.


열 선택: 규칙을 선택할 열을 선택합니다.
규칙 유형 선택: 선택할 규칙 유형을 선택한 후 확인을 클릭합니다. 표시되는 규칙 유형은 선택한 열에 따라 다릅니다.
추가할 규칙의 체크박스를 선택한 다음 선택을 클릭합니다. 선택하면 규칙이 현재 규칙 목록에 추가됩니다. 그런 다음 규칙을 수정할 수 있습니다.

SQL 행 확인 규칙: 각 행에 적용할 커스텀 SQL 규칙을 만듭니다.


측정기준에서 측정기준 1개를 선택합니다.
통과 기준에서 검사를 통과해야 하는 레코드의 백분율을 선택합니다.
열 이름에서 열을 선택합니다.
SQL 표현식 제공 필드에 불리언 true(통과) 또는 false(실패)로 평가되는 SQL 표현식을 입력합니다. 자세한 내용은 지원되는 커스텀 SQL 규칙 유형 [https://cloud.google.com/dataplex/docs/auto-data-quality-overview?hl=ko#supported-custom-sql-rule-types] 및 데이터 품질 규칙 정의 [https://cloud.google.com/dataplex/docs/use-auto-data-quality?hl=ko#sample-rules]의 예시를 참조하세요.
추가를 클릭합니다.

SQL 집계 확인 규칙: 커스텀 SQL 테이블 조건 규칙을 만듭니다.


측정기준에서 측정기준 1개를 선택합니다.
열 이름에서 열을 선택합니다.
SQL 표현식 제공 필드에 불리언 true(통과) 또는 false(실패)로 평가되는 SQL 표현식을 입력합니다. 자세한 내용은 지원되는 커스텀 SQL 규칙 유형 [https://cloud.google.com/dataplex/docs/auto-data-quality-overview?hl=ko#supported-custom-sql-rule-types] 및 데이터 품질 규칙 정의 [https://cloud.google.com/dataplex/docs/use-auto-data-quality?hl=ko#sample-rules]의 예시를 참조하세요.
추가를 클릭합니다.

SQL 어설션 규칙: 데이터의 잘못된 상태를 확인하는 커스텀 SQL 어설션 규칙을 만듭니다.


측정기준에서 측정기준 1개를 선택합니다.
선택사항: 열 이름에서 열을 선택합니다.
SQL 문 제공 필드에 잘못된 상태와 일치하는 행을 반환하는 SQL 문을 입력합니다. 반환되는 행이 있으면 이 규칙이 실패합니다. SQL 문에서 후행 세미콜론을 생략합니다. 자세한 내용은 지원되는 커스텀 SQL 규칙 유형 [https://cloud.google.com/dataplex/docs/auto-data-quality-overview?hl=ko#supported-custom-sql-rule-types] 및 데이터 품질 규칙 정의 [https://cloud.google.com/dataplex/docs/use-auto-data-quality?hl=ko#sample-rules]의 예시를 참조하세요.
추가를 클릭합니다.


선택사항: 데이터 품질 규칙의 경우 모니터링 및 알림에 사용할 커스텀 규칙 이름과 설명을 할당할 수 있습니다. 이렇게 하려면 규칙을 수정하고 다음 세부정보를 지정합니다.


규칙 이름: 최대 63자의 커스텀 규칙 이름을 입력합니다.
규칙 이름에는 문자(a~z, A~Z), 숫자(0~9), 하이픈(-)이 포함될 수 있으며 문자로 시작하고 숫자 또는 문자로 끝나야 합니다.
설명: 최대 길이가 1,024자인 규칙 설명을 입력합니다.

이전 단계를 반복하여 데이터 품질 스캔에 규칙을 추가합니다. 작업을 마치면 계속을 클릭합니다.

선택사항: 스캔 결과를 BigQuery 표준 테이블로 내보냅니다. BigQuery 테이블로 스캔 결과 내보내기 섹션에서 다음을 실행합니다.


BigQuery 데이터 세트 선택 필드에서 찾아보기를 클릭합니다. 데이터 품질 스캔 결과를 저장할 BigQuery 데이터 세트를 선택합니다.
BigQuery 테이블 필드에서 데이터 품질 스캔 결과를 저장할 테이블을 지정합니다. 기존 테이블을 사용하는 경우 내보내기 테이블 스키마 [https://cloud.google.com/dataplex/docs/use-auto-data-quality?hl=ko#table-schema]와 호환되는지 확인합니다.
지정된 테이블이 없으면 Dataplex Universal Catalog에서 테이블을 만듭니다.
참고: 여러 데이터 품질 스캔에 동일한 결과 테이블을 사용할 수 있습니다.

선택사항: 라벨을 추가합니다. 라벨은 관련 객체를 함께 그룹화하거나 다른 Google Cloud 리소스와 그룹화할 수 있게 해주는 키-값 쌍입니다.
선택사항: 이메일 알림 보고서를 설정하여 데이터 품질 스캔 작업의 상태와 결과를 사용자에게 알립니다. 알림 보고서 섹션에서 add 이메일 ID 추가를 클릭하고 최대 5개의 이메일 주소를 입력합니다. 그런 다음 보고서를 전송할 시나리오를 선택합니다.


품질 점수(<=): 지정된 목표 점수보다 낮은 데이터 품질 점수로 작업이 성공하면 보고서를 전송합니다. 0에서 100 사이의 목표 품질 점수를 입력합니다.
작업 실패: 데이터 품질 결과와 관계없이 작업 자체가 실패하면 보고서를 전송합니다.
작업 완료(성공 또는 실패): 데이터 품질 결과와 관계없이 작업이 종료되면 보고서를 전송합니다.

만들기를 클릭합니다.

스캔이 생성된 후 지금 실행을 클릭하여 언제든지 실행할 수 있습니다.

--- 탭: gcloud [https://cloud.google.com/bigquery/docs/data-quality-scan?hl=ko#gcloud] ---
데이터 품질 스캔을 만들려면 gcloud dataplex datascans create data-quality 명령어 [https://cloud.google.com/sdk/gcloud/reference/dataplex/datascans/create/data-quality?hl=ko]를 사용합니다.

소스 데이터가 Dataplex Universal Catalog 레이크에 구성된 경우 --data-source-entity 플래그를 포함합니다.
gcloud dataplex datascans create data-quality DATASCAN \
    --location=LOCATION \
    --data-quality-spec-file=DATA_QUALITY_SPEC_FILE \
    --data-source-entity=DATA_SOURCE_ENTITY

소스 데이터가 Dataplex Universal Catalog 레이크에 구성되지 않은 경우 --data-source-resource 플래그를 포함합니다.
gcloud dataplex datascans create data-quality DATASCAN \
    --location=LOCATION \
    --data-quality-spec-file=DATA_QUALITY_SPEC_FILE \
    --data-source-resource=DATA_SOURCE_RESOURCE

다음 변수를 바꿉니다.


DATASCAN: 데이터 품질 스캔의 이름입니다.
LOCATION: 데이터 품질 스캔을 만들 Google Cloud 리전입니다.
DATA_QUALITY_SPEC_FILE: 데이터 품질 스캔의 사양이 포함된 JSON 또는 YAML 파일의 경로입니다. 파일은 로컬 파일이거나 프리픽스 gs://가 있는 Cloud Storage 경로일 수 있습니다.
이 파일을 사용하여 스캔 데이터 품질 규칙을 지정합니다. 이 파일에서 필터, 샘플링 비율, 스캔 후 작업(예: BigQuery로 내보내기 또는 이메일 알림 보고서 전송)과 같은 추가 세부정보를 지정할 수도 있습니다. JSON 표현 문서 [https://cloud.google.com/dataplex/docs/reference/rest/v1/DataQualitySpec?hl=ko] 및 YAML 표현 예시 [https://cloud.google.com/dataplex/docs/use-auto-data-quality?hl=ko#create-scan-using-gcloud]를 참조하세요.
DATA_SOURCE_ENTITY: 데이터 품질 스캔의 데이터가 포함된 Dataplex Universal Catalog 항목입니다. 예를 들면 projects/test-project/locations/test-location/lakes/test-lake/zones/test-zone/entities/test-entity입니다.
DATA_SOURCE_RESOURCE: 데이터 품질 스캔의 데이터가 포함된 리소스의 이름입니다. 예를 들면 //bigquery.googleapis.com/projects/test-project/datasets/test-dataset/tables/test-table입니다.

--- 탭: REST [https://cloud.google.com/bigquery/docs/data-quality-scan?hl=ko#rest] ---
데이터 품질 스캔을 만들려면 dataScans.create 메서드 [https://cloud.google.com/dataplex/docs/reference/rest/v1/projects.locations.dataScans/create?hl=ko]를 사용합니다.

데이터 프로파일링 스캔의 결과를 기반으로 하는 규칙 권장사항을 사용하여 데이터 품질 스캔 규칙을 빌드하려면 데이터 프로파일링 스캔에서 dataScans.jobs.generateDataQualityRules 메서드 [https://cloud.google.com/dataplex/docs/reference/rest/v1/projects.locations.dataScans.jobs/generateDataQualityRules?hl=ko]를 호출하여 권장사항을 가져옵니다.
참고: BigQuery 테이블에서 파티션 필터 필요가 true로 설정된 경우 BigQuery 파티션 열을 데이터 품질 스캔 행 필터 또는 타임스탬프 열로 사용하세요.
데이터 품질 스캔 실행
--- 탭: 콘솔 [https://cloud.google.com/bigquery/docs/data-quality-scan?hl=ko#%EC%BD%98%EC%86%94] ---
Google Cloud 콘솔의 BigQuery 메타데이터 선별 페이지에서 데이터 프로파일링 및 품질 탭으로 이동합니다.


  
  데이터 프로파일링 및 품질로 이동 [https://console.cloud.google.com/bigquery/governance/metadata-curation/data-profiling-and-quality?hl=ko]



실행할 데이터 품질 스캔을 클릭합니다.
지금 실행을 클릭합니다.

--- 탭: gcloud [https://cloud.google.com/bigquery/docs/data-quality-scan?hl=ko#gcloud] ---
데이터 품질 스캔을 실행하려면 gcloud dataplex datascans run 명령어 [https://cloud.google.com/sdk/gcloud/reference/dataplex/datascans/run?hl=ko]를 사용합니다.

gcloud dataplex datascans run DATASCAN \
--location=LOCATION \


다음 변수를 바꿉니다.


LOCATION: 데이터 품질 스캔이 생성된 Google Cloud 리전입니다.
DATASCAN: 데이터 품질 스캔의 이름입니다.

--- 탭: REST [https://cloud.google.com/bigquery/docs/data-quality-scan?hl=ko#rest] ---
데이터 품질 스캔을 실행하려면 dataScans.run 메서드 [https://cloud.google.com/dataplex/docs/reference/rest/v1/projects.locations.dataScans/run?hl=ko]를 사용합니다.
데이터 품질 스캔 결과 보기
--- 탭: 콘솔 [https://cloud.google.com/bigquery/docs/data-quality-scan?hl=ko#%EC%BD%98%EC%86%94] ---
Google Cloud 콘솔의 BigQuery 메타데이터 선별 페이지에서 데이터 프로파일링 및 품질 탭으로 이동합니다.


  
  데이터 프로파일링 및 품질로 이동 [https://console.cloud.google.com/bigquery/governance/metadata-curation/data-profiling-and-quality?hl=ko]



데이터 품질 스캔의 이름을 클릭합니다.


개요 섹션에는 스캔이 실행된 시기, 각 작업에서 스캔한 레코드 수, 모든 데이터 품질 검사 통과 여부, 실패한 경우 실패한 데이터 품질 검사 수를 포함한 최근 작업에 대한 정보가 표시됩니다.
데이터 품질 스캔 구성 섹션에 스캔 세부정보가 표시됩니다.

통과한 규칙 비율을 나타내는 데이터 품질 점수, 실패한 규칙, 작업 로그와 같은 작업에 대한 세부정보를 보려면 작업 기록 탭을 클릭합니다. 그런 다음 작업 ID를 클릭합니다.

참고: 스캔 결과를 BigQuery 테이블로 내보낸 경우 테이블에서 스캔 결과에 액세스할 수도 있습니다. 스캔 결과를 Dataplex Universal Catalog 메타데이터로 게시한 경우에 데이터 품질 점수를 확인할 수 있습니다.

--- 탭: gcloud [https://cloud.google.com/bigquery/docs/data-quality-scan?hl=ko#gcloud] ---
데이터 품질 스캔 작업의 결과를 보려면 gcloud dataplex datascans jobs describe 명령어 [https://cloud.google.com/sdk/gcloud/reference/dataplex/datascans/jobs/describe?hl=ko]를 사용합니다.

gcloud dataplex datascans jobs describe JOB \
--location=LOCATION \
--datascan=DATASCAN \
--view=FULL


다음 변수를 바꿉니다.


JOB: 데이터 품질 스캔 작업의 작업 ID입니다.
LOCATION: 데이터 품질 스캔이 생성된 Google Cloud 리전입니다.
DATASCAN: 작업이 속한 데이터 품질 스캔의 이름입니다.
--view=FULL: 스캔 작업 결과를 보려면 FULL을 지정합니다.

--- 탭: REST [https://cloud.google.com/bigquery/docs/data-quality-scan?hl=ko#rest] ---
데이터 품질 스캔 결과를 보려면 dataScans.get 메서드 [https://cloud.google.com/dataplex/docs/reference/rest/v1/projects.locations.dataScans/get?hl=ko]를 사용합니다.
게시된 결과 보기
데이터 품질 스캔 결과가 Dataplex Universal Catalog 메타데이터로 게시된 경우Google Cloud 콘솔의 BigQuery 및 Dataplex Universal Catalog 페이지에 있는 소스 테이블의 데이터 품질 탭에서 최신 스캔 결과를 확인할 수 있습니다.
Google Cloud 콘솔에서 BigQuery 페이지로 이동합니다.
BigQuery로 이동 [https://console.cloud.google.com/bigquery?hl=ko]
탐색기 창에서 데이터 품질 스캔 결과를 확인할 테이블을 선택합니다.
데이터 품질 탭을 클릭합니다.
최근에 게시된 결과가 표시됩니다.
참고: 스캔을 처음 실행하는 경우 게시된 결과가 제공되지 않을 수 있습니다.
이전 스캔 결과 보기
Dataplex Universal Catalog는 지난 300개 작업 또는 지난 1년 동안의 데이터 품질 스캔 기록 중 먼저 발생하는 작업을 저장합니다.
--- 탭: 콘솔 [https://cloud.google.com/bigquery/docs/data-quality-scan?hl=ko#%EC%BD%98%EC%86%94] ---
Google Cloud 콘솔의 BigQuery 메타데이터 선별 페이지에서 데이터 프로파일링 및 품질 탭으로 이동합니다.


  
  데이터 프로파일링 및 품질로 이동 [https://console.cloud.google.com/bigquery/governance/metadata-curation/data-profiling-and-quality?hl=ko]



데이터 품질 스캔의 이름을 클릭합니다.
작업 기록 탭을 클릭합니다.

작업 기록 탭에서는 각 작업에서 스캔된 레코드 수, 작업 상태, 작업이 실행된 시간, 각 규칙의 통과 또는 실패 여부 등 이전 작업에 대한 정보를 제공합니다.
작업에 대한 자세한 정보를 보려면 작업 ID 열에서 아무 작업이나 클릭합니다.

--- 탭: gcloud [https://cloud.google.com/bigquery/docs/data-quality-scan?hl=ko#gcloud] ---
이전 데이터 품질 스캔 작업을 보려면 gcloud dataplex datascans jobs list 명령어 [https://cloud.google.com/sdk/gcloud/reference/dataplex/datascans/jobs/list?hl=ko]를 사용합니다.

gcloud dataplex datascans jobs list \
--location=LOCATION \
--datascan=DATASCAN \


다음 변수를 바꿉니다.


LOCATION: 데이터 품질 스캔이 생성된 Google Cloud 리전입니다.
DATASCAN: 이전 작업을 볼 데이터 품질 스캔의 이름입니다.

--- 탭: REST [https://cloud.google.com/bigquery/docs/data-quality-scan?hl=ko#rest] ---
이전 데이터 품질 스캔 작업을 보려면 dataScans.jobs.list 메서드 [https://cloud.google.com/dataplex/docs/reference/rest/v1/projects.locations.dataScans.jobs/list?hl=ko]를 사용합니다.
데이터 품질 스캔 결과에 대한 액세스 권한 부여
조직의 사용자가 스캔 결과를 볼 수 있도록 하려면 다음 단계를 따르세요.
Google Cloud 콘솔의 BigQuery 메타데이터 선별 페이지에서 데이터 프로파일링 및 품질 탭으로 이동합니다.
데이터 프로파일링 및 품질로 이동 [https://console.cloud.google.com/bigquery/governance/metadata-curation/data-profiling-and-quality?hl=ko]
결과를 공유할 데이터 품질 스캔을 클릭합니다.
권한 탭을 클릭합니다.
다음 단계를 따르세요.
주 구성원에게 액세스 권한을 부여하려면 person_add 액세스 권한 부여를 클릭합니다. 연결된 주 구성원에게 Dataplex DataScan DataViewer 역할을 부여합니다.
주 구성원으로부터 액세스 권한을 삭제하려면 Dataplex DataScan DataViewer 역할을 삭제할 주 구성원을 선택합니다. person_remove 액세스 권한 삭제를 클릭한 다음 메시지가 표시되면 확인합니다.
데이터 품질 오류 문제 해결
Cloud Logging의 로그를 사용하여 데이터 품질 오류에 대한 알림을 설정할 수 있습니다. 샘플 쿼리를 비롯한 자세한 내용은 Cloud Logging에서 알림 설정 [https://cloud.google.com/dataplex/docs/use-auto-data-quality?hl=ko#set-alerts]을 참조하세요.
실패한 행 수준 규칙이 있는 각 작업에 대해 Dataplex Universal Catalog는 실패한 레코드를 가져오는 쿼리를 제공합니다. 이 쿼리를 실행하여 규칙과 일치하지 않는 레코드를 확인합니다.
참고: 이 쿼리는 실패한 열뿐만 아니라 테이블의 모든 열을 반환합니다.
--- 탭: 콘솔 [https://cloud.google.com/bigquery/docs/data-quality-scan?hl=ko#%EC%BD%98%EC%86%94] ---
Google Cloud 콘솔의 BigQuery 메타데이터 선별 페이지에서 데이터 프로파일링 및 품질 탭으로 이동합니다.


  
  데이터 프로파일링 및 품질로 이동 [https://console.cloud.google.com/bigquery/governance/metadata-curation/data-profiling-and-quality?hl=ko]



문제를 해결하려는 레코드의 데이터 품질 스캔 이름을 클릭합니다.
작업 기록 탭을 클릭합니다.
데이터 품질 오류를 식별한 작업의 작업 ID를 클릭합니다.
작업 결과 창이 열리면 규칙 섹션에서 쿼리하여 실패한 레코드 가져오기 열을 찾습니다. 실패한 규칙의 쿼리를 클립보드에 복사를 클릭합니다.
BigQuery에서 쿼리를 실행 [https://cloud.google.com/bigquery/docs/running-queries?hl=ko]하여 작업 실패 원인인 레코드를 확인합니다.

--- 탭: gcloud [https://cloud.google.com/bigquery/docs/data-quality-scan?hl=ko#gcloud] ---
지원되지 않음

--- 탭: REST [https://cloud.google.com/bigquery/docs/data-quality-scan?hl=ko#rest] ---
데이터 품질 오류를 식별한 작업을 가져오려면 dataScans.get 메서드 [https://cloud.google.com/dataplex/docs/reference/rest/v1/DataQualityResult?hl=ko]를 사용합니다.

응답 객체의 failingRowsQuery 필드에 쿼리가 표시됩니다.
BigQuery에서 쿼리를 실행 [https://cloud.google.com/bigquery/docs/running-queries?hl=ko]하여 작업 실패 원인인 레코드를 확인합니다.
특정 테이블의 데이터 품질 스캔 관리
이 문서의 단계에서는Google Cloud 콘솔의 BigQuery 메타데이터 선별> 데이터 프로파일링 및 품질 페이지를 사용하여 프로젝트 전반에서 데이터 품질 스캔을 관리하는 방법을 보여줍니다.
특정 테이블을 사용할 때 데이터 품질 스캔을 만들고 관리할 수도 있습니다. Google Cloud 콘솔에서 해당 테이블에 대한 BigQuery 페이지에 있는 데이터 품질 탭을 사용합니다. 다음 단계를 따르세요.
Google Cloud 콘솔에서 BigQuery 페이지로 이동합니다.
BigQuery로 이동 [https://console.cloud.google.com/bigquery?hl=ko]
탐색기 창에서 테이블을 선택합니다.
데이터 품질 탭을 클릭합니다.
결과가 Dataplex Universal Catalog 메타데이터로 게시된 데이터 품질 스캔이 테이블에 있는지 여부에 따라 다음과 같은 방법으로 테이블의 데이터 품질 스캔을 사용할 수 있습니다.
데이터 품질 스캔 결과가 게시됨: 페이지에 최신 스캔 결과가 표시됩니다.
이 테이블의 데이터 품질 스캔을 관리하려면 데이터 품질 스캔을 클릭한 후 다음 옵션 중에서 선택합니다.
새 스캔 만들기: 새 데이터 품질 스캔을 만듭니다. 자세한 내용은 이 문서의 데이터 품질 스캔 만들기 [https://cloud.google.com/bigquery/docs/data-quality-scan?hl=ko#create-scan] 섹션을 참조하세요. 테이블의 세부정보 페이지에서 스캔을 만들면 테이블이 미리 선택됩니다.
지금 실행: 스캔을 실행합니다.
스캔 구성 수정: 표시 이름, 필터, 일정 등 설정을 수정합니다.
데이터 품질 규칙을 수정하려면 데이터 품질 탭에서 규칙 탭을 클릭합니다. 규칙 수정을 클릭합니다. 규칙을 업데이트한 다음 저장을 클릭합니다.
스캔 권한 관리: 스캔 결과에 액세스할 수 있는 사용자를 관리합니다. 자세한 내용은 이 문서의 데이터 품질 스캔 결과에 대한 액세스 권한 부여 [https://cloud.google.com/bigquery/docs/data-quality-scan?hl=ko#share-results] 섹션을 참조하세요.
이전 결과 보기: 이전 데이터 품질 스캔 작업에 관한 세부정보를 확인합니다. 자세한 내용은 이 문서의 데이터 품질 스캔 결과 보기 [https://cloud.google.com/bigquery/docs/data-quality-scan?hl=ko#results] 및 이전 스캔 결과 보기 [https://cloud.google.com/bigquery/docs/data-quality-scan?hl=ko#older-scans] 섹션을 참조하세요.
모든 스캔 보기: 이 테이블에 적용되는 데이터 품질 스캔 목록을 봅니다.
데이터 품질 스캔 결과가 게시되지 않음: 다음 옵션 중에서 선택합니다.
데이터 품질 스캔 만들기: 새 데이터 품질 스캔을 만듭니다. 자세한 내용은 이 문서의 데이터 품질 스캔 만들기 [https://cloud.google.com/bigquery/docs/data-quality-scan?hl=ko#create-scan] 섹션을 참조하세요. 테이블의 세부정보 페이지에서 스캔을 만들면 테이블이 미리 선택됩니다.
기존 스캔 보기: 이 테이블에 적용되는 데이터 품질 스캔 목록을 봅니다.
테이블의 데이터 품질 스캔 보기
특정 테이블에 적용되는 데이터 품질 스캔을 보려면 다음 단계를 따르세요.
Google Cloud 콘솔의 BigQuery 메타데이터 선별 페이지에서 데이터 프로파일링 및 품질 탭으로 이동합니다.
데이터 프로파일링 및 품질로 이동 [https://console.cloud.google.com/bigquery/governance/metadata-curation/data-profiling-and-quality?hl=ko]
테이블 이름과 스캔 유형으로 목록을 필터링합니다.
데이터 품질 스캔 업데이트
표시 이름, 필터, 일정, 데이터 품질 규칙 등 기존 데이터 품질 스캔의 다양한 설정을 수정할 수 있습니다.
참고: 기존 데이터 품질 스캔이Google Cloud 콘솔의 BigQuery 및 Dataplex Universal Catalog 페이지에 결과를 게시하고 향후 스캔 결과를 Dataplex Universal Catalog 메타데이터로 게시하려면 스캔을 수정하고 게시를 다시 사용 설정해야 합니다. 카탈로그 게시를 사용 설정하려면 추가 권한이 필요할 수 있습니다.
--- 탭: 콘솔 [https://cloud.google.com/bigquery/docs/data-quality-scan?hl=ko#%EC%BD%98%EC%86%94] ---
Google Cloud 콘솔의 BigQuery 메타데이터 선별 페이지에서 데이터 프로파일링 및 품질 탭으로 이동합니다.


  
  데이터 프로파일링 및 품질로 이동 [https://console.cloud.google.com/bigquery/governance/metadata-curation/data-profiling-and-quality?hl=ko]



데이터 품질 스캔의 이름을 클릭합니다.
표시 이름, 필터, 일정 등의 설정을 수정하려면 수정을 클릭합니다. 값을 수정한 다음 저장을 클릭합니다.
데이터 품질 규칙을 수정하려면 스캔 세부정보 페이지에서 현재 규칙 탭을 클릭합니다. 규칙 수정을 클릭합니다. 규칙을 업데이트한 다음 저장을 클릭합니다.

--- 탭: gcloud [https://cloud.google.com/bigquery/docs/data-quality-scan?hl=ko#gcloud] ---
데이터 품질 스캔의 설명을 업데이트하려면 gcloud dataplex datascans update data-quality 명령어 [https://cloud.google.com/sdk/gcloud/reference/dataplex/datascans/update/data-quality?hl=ko]를 사용합니다.

gcloud dataplex datascans update data-quality DATASCAN \
--location=LOCATION \
--description=DESCRIPTION


다음을 바꿉니다.


DATASCAN: 업데이트할 데이터 품질 스캔의 이름입니다.
LOCATION: 데이터 품질 스캔이 생성된 Google Cloud 리전입니다.
DESCRIPTION: 데이터 품질 스캔에 대한 새로운 설명입니다.
참고: 데이터 품질 사양 파일에서 rules, rowFilter 또는 samplingPercent와 같은 사양 필드를 업데이트할 수 있습니다. JSON [https://cloud.google.com/dataplex/docs/reference/rest/v1/DataQualitySpec?hl=ko] 및 YAML [https://cloud.google.com/dataplex/docs/use-auto-data-quality?hl=ko#create-scan-using-gcloud] 표현을 참조하세요.

--- 탭: REST [https://cloud.google.com/bigquery/docs/data-quality-scan?hl=ko#rest] ---
데이터 품질 스캔을 수정하려면 dataScans.patch 메서드 [https://cloud.google.com/dataplex/docs/reference/rest/v1/projects.locations.dataScans/patch?hl=ko]를 사용합니다.
데이터 품질 스캔 삭제
--- 탭: 콘솔 [https://cloud.google.com/bigquery/docs/data-quality-scan?hl=ko#%EC%BD%98%EC%86%94] ---
Google Cloud 콘솔의 BigQuery 메타데이터 선별 페이지에서 데이터 프로파일링 및 품질 탭으로 이동합니다.


  
  데이터 프로파일링 및 품질로 이동 [https://console.cloud.google.com/bigquery/governance/metadata-curation/data-profiling-and-quality?hl=ko]



삭제하려는 스캔을 클릭합니다.
삭제를 클릭한 후 메시지가 표시되면 확인합니다.

--- 탭: gcloud [https://cloud.google.com/bigquery/docs/data-quality-scan?hl=ko#gcloud] ---
데이터 품질 스캔을 삭제하려면 gcloud dataplex datascans delete 명령어 [https://cloud.google.com/sdk/gcloud/reference/dataplex/datascans/delete?hl=ko]를 사용합니다.

gcloud dataplex datascans delete DATASCAN \
--location=LOCATION \
--async


다음 변수를 바꿉니다.


DATASCAN: 삭제할 데이터 품질 스캔의 이름입니다.
LOCATION: 데이터 품질 스캔이 생성된 Google Cloud 리전입니다.

--- 탭: REST [https://cloud.google.com/bigquery/docs/data-quality-scan?hl=ko#rest] ---
데이터 품질 스캔을 삭제하려면 dataScans.delete 메서드 [https://cloud.google.com/dataplex/docs/reference/rest/v1/projects.locations.dataScans/delete?hl=ko]를 사용합니다.
다음 단계
BigQuery의 데이터 거버넌스 [https://cloud.google.com/bigquery/docs/data-governance?hl=ko] 자세히 알아보기
도움이 되었나요?
의견 보내기