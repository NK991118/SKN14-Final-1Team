Source URL: https://cloud.google.com/bigquery/docs/aws-vpn-network-attachment

BigQuery [https://cloud.google.com/bigquery?hl=ko]
Documentation [https://cloud.google.com/bigquery/docs?hl=ko]
가이드 [https://cloud.google.com/bigquery/docs/introduction?hl=ko]
의견 보내기
이 페이지의 내용
시작하기 전에 [https://cloud.google.com/bigquery/docs/aws-vpn-network-attachment?hl=ko#before-you-begin]
AWS에서 네트워킹 설정 [https://cloud.google.com/bigquery/docs/aws-vpn-network-attachment?hl=ko#set-up-on-aws]
Google Cloud에서 네트워킹 설정 [https://cloud.google.com/bigquery/docs/aws-vpn-network-attachment?hl=ko#set-up-on-gcp]
VPN 게이트웨이 만들기 [https://cloud.google.com/bigquery/docs/aws-vpn-network-attachment?hl=ko#create-vpn-gateway]
네트워크 연결 만들기 [https://cloud.google.com/bigquery/docs/aws-vpn-network-attachment?hl=ko#create-network-attachment]
VPN 연결 테스트 [https://cloud.google.com/bigquery/docs/aws-vpn-network-attachment?hl=ko#test-vpn-connection]
문제 해결 [https://cloud.google.com/bigquery/docs/aws-vpn-network-attachment?hl=ko#troubleshoot]
AWS-Google Cloud VPN 및 네트워크 연결 설정
bookmark_border
이 문서에서는 Amazon Web Services(AWS)와 Google Cloud간에 VPN 연결을 설정하는 자세한 단계를 제공합니다. 목표는 두 클라우드 환경 간에 안정적이고 보안이 강화된 연결을 설정하는 것입니다.
시작하기 전에
다음 항목이 준비되었는지 확인하세요.
AWS 및 Google Cloud 계정에 액세스할 수 있는 적절한 권한
AWS 및 Google Cloud의 기존 가상 프라이빗 클라우드(VPC) [https://cloud.google.com/vpc/docs/overview?hl=ko]
AWS에서 네트워킹 설정
데이터베이스가 배포된 VPC에 연결되는 가상 비공개 게이트웨이를 만듭니다. 자세한 안내는 AWS 문서의 AWS Direct Connect 가상 비공개 게이트웨이 만들기 [https://docs.aws.amazon.com/directconnect/latest/UserGuide/create-virtual-private-gateway.html]를 참조하세요.
Google CloudVPN 게이트웨이의 공개 IP 주소를 사용하여 고객 게이트웨이를 만듭니다. 자세한 안내는 AWS 문서의 고객 게이트웨이 만들기 [https://docs.aws.amazon.com/vpn/latest/s2svpn/SetUpVPNConnections.html#vpn-create-cgw]를 참조하세요.
앞서 만든 가상 비공개 게이트웨이와 고객 게이트웨이를 사용하여 VPN 연결을 만듭니다. 자세한 안내는 AWS 문서의 AWS Client VPN 시작하기 [https://docs.aws.amazon.com/vpn/latest/clientvpn-admin/cvpn-getting-started.html] 및 AWS Direct Connect 연결을 통해 암호화된 연결 설정 방법 [https://repost.aws/knowledge-center/create-vpn-direct-connect]을 참조하세요.
VPN 연결을 사용하여 Google Cloud IP 범위로 트래픽을 전달하는 경로를 추가합니다. 자세한 안내는 AWS 문서의 경로 테이블 구성 [https://docs.aws.amazon.com/vpc/latest/userguide/VPC_Route_Tables.html] 및 라우팅 구성 [https://docs.aws.amazon.com/vpn/latest/s2svpn/SetUpVPNConnections.html#vpn-configure-route-tables]을 참조하세요.
Google Cloud에서 네트워킹 설정
Google Cloud 에서 설정하려면 VPN 게이트웨이와 VPN 터널을 만들고, 경로를 구성하고, Google Cloud네트워크 연결을 만들어야 합니다.
VPN 게이트웨이 만들기
참고: 다음 단계에서는 기본 VPN [https://cloud.google.com/network-connectivity/docs/vpn/concepts/overview?hl=ko#classic-vpn]을 만드는 방법을 설명합니다. 사용 사례에 적합한 경우 고가용성(HA) VPN을 대신 만들 수 있습니다. 자세한 내용은 피어 VPN 게이트웨이에 대한 HA VPN 게이트웨이 만들기 [https://cloud.google.com/network-connectivity/docs/vpn/how-to/creating-ha-vpn?hl=ko]를 참조하세요.
Google Cloud 콘솔에서 Cloud VPN 게이트웨이 페이지로 이동합니다.
Cloud VPN 게이트웨이로 이동 [https://console.cloud.google.com/hybrid/vpn?tab=gateways&hl=ko]
VPN 게이트웨이 만들기를 클릭합니다.
기본 VPN 옵션 버튼을 선택합니다.
VPN 게이트웨이 이름을 입력합니다.
VPN 게이트웨이와 터널을 만들 기존 VPC 네트워크를 선택합니다.
리전을 선택합니다.
IP 주소에 리전별 외부 IP 주소 [https://cloud.google.com/compute/docs/ip-addresses?hl=ko#reservedaddress]를 만들거나 기존 주소를 선택합니다.
터널 이름을 입력합니다.
원격 피어 IP 주소에 AWS VPN 게이트웨이 공개 IP 주소를 입력합니다.
IKE 버전 및 IKE 사전 공유 키의 옵션을 지정합니다.
트래픽을 AWS IP 범위로 전달하는 데 필요한 라우팅 옵션을 지정합니다.
만들기를 클릭합니다.
자세한 내용은 게이트웨이 및 터널 만들기 [https://cloud.google.com/network-connectivity/docs/vpn/how-to/creating-static-vpns?hl=ko#create_a_gateway_and_tunnel]를 참조하세요.
네트워크 연결 만들기
Google Cloud 콘솔에서 네트워크 연결 페이지로 이동합니다.
네트워크 연결로 이동 [https://console.cloud.google.com/net-services/psc/list/networkAttachments?hl=ko]
add 네트워크 연결 만들기를 클릭합니다.
네트워크 연결 이름을 입력합니다.
네트워크에서 적절한 VPC 네트워크를 선택합니다.
리전에서 VPN 게이트웨이가 있는 위치를 선택합니다.
서브네트워크에서 이전에 만든 VPN 터널을 선택합니다.
네트워크 연결 만들기를 클릭합니다.
자세한 내용은 네트워크 연결 만들기 [https://cloud.google.com/vpc/docs/create-manage-network-attachments?hl=ko#create-network-attachments]를 참조하세요.
VPN 연결 테스트
AWS 및 Google CloudVPC 환경 모두에 인스턴스를 배포합니다.
연결을 확인하려면 VPN을 통해 인스턴스를 핑하거나 연결합니다.
보안 그룹 및 방화벽 규칙이 VPN을 통한 트래픽을 허용하는지 확인합니다.
문제 해결
네트워크 연결을 설정하는 데 문제가 있는 경우 다음을 수행하세요.
AWS 및 Google Cloud 콘솔에서 VPN 연결이 실행 중인지 확인합니다.
VPN 로그에서 오류 또는 삭제된 패킷이 있는지 확인합니다.
AWS 및Google Cloud 에서 라우팅 테이블이 올바르게 구성되었는지 확인합니다.
AWS 보안 그룹 및 Google Cloud 방화벽 규칙에서 필요한 포트가 열려 있는지 확인합니다.
의견 보내기