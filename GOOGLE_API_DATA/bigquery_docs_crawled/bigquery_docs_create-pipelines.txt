Source URL: https://cloud.google.com/bigquery/docs/create-pipelines

BigQuery [https://cloud.google.com/bigquery?hl=ko]
Documentation [https://cloud.google.com/bigquery/docs?hl=ko]
가이드 [https://cloud.google.com/bigquery/docs/introduction?hl=ko]
도움이 되었나요?
의견 보내기
이 페이지의 내용
시작하기 전에 [https://cloud.google.com/bigquery/docs/create-pipelines?hl=ko#before_you_begin]
파이프라인에 필요한 역할 [https://cloud.google.com/bigquery/docs/create-pipelines?hl=ko#required_roles_for_pipelines]
노트북 옵션에 필요한 역할 [https://cloud.google.com/bigquery/docs/create-pipelines?hl=ko#required_roles_for_notebook_options]
코드 애셋의 기본 리전 설정 [https://cloud.google.com/bigquery/docs/create-pipelines?hl=ko#set_the_default_region_for_code_assets]
파이프라인 만들기 [https://cloud.google.com/bigquery/docs/create-pipelines?hl=ko#create_a_pipeline]
파이프라인 만들기
bookmark_border
이 문서에서는 BigQuery에서 파이프라인 [https://cloud.google.com/bigquery/docs/pipelines-introduction?hl=ko]을 만드는 방법을 설명합니다. 파이프라인은 Dataform [https://cloud.google.com/dataform/docs/overview?hl=ko]을 기반으로 합니다.
시작하기 전에
Sign in to your Google Cloud account. If you're new to Google Cloud, create an account [https://console.cloud.google.com/freetrial?hl=ko] to evaluate how our products perform in real-world scenarios. New customers also get $300 in free credits to run, test, and deploy workloads.
In the Google Cloud console, on the project selector page, select or create a Google Cloud project.
Note: If you don't plan to keep the resources that you create in this procedure, create a project instead of selecting an existing project. After you finish these steps, you can delete the project, removing all resources associated with the project.
Go to project selector [https://console.cloud.google.com/projectselector2/home/dashboard?hl=ko]
Verify that billing is enabled for your Google Cloud project [https://cloud.google.com/billing/docs/how-to/verify-billing-enabled?hl=ko#confirm_billing_is_enabled_on_a_project].
Enable the BigQuery, Dataform, and Vertex AI APIs.
Enable the APIs [https://console.cloud.google.com/flows/enableapi?apiid=bigquery.googleapis.com%2Cdataform.googleapis.com%2Caiplatform.googleapis.com&hl=ko]
파이프라인에 필요한 역할
파이프라인을 만드는 데 필요한 권한을 얻으려면 관리자에게 프로젝트에 대한 다음 IAM 역할을 부여해 달라고 요청하세요.
파이프라인 만들기: 코드 생성자 [https://cloud.google.com/iam/docs/roles-permissions/dataform?hl=ko#dataform.codeCreator](roles/dataform.codeCreator)
파이프라인 수정 및 실행: Dataform 편집자 [https://cloud.google.com/iam/docs/roles-permissions/dataform?hl=ko#dataform.editor](roles/dataform.editor)
역할 부여에 대한 자세한 내용은 프로젝트, 폴더, 조직에 대한 액세스 관리 [https://cloud.google.com/iam/docs/granting-changing-revoking-access?hl=ko]를 참조하세요.
커스텀 역할 [https://cloud.google.com/iam/docs/creating-custom-roles?hl=ko]이나 다른 사전 정의된 역할 [https://cloud.google.com/iam/docs/roles-overview?hl=ko#predefined]을 통해 필요한 권한을 얻을 수도 있습니다.
Dataform IAM에 대한 자세한 내용은 IAM으로 액세스 제어 [https://cloud.google.com/dataform/docs/access-control?hl=ko]를 참조하세요.
참고: 파이프라인을 만들면 BigQuery는 특별히 해당 파이프라인에만 Dataform 관리자(roles/dataform.admin [https://cloud.google.com/iam/docs/understanding-roles?hl=ko#dataform.admin]) 역할을 부여합니다. 그러면 소유자 액세스 권한이 부여되어 워크플로를 관리하고 수정할 수 있습니다. Google Cloud 프로젝트 수준에서 Dataform 관리자 역할을 부여받은 사용자는 해당 프로젝트 내 모든 파이프라인에 대한 소유자 액세스 권한을 갖게 됩니다.
노트북 옵션에 필요한 역할
노트북 옵션에서 런타임 템플릿을 선택하는 데 필요한 권한을 얻으려면 관리자에게 프로젝트에 대한 노트북 런타임 사용자 [https://cloud.google.com/iam/docs/roles-permissions/aiplatform?hl=ko#aiplatform.notebookRuntimeUser](roles/aiplatform.notebookRuntimeUser) IAM 역할을 부여해 달라고 요청하세요. 역할 부여에 대한 자세한 내용은 프로젝트, 폴더, 조직에 대한 액세스 관리 [https://cloud.google.com/iam/docs/granting-changing-revoking-access?hl=ko]를 참조하세요.
커스텀 역할 [https://cloud.google.com/iam/docs/creating-custom-roles?hl=ko]이나 다른 사전 정의된 역할 [https://cloud.google.com/iam/docs/roles-overview?hl=ko#predefined]을 통해 필요한 권한을 얻을 수도 있습니다.
이 역할이 없으면 기본 노트북 런타임 사양을 선택할 수 있습니다.
코드 애셋의 기본 리전 설정
코드 애셋을 처음 만드는 경우 코드 애셋의 기본 리전을 설정해야 합니다. 생성된 후에는 코드 애셋 리전을 변경할 수 없습니다.
참고: 파이프라인을 만들고 코드 애셋에 사용 중인 리전과 다른 기본 리전을 선택하면(예: us-central1을 사용 중일 때 us-west1 선택) 해당 파이프라인과 이후에 만드는 모든 코드 애셋은 기본적으로 새 리전을 사용합니다. 기존 코드 애셋에서는 만들 때 지정된 리전을 계속 사용합니다.
BigQuery Studio의 모든 코드 애셋은 같은 기본 리전을 사용합니다. 코드 애셋의 기본 리전을 설정하려면 다음 단계를 수행합니다.
BigQuery 페이지로 이동합니다.
BigQuery로 이동 [https://console.cloud.google.com/bigquery?hl=ko]
탐색기 창에서 코드 애셋을 사용 설정한 프로젝트를 찾습니다.
프로젝트 옆에 있는 more_vert 작업 보기를 클릭한 후 기본 코드 리전 변경을 클릭합니다.
리전에서 코드 애셋에 사용할 리전을 선택합니다.
선택을 클릭합니다.
사용 가능한 리전 목록은 BigQuery Studio 위치 [https://cloud.google.com/bigquery/docs/locations?hl=ko#bqstudio-loc]를 참조하세요.
파이프라인 만들기
파이프라인을 만들려면 다음 단계를 수행합니다.
BigQuery 페이지로 이동합니다.
BigQuery로 이동 [https://console.cloud.google.com/bigquery?hl=ko]
편집기 창의 탭 표시줄에서 + 기호 옆에 있는 arrow_drop_down 화살표를 클릭한 후 파이프라인을 클릭합니다.
선택사항: 파이프라인 이름을 바꾸려면 파이프라인 이름을 클릭한 후 새 이름을 입력합니다.
시작하기를 클릭한 다음 설정 탭으로 이동합니다.
인증 섹션에서 Google 계정 사용자 인증 정보나 서비스 계정으로 파이프라인을 승인합니다.
Google 계정 사용자 인증 정보(프리뷰 [https://cloud.google.com/products?hl=ko#product-launch-stages])를 사용하려면 내 사용자 인증 정보로 실행을 선택합니다.
서비스 계정을 사용하려면 선택한 서비스 계정으로 실행을 선택한 후 서비스 계정을 선택합니다.
위치 섹션에서 파이프라인 처리 리전을 선택합니다.
특정 리전을 선택하려면 리전을 선택한 후 리전 메뉴에서 리전을 선택합니다.
멀티 리전을 선택하려면 멀티 리전을 선택한 후 멀티 리전 메뉴에서 멀티 리전을 선택합니다.
파이프라인 처리 리전은 코드 애셋의 기본 스토리지 리전과 일치하지 않아도 됩니다.
노트북 옵션
노트북을 파이프라인에 추가하려면 노트북 옵션 섹션에서 다음을 수행합니다.
런타임 템플릿 필드에서 기본 노트북 런타임을 수락하거나 기존 런타임을 검색하여 선택합니다.
기본 런타임 사양을 보려면 옆에 있는 화살표를 클릭합니다.
새 런타임을 만들려면 런타임 템플릿 만들기 [https://cloud.google.com/colab/docs/create-runtime-template?hl=ko]를 참조하세요.
참고: 노트북 런타임 템플릿은 템플릿을 지정하는 파이프라인과 동일한 리전에 있어야 합니다.
Cloud Storage 버킷 필드에서 찾아보기를 클릭하고 파이프라인에서 노트북 출력을 저장할 Cloud Storage 버킷을 선택하거나 만듭니다.
버킷 수준 정책에 주 구성원 추가 [https://cloud.google.com/storage/docs/access-control/using-iam-permissions?hl=ko#bucket-add]를 수행하여 예약된 파이프라인 실행 출력을 저장하는 데 사용할 Cloud Storage 버킷에 커스텀 Dataform 서비스 계정을 주 구성원으로 추가하고 이 주 구성원에게 스토리지 관리자(roles/storage.admin [https://cloud.google.com/iam/docs/understanding-roles?hl=ko#storage.admin]) 역할을 부여합니다.
선택한 커스텀 Dataform 서비스 계정에 선택한 버킷의 스토리지 관리자 IAM 역할이 부여되어야 합니다.
파이프라인 태스크 추가
파이프라인에 태스크를 추가하려면 다음 단계를 수행합니다.
Google Cloud 콘솔에서 BigQuery 페이지로 이동합니다.
BigQuery로 이동 [https://console.cloud.google.com/bigquery?hl=ko]
탐색기 창에서 프로젝트와 파이프라인 폴더를 펼친 후 파이프라인을 선택합니다.
SQL 쿼리, 노트북 또는 데이터 준비와 같은 코드 애셋을 추가하려면 다음을 수행합니다.
--- 탭: SQL 쿼리 [https://cloud.google.com/bigquery/docs/create-pipelines?hl=ko#sql-%EC%BF%BC%EB%A6%AC] ---
태스크 추가를 클릭한 다음 쿼리를 선택합니다.
새 쿼리를 만들거나 기존 쿼리를 가져올 수 있습니다.
선택사항: 쿼리 태스크 세부정보 창의 선행 작업 메뉴에서 쿼리 앞에 실행할 태스크를 선택합니다.

쿼리는 이전 태스크에 따라 다릅니다.


새 쿼리 만들기


쿼리 수정 옆에 있는 arrow_drop_down 화살표 메뉴를 클릭하고 컨텍스트에서 또는 새 탭에서를 선택합니다.
기존 쿼리를 검색합니다.
쿼리 이름을 선택한 후 Enter 키를 누릅니다.
저장을 클릭합니다.
선택사항: 쿼리 이름을 바꾸려면 파이프라인 창에서 쿼리 이름을 클릭하고 쿼리 수정을 클릭한 후 화면 상단에서 기존 쿼리 이름을 클릭하고 새 이름을 입력합니다.


기존 쿼리 가져오기


쿼리 수정 옆에 있는 arrow_drop_down 화살표 메뉴를 클릭하고 사본 가져오기를 클릭합니다.
가져올 기존 쿼리를 검색하거나 검색 창에서 기존 쿼리를 선택합니다. 쿼리를 가져오면 쿼리 소스 파일이 파이프라인에 복사되므로 원본은 변경되지 않습니다.
수정을 클릭하여 가져온 쿼리를 엽니다.
저장을 클릭합니다.

--- 탭: 노트북 [https://cloud.google.com/bigquery/docs/create-pipelines?hl=ko#%EB%85%B8%ED%8A%B8%EB%B6%81] ---
태스크 추가를 클릭한 다음 노트북을 선택합니다.
새 노트북을 만들거나 기존 노트북을 가져올 수 있습니다.
노트북 런타임 템플릿 설정을 변경하려면 노트북 옵션 [https://cloud.google.com/bigquery/docs/create-pipelines?hl=ko#notebook_options]을 참조하세요.
선택사항: 노트북 태스크 세부정보 창의 선행 작업 메뉴에서 노트북 앞에 실행할 태스크를 선택합니다.

노트북은 이전 태스크에 따라 다릅니다.


새 노트북 만들기


노트북 수정 옆에 있는 arrow_drop_down 화살표 메뉴를 클릭하고 컨텍스트에서 또는 새 탭에서를 선택합니다.
기존 노트북을 검색합니다.
노트북 이름을 선택한 후 Enter 키를 누릅니다.
저장을 클릭합니다.
선택사항: 노트북 이름을 바꾸려면 파이프라인 창에서 노트북 이름을 클릭하고 노트북 수정을 클릭한 후 화면 상단에서 기존 노트북 이름을 클릭하고 새 이름을 입력합니다.


기존 노트북 가져오기


노트북 수정 옆에 있는 arrow_drop_down 화살표 메뉴를 클릭하고 사본 가져오기를 클릭합니다.
가져올 기존 노트북을 검색하거나 검색 창에서 기존 노트북을 선택합니다. 노트북을 가져오면 노트북 소스 파일이 파이프라인에 복사되므로 원본은 변경되지 않습니다.
가져온 노트북을 열려면 수정을 클릭합니다.
저장을 클릭합니다.

--- 탭: 데이터 준비 [https://cloud.google.com/bigquery/docs/create-pipelines?hl=ko#%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%A4%80%EB%B9%84] ---
태스크 추가를 클릭한 후 데이터 준비를 선택합니다.
새 데이터 준비를 만들거나 기존 데이터 준비를 가져올 수 있습니다.
선택사항: 데이터 준비 태스크 세부정보 창의 선행 작업 메뉴에서 데이터 준비 앞에 실행할 태스크를 선택합니다.

데이터 준비는 이전 태스크에 따라 다릅니다.


새 데이터 준비 만들기


데이터 준비 수정 옆에 있는 arrow_drop_down 화살표 메뉴를 클릭하고 컨텍스트에서 또는 새 탭에서를 선택합니다.
기존 데이터 준비를 검색합니다.
데이터 준비 이름을 선택하고 Enter 키를 누릅니다.
저장을 클릭합니다.
선택사항: 데이터 준비 이름을 바꾸려면 파이프라인 창에서 데이터 준비 이름을 클릭하고 데이터 준비 수정을 클릭한 후 화면 상단에서 이름을 클릭하고 새 이름을 입력합니다.


기존 데이터 준비 가져오기


데이터 준비 수정 옆에 있는 arrow_drop_down 화살표 드롭다운 메뉴를 클릭하고 사본 가져오기를 클릭합니다.
가져올 기존 데이터 준비를 검색하거나 검색 창에서 기존 데이터 준비를 선택합니다. 데이터 준비를 가져오면 데이터 준비 소스 파일이 파이프라인에 복사되므로 원본은 변경되지 않습니다.
가져온 데이터 준비를 열려면 수정을 클릭합니다.
저장을 클릭합니다.
파이프라인 태스크 수정
파이프라인 태스크를 수정하려면 다음 단계를 수행합니다.
Google Cloud 콘솔에서 BigQuery 페이지로 이동합니다.
BigQuery로 이동 [https://console.cloud.google.com/bigquery?hl=ko]
탐색기 창에서 프로젝트와 파이프라인 폴더를 펼친 후 파이프라인을 선택합니다.
선택한 태스크를 클릭합니다.
앞의 태스크를 변경하려면 선행 작업 메뉴에서 쿼리나 노트북 앞에 실행할 태스크를 선택합니다.
선택한 태스크의 콘텐츠를 수정하려면 수정을 클릭합니다.
새 탭이 열리면 태스크 콘텐츠를 수정한 다음 태스크의 변경사항을 저장합니다.
파이프라인 태스크 삭제
파이프라인에서 태스크를 삭제하려면 다음 단계를 수행합니다.
Google Cloud 콘솔에서 BigQuery 페이지로 이동합니다.
BigQuery로 이동 [https://console.cloud.google.com/bigquery?hl=ko]
탐색기 창에서 프로젝트와 파이프라인 폴더를 펼친 후 파이프라인을 선택합니다.
선택한 태스크를 클릭합니다.
태스크 세부정보 창에서 삭제삭제 아이콘을 클릭합니다.
파이프라인 공유
참고: 파이프라인을 공유할 수 있지만 파이프라인 내 태스크를 공유할 수는 없습니다.
파이프라인을 공유하려면 다음 단계를 수행합니다.
Google Cloud 콘솔에서 BigQuery 페이지로 이동합니다.
BigQuery로 이동 [https://console.cloud.google.com/bigquery?hl=ko]
탐색기 창에서 프로젝트와 파이프라인 폴더를 펼친 후 파이프라인을 선택합니다.
공유를 클릭한 후 권한 관리를 선택합니다.
사용자/그룹 추가를 클릭합니다.
새 주 구성원 필드에 사용자 이름이나 그룹 이름을 최소 하나 이상 입력합니다.
역할 할당에서 역할을 선택합니다.
저장을 클릭합니다.
파이프라인 링크 공유
Google Cloud 콘솔에서 BigQuery 페이지로 이동합니다.
BigQuery로 이동 [https://console.cloud.google.com/bigquery?hl=ko]
탐색기 창에서 프로젝트와 파이프라인 폴더를 펼친 후 파이프라인을 선택합니다.
공유를 클릭한 후 링크 공유를 선택합니다. 파이프라인 URL이 컴퓨터 클립보드에 복사됩니다.
파이프라인 실행
파이프라인의 현재 버전을 수동으로 실행하려면 다음 단계를 수행합니다.
Google Cloud 콘솔에서 BigQuery 페이지로 이동합니다.
BigQuery로 이동 [https://console.cloud.google.com/bigquery?hl=ko]
탐색기 창에서 프로젝트와 파이프라인 폴더를 펼친 후 파이프라인을 선택합니다.
실행을 클릭합니다. 인증 [https://cloud.google.com/bigquery/docs/create-pipelines?hl=ko#create_a_pipeline]에 내 사용자 인증 정보로 실행을 선택한 경우 Google 계정을 승인 [https://cloud.google.com/bigquery/docs/create-pipelines?hl=ko#authorize-google-account](프리뷰 [https://cloud.google.com/products?hl=ko#product-launch-stages])해야 합니다.
선택사항: 실행을 검사하려면 이전 수동 실행을 확인 [https://cloud.google.com/bigquery/docs/manage-pipelines?hl=ko#view-manual-runs]합니다.
Google 계정 승인하기
프리뷰
이 제품 또는 기능에는 서비스별 약관 [https://cloud.google.com/terms/service-terms?hl=ko#1]의 일반 서비스 약관 섹션에 있는 'GA 이전 제공 서비스 약관'이 적용됩니다. GA 이전 제품 및 기능은 '있는 그대로' 제공되며 지원이 제한될 수 있습니다. 자세한 내용은 출시 단계 설명 [https://cloud.google.com/products?hl=ko#product-launch-stages]을 참조하세요.
참고: 이 기능에 대한 지원을 요청하거나 의견을 제공하려면 dataform-preview-support@google.com [mailto:dataform-preview-support@google.com]으로 문의하세요.
Google 계정 [https://cloud.google.com/iam/docs/principals-overview?hl=ko#google-account] 사용자 인증 정보로 리소스를 인증하려면 Google 계정의 액세스 토큰을 가져오고 사용자를 대신하여 소스 데이터에 액세스할 수 있는 권한을 BigQuery 파이프라인에 수동으로 부여해야 합니다. OAuth 대화상자 인터페이스를 사용하여 수동 승인을 부여할 수 있습니다.
BigQuery 파이프라인에 대한 권한을 한 번만 부여하면 됩니다.
부여한 권한을 취소하려면 다음 단계를 수행합니다.
Google 계정 페이지 [https://myaccount.google.com/?hl=ko]로 이동합니다.
BigQuery 파이프라인을 클릭합니다.
액세스 권한 삭제를 클릭합니다.
경고: 액세스 권한을 취소하면 향후에 모든 리전에서 이 Google 계정에서 소유하고 있는 파이프라인이 실행되지 않습니다.
파이프라인에 노트북이 포함된 경우 Google 계정의 액세스 토큰을 가져오고 사용자를 대신하여 소스 데이터에 액세스할 수 있는 권한을 Colab Enterprise에게 수동으로 부여해야 합니다. 권한을 한 번만 부여하면 됩니다. Google 계정 페이지 [https://myaccount.google.com/?hl=ko]에서 이 권한을 취소할 수 있습니다.
다음 단계
BigQuery 파이프라인 [https://cloud.google.com/bigquery/docs/pipelines-introduction?hl=ko] 자세히 알아보기
파이프라인 관리 [https://cloud.google.com/bigquery/docs/manage-pipelines?hl=ko] 방법 알아보기
파이프라인 예약 [https://cloud.google.com/bigquery/docs/schedule-pipelines?hl=ko] 방법 알아보기
도움이 되었나요?
의견 보내기