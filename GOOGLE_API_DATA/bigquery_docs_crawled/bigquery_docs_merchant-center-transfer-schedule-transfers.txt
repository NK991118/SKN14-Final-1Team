Source URL: https://cloud.google.com/bigquery/docs/merchant-center-transfer-schedule-transfers

BigQuery [https://cloud.google.com/bigquery?hl=ko]
Documentation [https://cloud.google.com/bigquery/docs?hl=ko]
가이드 [https://cloud.google.com/bigquery/docs/introduction?hl=ko]
도움이 되었나요?
의견 보내기
이 페이지의 내용
시작하기 전에 [https://cloud.google.com/bigquery/docs/merchant-center-transfer-schedule-transfers?hl=ko#before_you_begin]
필수 권한 [https://cloud.google.com/bigquery/docs/merchant-center-transfer-schedule-transfers?hl=ko#required_permissions]
Google 판매자 센터 전송 설정 [https://cloud.google.com/bigquery/docs/merchant-center-transfer-schedule-transfers?hl=ko#set_up_a_google_merchant_center_transfer]
Google 판매자 센터 전송 설정 문제 해결 [https://cloud.google.com/bigquery/docs/merchant-center-transfer-schedule-transfers?hl=ko#troubleshoot_google_merchant_center_transfer_setup]
Google 판매자 센터 전송 예약
bookmark_border
Preview
This product is subject to the "Pre-GA Offerings Terms" in the General Service Terms section of the Service Specific Terms [https://cloud.google.com/terms/service-terms?hl=ko#1]. Pre-GA products are available "as is" and might have limited support. For more information, see the launch stage descriptions [https://cloud.google.com/products?hl=ko#product-launch-stages].
참고: BigQuery Data Transfer Service의 Google 판매자 센터 전송에 대한 지원을 받거나 의견을 보내려면 gmc-transfer-preview@google.com [mailto:gmc-transfer-preview@google.com]에 문의하세요.
시작하기 전에
Google 판매자 센터 데이터 전송을 만들기 전에 다음을 수행하세요.
BigQuery Data Transfer Service 사용 설정 [https://cloud.google.com/bigquery/docs/enable-transfer-service?hl=ko]에 필요한 모든 작업을 완료했는지 확인합니다.
Google 판매자 센터 데이터를 저장할 BigQuery 데이터 세트를 생성 [https://cloud.google.com/bigquery/docs/datasets?hl=ko]합니다.
데이터 세트 리전의 경우 미국 또는 EU에서 기본 옵션인 멀티 리전을 사용할 수 있습니다.
특정 리전에 데이터 세트를 만들려는 경우 다음 리전에서만 판매자 센터 데이터 전송이 지원됩니다.
us-east4 (Northern Virginia),
asia-northeast1 (Tokyo),
asia-southeast1 (Singapore),
australia-southeast1 (Sydney),
europe-north1 (Finland),
europe-west2 (London),
europe-west6 (Zurich).
Pub/Sub의 전송 실행 알림을 설정하려면 pubsub.topics.setIamPolicy 권한이 있어야 합니다. 이메일 알림만 설정한다면 Pub/Sub 권한이 필요하지 않습니다. 자세한 내용은 BigQuery Data Transfer Service 실행 알림 [https://cloud.google.com/bigquery/docs/transfer-run-notifications?hl=ko]을 참조하세요.
필수 권한
데이터 전송을 만드는 사용자에게 다음과 같은 필수 권한이 있어야 합니다.
BigQuery:
데이터 전송을 만드는 bigquery.transfers.update 권한
대상 데이터 세트에 대한 bigquery.datasets.get 및 bigquery.datasets.update 권한
사전 정의된 IAM 역할 bigquery.admin에는 bigquery.transfers.update, bigquery.datasets.update, bigquery.datasets.get 권한이 있습니다. BigQuery Data Transfer Service의 IAM 역할에 대한 자세한 내용은 액세스 제어 [https://cloud.google.com/bigquery/docs/access-control?hl=ko]를 확인하세요.
Google 판매자 센터
전송 구성에 사용되는 Google 판매자 센터 계정에 대한 일반 액세스 [https://support.google.com/merchants/answer/1637190?hl=ko]입니다. Google 판매자 센터 UI [https://merchants.google.com/?hl=ko]에서 사용자 섹션을 클릭하여 액세스 권한을 확인할 수 있습니다.
가격 경쟁력 및 베스트셀러 데이터에 액세스하려면 시장 통계 자격 요건 [https://support.google.com/merchants/answer/9712881?hl=ko]을 충족해야 합니다.
Google 판매자 센터 전송 설정
Google 판매자 센터 보고를 위한 데이터 전송을 설정하려면 다음이 필요합니다.
판매자 ID 또는멀티 클라이언트 계정 ID: Google 판매자 센터 UI [https://merchants.google.com/mc?hl=ko]에 표시되는 판매자 ID입니다.
Google 판매자 센터 보고용 데이터 전송을 만들려면 다음 안내를 따르세요.
--- 탭: 콘솔 [https://cloud.google.com/bigquery/docs/merchant-center-transfer-schedule-transfers?hl=ko#%EC%BD%98%EC%86%94] ---
Google Cloud 콘솔의 데이터 전송 페이지로 이동합니다.

데이터 전송으로 이동 [https://console.cloud.google.com/bigquery/transfers?hl=ko] 
add 전송 만들기를 클릭합니다.
전송 만들기 페이지에서 다음을 수행합니다.


소스 유형 섹션에서 소스로 Google 판매자 센터를 선택합니다.
전송 구성 이름 섹션의 표시 이름에 데이터 전송 이름(예: My Transfer)을 입력합니다. 전송 이름은 나중에 수정해야 할 경우를 대비해 전송을 식별할 수 있는 값이면 됩니다.

 
일정 옵션 섹션에서 다음을 수행합니다.


반복 빈도를 선택합니다. 시간, 일, 주 또는 월을 선택하면 빈도도 지정해야 합니다. 커스텀을 선택하여 커스텀 반복 빈도를 지정할 수도 있습니다. 주문형을 선택한 경우 수동으로 전송을 트리거 [https://cloud.google.com/bigquery/docs/working-with-transfers?hl=ko#manually_trigger_a_transfer]하면 이 데이터 전송이 실행됩니다.
해당하는 경우 지금 시작 또는 설정 시간에 시작을 선택하고 시작 날짜와 실행 시간을 제공합니다.
시작일 및 실행 시간에 전송을 시작할 날짜 및 시간을 입력합니다. 이 값은 현재 UTC 시간에서 24시간 이상 경과한 시간이어야 합니다. 지금 시작을 선택하면 이 옵션은 사용 중지됩니다.

 

일정 옵션을 지금 시작으로 설정한 상태로 두면 첫 번째 데이터 전송 실행이 즉시 시작되고, 오류 메시지(No data to transfer
found for the Merchant account. If you have just created this
transfer, you may need to wait for up to a day before
the data of your Merchant account are prepared and available for
the transfer.)와 함께 실패합니다. 다음 예약된 실행은 성공적으로 실행됩니다.
판매자 계정의 데이터가 동일한 날짜(UTC 시간)에 준비되었으면 오늘 실행에 대해 백필을 설정 [https://cloud.google.com/bigquery/docs/working-with-transfers?hl=ko#manually_trigger_a_transfer]할 수 있습니다.

대상 설정 섹션의 대상 데이터세트에서 데이터를 저장하기 위해 만든 데이터세트를 선택합니다.

 
데이터 소스 세부정보 섹션에서 판매자 ID에 판매자 ID 또는 MCA ID를 입력합니다.

전송할 보고서를 선택하세요. 자세한 내용은 지원되는 보고서 [https://cloud.google.com/bigquery/docs/merchant-center-transfer?hl=ko#supported_reports]를 참조하세요.

 
서비스 계정 메뉴에서 Google Cloud 프로젝트와 연결된 서비스 계정의 서비스 계정 [https://cloud.google.com/iam/docs/service-account-overview?hl=ko]을 선택합니다. 사용자 인증 정보를 사용하는 대신 서비스 계정을 데이터 전송에 연결할 수 있습니다. 데이터 전송에서 서비스 계정을 사용하는 방법에 대한 자세한 내용은 서비스 계정 사용 [https://cloud.google.com/bigquery/docs/use-service-accounts?hl=ko]을 참조하세요.


제휴 ID [https://cloud.google.com/iam/docs/workforce-identity-federation?hl=ko]로 로그인한 경우 서비스 계정이 데이터 전송을 만드는 데 필요합니다. Google 계정 [https://cloud.google.com/iam/docs/overview?hl=ko#google_account]으로 로그인한 경우 전송에 사용되는 서비스 계정은 선택사항입니다.
서비스 계정에는 필수 권한 [https://cloud.google.com/bigquery/docs/merchant-center-transfer-schedule-transfers?hl=ko#required_permissions]이 있어야 합니다.

(선택사항) 알림 옵션 섹션에서 다음을 수행합니다.


전환을 클릭해서 이메일 알림을 사용 설정합니다. 이 옵션을 사용 설정하면 전송 실행이 실패할 때 전송 관리자에게 이메일 알림이 발송됩니다.
Pub/Sub 주제 선택에서 주제 [https://cloud.google.com/pubsub/docs/overview?hl=ko#types] 이름을 선택하거나 주제 만들기를 클릭합니다. 이 옵션은 전송에 대한 Pub/Sub 실행 알림 [https://cloud.google.com/bigquery/docs/transfer-run-notifications?hl=ko]을 구성합니다.


저장을 클릭합니다.

--- 탭: bq [https://cloud.google.com/bigquery/docs/merchant-center-transfer-schedule-transfers?hl=ko#bq] ---
bq mk 명령어를 입력하고 전송 생성 플래그 --transfer_config를 지정합니다. 다음 플래그도 필요합니다.


--data_source
--target_dataset
--display_name
--params


또한 --project_id 플래그를 입력하여 특정 프로젝트를 지정할 수도 있습니다. --project_id를 지정하지 않으면 기본 프로젝트가 사용됩니다.

bq mk \
--transfer_config \
--project_id=project_id \
--target_dataset=dataset \
--display_name=name \
--params='parameters' \
--data_source=data_source
--service_account_name=service_account_name

각 항목의 의미는 다음과 같습니다.


project_id는 프로젝트 ID입니다.
dataset는 전송 구성 대상 데이터 세트입니다.
name은 전송 구성의 표시 이름입니다. 전송 이름은 나중에 수정해야 할 경우를 대비해 전송을 식별할 수 있는 값이면 됩니다.
parameters에는 JSON 형식으로 생성된 전송 구성의 매개변수가 있습니다. 예를 들면 --params='{"param":"param_value"}'입니다.

Google 판매자 센터 데이터 전송에서 merchant_id 파라미터를 지정합니다.
export_products 매개변수는 제품 및 제품 문제 데이터를 전송할지 여부를 지정합니다. 이 매개변수는 export_products 매개변수를 지정하지 않은 경우에도 기본적으로 포함됩니다. 이 매개변수를 명시적으로 포함하고 'true'로 설정하는 것이 좋습니다.
export_regional_inventories 매개변수는 리전별 인벤토리 데이터를 전송할지 여부를 지정합니다.
export_local_inventories 매개변수는 로컬 인벤토리 데이터를 전송할지 여부를 지정합니다.
export_price_competitiveness 매개변수는 가격 경쟁력 데이터를 전송할지 여부를 지정합니다.
export_price_insights 매개변수는 가격 정보 데이터를 전송할지 여부를 지정합니다.
export_best_sellers_v2 매개변수는 베스트셀러 데이터를 전송할지 여부를 지정합니다.
export_performance 매개변수는 제품 실적 데이터를 전송할지 여부를 지정합니다.

data_source는 데이터 소스(merchant_center)입니다.
service_account_name은 데이터 전송을 인증하는 데 사용되는 서비스 계정 이름입니다. 전송을 만드는 데 사용한 것과 동일한 project_id에서 서비스 계정을 소유해야 하며 이 계정에 모든 필수 권한 [https://cloud.google.com/bigquery/docs/merchant-center-transfer-schedule-transfers?hl=ko#required_permissions]이 있어야 합니다.

주의: 명령줄 도구를 사용하여 알림을 구성할 수 없습니다.
예를 들어 다음 명령어는 판매자 ID 1234 및 대상 데이터 세트 mydataset를 사용하여 My Transfer라는 Google 판매자 센터 데이터 전송을 만듭니다. 기본 프로젝트에 데이터 전송이 생성됩니다.
bq mk \
--transfer_config \
--target_dataset=mydataset \
--display_name='My Transfer' \
--params='{"merchant_id":"1234","export_products":"true","export_regional_inventories":"true","export_local_inventories":"true","export_price_benchmarks":"true","export_best_sellers":"true"}' \
--data_source=merchant_center

명령어를 처음 실행할 때 다음과 같은 메시지를 받게 됩니다.

[URL omitted] Please copy and paste the above URL into your web browser and
follow the instructions to retrieve an authentication code.

메시지 안내를 따라 명령줄에 인증 코드를 붙여넣습니다.
주의: 명령줄 도구를 사용하여 Google 판매자 센터 데이터 전송을 만들면 전송 구성은 일정(생성 시 24 시간마다)의 기본값을 사용하여 설정됩니다. 첫 번째 전송 실행은 즉시 시작되고 오류 메시지(No data to transfer found for the Merchant account.)와 함께 실패합니다.
이 데이터 전송을 만들고 최대 1일 동안 기다려야만 판매자 계정의 데이터가 준비되고 전송 가능한 상태가 됩니다. 다음 예약된 실행은 성공적으로 실행됩니다. 판매자 계정의 데이터가 동일한 날짜(UTC 시간)에 준비되었으면 오늘 실행에 대해 백필을 설정 [https://cloud.google.com/bigquery/docs/working-with-transfers?hl=ko#manually_trigger_a_transfer]할 수 있습니다.

--- 탭: API [https://cloud.google.com/bigquery/docs/merchant-center-transfer-schedule-transfers?hl=ko#api] ---
projects.locations.transferConfigs.create [https://cloud.google.com/bigquery-transfer/docs/reference/datatransfer/rest/v1/projects.locations.transferConfigs/create?hl=ko] 메서드를 사용하고 TransferConfig [https://cloud.google.com/bigquery-transfer/docs/reference/datatransfer/rest/v1/projects.locations.transferConfigs?hl=ko#TransferConfig] 리소스의 인스턴스를 지정합니다.
Google 판매자 센터 전송 설정 문제 해결
데이터 전송을 설정하는 데 문제가 발생하면 BigQuery Data Transfer Service 전송 설정 문제 해결 [https://cloud.google.com/bigquery/docs/transfer-troubleshooting?hl=ko]에서 Google 판매자 센터 전송 문제 [https://cloud.google.com/bigquery/docs/transfer-troubleshooting?hl=ko#merchant]를 참조하세요.
도움이 되었나요?
의견 보내기